---
title: "使用軟體限制原則規則"
description: "Windows Server 安全性"
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: security-software-restriction-policies
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 4a8047d5-9bb9-4bed-bc8f-583a237731e2
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/12/2016
ms.openlocfilehash: 2dd1810b50f4f02be99eb2e2c0893501f99d1e93
ms.sourcegitcommit: 70c1b6cedad55b9c7d2068c9aa4891c6c533ee4c
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/03/2017
---
# <a name="work-with-software-restriction-policies-rules"></a>使用軟體限制原則規則

>適用於：Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

本主題描述憑證路徑，網際網路區域和 hash 規則使用軟體限制原則處理程序。

## <a name="introduction"></a>簡介
使用軟體限制原則，您可以找出並指定哪些軟體允許執行的軟體受信任保護您的電腦環境。 您可以定義預設安全性層級的**限制**或**不允許]**群組原則物件 (GPO)，或不是允許的軟體允許執行預設的。 您可以讓這個預設的安全性等級例外建立軟體限制原則規則特定的軟體。 例如，如果設為預設的安全性等級**不允許]**，您可以建立規則允許特定的軟體，才能執行。 種規則如下：

-   **憑證規則**

    程序，請查看[使用規則憑證](#BKMK_Cert_Rules)。

-   **Hash 規則**

    程序，請查看[使用 hash 規則](#BKMK_Hash_Rules)。

-   **網際網路區規則**

    程序，請查看[使用網際網路時區規則的](#BKMK_Internet_Zone_Rules)。

-   **路徑規則**

    程序，請查看[使用路徑規則](#BKMK_Path_Rules)。

有關如何管理軟體限制原則其他工作，請查看[管理軟體限制原則](administer-software-restriction-policies.md)。

## <a name="BKMK_Cert_Rules"></a>使用憑證規則
軟體限制原則也可以其專屬的簽署憑證來辨識的軟體。 您可以建立憑證規則辨識軟體和可或不允許的軟體執行，而定安全性層級。 例如，您可以使用的憑證規則自動不提示使用者信任的網域信任的來源的軟體。 您也可以使用的憑證規則執行不允許您的作業系統區域中的檔案。 預設不會支援憑證規則。

使用群組原則的網域規則建立，您必須建立或修改群組原則物件的權限。 如果您要建立本機電腦規則，您必須管理認證的電腦上。

#### <a name="to-create-a-certificate-rule"></a>若要建立的憑證規則

1.  打開軟體限制原則。

2.  在主機樹或詳細資料窗格中，以滑鼠右鍵按一下**其他規則**，然後按一下 [**新的憑證規則**。

3.  按一下**瀏覽]**，然後選取 [已簽署的檔案或憑證。

4.  在**安全性層級**，按一下**不允許]**或**限制**。

5.  在**描述**，輸入此規則、 描述，然後按**[確定]**。

> [!NOTE]
> -   它可能需要如果您擁有已經執行此動作，建立新的軟體限制原則設定的群組原則物件 (GPO)。
> -   預設不會支援憑證規則。
> -   檔案類型，只會受到憑證規則的這些會列在**指定的檔案類型**在詳細資料窗格中的軟體限制原則。 還有一個共用的所有規則指定的檔案類型的清單。
> -   軟體限制原則才會生效，使用者必須更新原則設定登出並登入他們的電腦。
> -   多個軟體限制原則規則套用原則設定時，有時的處理衝突規則的優先順序。

### <a name="enabling-certificate-rules"></a>讓憑證規則
您有不同的程序，讓您的環境根據憑證規則：

-   [適用於您的電腦](#BKMK_1)

-   [群組原則物件，而您有已經加入網域的伺服器上的](#BKMK_2)

-   [群組原則物件，而且您的網域控制站或工作站上有安裝遠端伺服器管理工具](#BKMK_3)

-   [僅限網域控制器，以及您的網域控制站或已安裝的遠端伺服器管理工具套件工作站](#BKMK_4)

#### <a name="BKMK_1"></a>若要讓您的本機電腦的憑證規則

1.  打開本機安全性設定。

2.  主控台中，按一下 [**安全性選項**位於 [安全性設定/本機原則。

3.  在詳細資料窗格中，按兩下 [**系統設定： 使用軟體限制原則的 Windows 可執行檔憑證規則**。

4.  執行下列其中一項，然後按一下**[確定]**:

    -   若要讓憑證規則，按一下 [**啟用**。

    -   若要停用憑證規則，請按一下**停用**。

#### <a name="BKMK_2"></a>憑證規則，以便適用於群組原則物件，而您有已經加入網域的伺服器上

1.  打開 Microsoft Management Console (MMC)。

2.  在**檔案**功能表上，按一下 [**新增/移除嵌入式管理單元**，然後按一下 [**新增**。

3.  按一下**本機群組原則物件編輯器**，然後按一下 [**新增]**。

4.  在**選取的群組原則物件**，按一下 [**瀏覽]**。

5.  在**群組原則物件的瀏覽**，選取適當的網域、 網站或組織單位群組原則物件 (GPO)-或建立新的 homegroup，然後按**完成**。

6.  按一下**關閉**，然後按**[確定]**。

7.  主控台中，按一下 [**安全性選項**底下位於*GroupPolicyObject* [*電腦名稱*] 原則日電腦設定日 Windows 設定日安全性設定/本機原則日。

8.  在詳細資料窗格中，按兩下 [**系統設定： 使用軟體限制原則的 Windows 可執行檔憑證規則**。

9. 如果尚未定義這項原則設定，請選取**定義這些原則設定**核取方塊。

10. 執行下列其中一項，然後按一下**[確定]**:

    -   若要讓憑證規則，按一下 [**啟用**。

    -   若要停用憑證規則，請按一下**停用**。

#### <a name="BKMK_3"></a>讓憑證規則適用於群組原則物件，與您的網域控制站或工作站有安裝遠端伺服器管理工具

1.  打開 Active Directory 使用者與電腦。

2.  在主機上按一下滑鼠右鍵群組原則物件 (GPO) 您想要讓憑證規則。

3.  按一下**屬性**，然後按**群組原則**索引標籤。

4.  按一下**編輯**打開 GPO，您要編輯。 您也可以按一下**新增]**以建立新的 GPO，然後按**編輯**。

5.  主控台中，按一下 [**安全性選項**底下位於*GroupPolicyObject*[*電腦名稱*] 原則日電腦設定日 Windows 設定日安全性設定/本機原則。

6.  在詳細資料窗格中，按兩下 [**系統設定： 使用軟體限制原則的 Windows 可執行檔憑證規則**。

7.  如果尚未定義這項原則設定，請選取**定義這些原則設定**核取方塊。

8.  執行下列其中一項，然後按一下**[確定]**:

    -   若要讓憑證規則，按一下 [**啟用**。

    -   若要停用憑證規則，請按一下**停用**。

#### <a name="BKMK_4"></a>憑證規則只網域控制站，而且您的網域控制站或已安裝遠端伺服器管理工具工作站，可讓

1.  左網域控制站的安全性設定。

2.  主控台中，按一下 [**安全性選項**底下位於*GroupPolicyObject* [*電腦名稱*] 原則日電腦設定日 Windows 設定日安全性設定/本機原則。

3.  在詳細資料窗格中，按兩下 [**系統設定： 使用軟體限制原則的 Windows 可執行檔憑證規則**。

4.  如果尚未定義這項原則設定，請選取**定義這些原則設定**核取方塊。

5.  執行下列其中一項，然後按一下**[確定]**:

    -   若要讓憑證規則，按一下 [**啟用**。

    -   若要停用憑證規則，請按一下**停用**。

> [!NOTE]
> 您必須先憑證規則才會生效，來執行這個程序。

### <a name="set-trusted-publisher-options"></a>設定受信任的發行者選項
軟體簽署正越來越多的軟體的發行者和應用程式開發人員，以驗證其應用程式，來自信任的來源。 不過，許多使用者不了解，或與他們所安裝的應用程式相關聯的專屬的簽署憑證來小注意。

中的原則設定**受信任的發行者**索引標籤上的憑證路徑驗證原則讓系統管理員控制可接受的憑證來自信任的發行者。

##### <a name="to-configure-the-trusted-publishers-policy-settings-for-a-local-computer"></a>若要設定的本機電腦的受信任的發行者原則設定

1.  在**[開始]**畫面中，輸入**gpedit.msc** ，然後按 ENTER 鍵。

2.  在下方主控台**本機電腦電腦原則 \ \windows 安全性設定設定**，按一下 [**公開原則**。

3.  按兩下**憑證路徑驗證設定**，然後按一下 [**受信任的發行者**索引標籤。

4.  選取 [**定義這些原則設定**核取方塊，選取您想要適用的選項，然後按一下 [原則設定] **[確定]**套用新的設定。

##### <a name="to-configure-the-trusted-publishers-policy-settings-for-a-domain"></a>若要設定的網域信任的發行者原則設定

1.  開放**群組原則管理**。

2.  在主控台按兩下 [**群組原則物件**的樹系和網域包含**預設網域原則**群組原則物件 (GPO) 您想要編輯。

3.  以滑鼠右鍵按一下**預設網域原則**GPO，然後再按一下**編輯**。

4.  在下方主控台**電腦 \windows \ 安全性設定**，按一下 [**公開原則**。

5.  按兩下**憑證路徑驗證設定**，然後按一下 [**受信任的發行者**索引標籤。

6.  選取 [**定義這些原則設定**核取方塊，選取您想要適用的選項，然後按一下 [原則設定] **[確定]**套用新的設定。

##### <a name="to-allow-only-administrators-to-manage-certificates-used-for-code-signing-for-a-local-computer"></a>若要允許管理憑證登入本機電腦的程式碼所使用的系統管理員

1.  在**[開始]**畫面中，輸入， **gpedit.msc**中**搜尋程式及檔案**或 Windows 8 上的桌面，然後按下 ENTER。

2.  在主機樹**預設網域原則**或**本機電腦原則**，按兩下 [**電腦設定**、 **Windows 設定**，和**的安全性設定**，，然後按一下 [**公用原則**。

3.  按兩下**憑證路徑驗證設定**，然後按一下 [**受信任的發行者**索引標籤。

4.  選取 [**定義這些原則設定**核取方塊。

5.  在**受信任的發行者管理**，按一下 [**只允許所有系統管理員，管理受信任的發行者**，然後按一下 [ **[確定]**套用新的設定。

##### <a name="to-allow-only-administrators-to-manage-certificates-used-for-code-signing-for-a-domain"></a>若要允許管理使用的程式碼簽章網域憑證的系統管理員

1.  開放**群組原則管理**。

2.  在主控台按兩下 [**群組原則物件**的樹系和網域包含**預設網域原則**GPO，您要編輯。

3.  以滑鼠右鍵按一下**預設網域原則**GPO，然後再按一下**編輯**。

4.  在下方主控台**電腦 \windows \ 安全性設定**，按一下 [**公開原則**。

5.  按兩下**憑證路徑驗證設定**，然後按一下 [**受信任的發行者**索引標籤。

6.  選取**定義這些原則設定**核取方塊，實作的變更，然後按**[確定]**來套用新的設定。

## <a name="BKMK_Hash_Rules"></a>使用 hash 規則
Hash 是一系列位元組辨識軟體程式或檔案的修正長度。 湊計算 hash 演算法。 軟體程式建立 hash 規則之後，軟體限制原則計算 hash 的程式。 當使用者嘗試開放的軟體程式時，hash 的程式會比較現有 hash 規則軟體限制原則與。 湊的軟體程式都相同，無論程式在電腦上的所在位置。 不過，如果軟體程式以任何方式改變，其 hash 也會變更，並不會再比對雜 hash 規則的軟體限制原則。

例如，您可以建立 hash 規則，並將安全性設定層級，以**不允許]**以防止使用者執行特定檔案。 可以重新命名或移動到另一個資料夾的檔案和仍然會導致湊相同。 不過，本身檔案的任何變更也變更其 hash 值，並允許檔案略過限制。

#### <a name="to-create-a-hash-rule"></a>若要建立 hash 規則

1.  打開軟體限制原則。

2.  在主機樹或詳細資料窗格中，以滑鼠右鍵按一下**其他規則**，然後按一下 [**新 Hash 規則**。

3.  按一下**瀏覽]**若要尋找的檔案。

    > [!NOTE]
    > 在 Windows XP 貼上預先計算的雜可能會**檔案 hash**。 在 Windows Server 2008 R2、 Windows 7 和較新版本，此選項無法使用。

4.  在**安全性層級**，按一下**不允許]**或**限制**。

5.  在**描述**，輸入此規則、 描述，然後按**[確定]**。

> [!NOTE]
> -   它可能需要如果您擁有已經執行此動作，建立新的軟體限制原則設定的群組原則物件 (GPO)。
> -   病毒或禁止執行特洛伊木馬可以建立 hash 規則。
> -   如果您想要使用 hash 規則，因此無法執行病毒其他人，計算病毒的湊使用軟體限制原則，以電子郵件給其他人 hash 值。 從未電子郵件傳送本身病毒。
> -   如果您透過電子郵件已傳送病毒，您也可以建立路徑規則，以避免執行的電子郵件附件。
> -   重新命名或移動到另一個資料夾結果，在同一個湊檔案。 會導致不同 hash 本身檔案的任何變更。
> -   檔案類型，才會受到 hash 規則的所列出的**指定的檔案類型**在詳細資料窗格中的軟體限制原則。 還有一個共用的所有規則指定的檔案類型的清單。
> -   軟體限制原則才會生效，使用者必須更新原則設定登出並登入他們的電腦。
> -   多個軟體限制原則規則套用原則設定時，有時的處理衝突規則的優先順序。

## <a name="BKMK_Internet_Zone_Rules"></a>使用網際網路區規則
網際網路時區規則僅適用於 Windows 的安裝程式的套件。 時區規則找出從 Internet Explorer 透過指定區域的軟體。 這些區域而網際網路、 近端、 限制的網站、 信任的網站，我的電腦。 網際網路時區規則的設計目的是讓使用者無法下載並安裝軟體。

#### <a name="to-create-an-internet-zone-rule"></a>若要新增網際網路區規則

1.  打開軟體限制原則。

2.  主機樹或詳細資料窗格中，以滑鼠右鍵按一下**其他規則**，然後按一下 [**新的網際網路區規則**。

3.  在**網際網路區域**，按一下 [網際網路區域。

4.  在**安全性層級**，按一下**不允許**或**不受限制 \**，然後按一下**[確定]**。

> [!NOTE]
> -   它可能需要如果您擁有已經執行此動作，建立新的軟體限制原則設定的群組原則物件 (GPO)。
> -   使用.msi 檔案類型，檔案是 Windows 安裝程式套件只適用於時區規則。
> -   軟體限制原則才會生效，使用者必須更新原則設定登出並登入他們的電腦。
> -   多個軟體限制原則規則套用原則設定時，有時的處理衝突規則的優先順序。

## <a name="BKMK_Path_Rules"></a>工作的路徑規則
路徑規則辨識軟體利用檔案路徑。 例如，如果您有電腦，並具有預設安全性層級的**不允許]**，您仍然可以授與不受限制的存取特定資料夾每一位使用者。 您可以使用的檔案路徑，並將設定的路徑規則的安全性等級建立的路徑規則**未限制**。 一些常見的路徑規則這種是 %userprofile%、 %windir%、 appdata %、 %programfiles%和暫存 %。 您也可以建立登錄其路徑使用登錄金鑰軟體的路徑規則。

本規則指定的路徑，如果移軟體程式，因為不再適用的路徑規則。

#### <a name="to-create-a-path-rule"></a>若要建立的路徑規則

1.  打開軟體限制原則。

2.  在主機樹或詳細資料窗格中，以滑鼠右鍵按一下**其他規則**，然後按一下 [**新的路徑規則**。

3.  在**路徑**，輸入路徑，或按一下 [**瀏覽]**來尋找的檔案或資料夾。

4.  在**安全性層級**，按一下**不允許]**或**限制**。

5.  在**描述**，輸入此規則、 描述，然後按**[確定]**。

> [!CAUTION]
> -   特定資料夾中，Windows 資料夾中，例如安全性設定層級到**不允許]** ，可能會影響您的作業系統的作業。 請確定您不允許的作業系統或其相關程式的其中一個重要且具元件。

> [!NOTE]
> -   它可能需要如果您擁有已經執行此動作，建立新的軟體限制原則適用於群組原則物件 (GPO)。
> -   如果您建立軟體的路徑規則的安全性等級的**不允許]**，使用者仍然可以執行的軟體，將它複製到另一個位置。
> -   支援的路徑規則萬用字元是 * 和？
> -   您可以在路徑規則使用環境變數，例如 %programfiles%或 systemroot %。
> -   如果您想要建立軟體的路徑規則，您不知道其會儲存在電腦上，但您擁有其登錄金鑰時，您可以建立登錄路徑規則。
> -   若要防止使用者執行電子郵件附件，您可以建立您的電子郵件附件 directory 阻擋執行的電子郵件附件使用者的路徑規則。
> -   檔案類型，只會受到影響的路徑規則的這些會列在**指定的檔案類型**在詳細資料窗格中的軟體限制原則。 還有一個共用的所有規則指定的檔案類型的清單。
> -   軟體限制原則才會生效，使用者必須更新原則設定登出並登入他們的電腦。
> -   多個軟體限制原則規則套用原則設定時，有時的處理衝突規則的優先順序。

#### <a name="to-create-a-registry-path-rule"></a>若要建立登錄路徑規則

1.  在**[開始]**畫面中，輸入 regedit。

2.  在主控台以滑鼠右鍵按一下您想要建立的規則，然後按一下 [登錄鍵**複製按鍵名稱**。 記下值詳細資料窗格中。

3.  打開軟體限制原則。

4.  在主機樹或詳細資料窗格中，以滑鼠右鍵按一下**其他規則**，然後按一下 [**新的路徑規則**。

5.  在**路徑**，貼上登錄名稱是後面值名稱。

6.  住百分比符號 （%），例如 %hkey_local_machine\software\microsoft\platformsdk\directories\installdir%登錄路徑。

7.  在**安全性層級**，按一下**不允許]**或**限制**。

8.  在**描述**，輸入此規則、 描述，然後按**[確定]**。


