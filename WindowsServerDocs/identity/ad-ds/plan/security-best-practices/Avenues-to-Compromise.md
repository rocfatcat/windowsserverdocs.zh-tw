---
ms.assetid: d7a4d2e1-217d-4ffc-93f0-817149bd9e7f
title: 危及系統安全的途徑
description: ''
author: MicrosoftGuyJFlo
ms.author: joflore
manager: mtillman
ms.date: 05/31/2017
ms.topic: article
ms.prod: windows-server-threshold
ms.technology: identity-adds
ms.openlocfilehash: 916bffd4f83e5c72816035542772342010e1a67c
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/17/2019
ms.locfileid: "59874479"
---
# <a name="avenues-to-compromise"></a>危及系統安全的途徑

>適用於：Windows Server 2016 中，Windows Server 2012 R2 中，Windows Server 2012

*法律 Number Seven:妥善管理的其中一個最安全的網路。* - [10 不變法則安全性管理](https://technet.microsoft.com/library/cc722488.aspx)  
  
在組織中發生嚴重的入侵事件，評量通常會顯示組織有限掌握可能明顯不同於實際狀態的 IT 基礎結構，其 「 述"狀態。 這些差異會造成公開 （expose） 環境，以危害，通常使用的探索，直到進入的點的攻擊者有效地 「 擁有 」 環境遭到入侵的風險很低的漏洞。  
  
詳細的評定，這些組織的 AD DS 設定、 公開金鑰基礎結構 (Pki)、 伺服器、 工作站、 應用程式的存取控制清單 (Acl)，和其他技術顯示不正確的設定和弱點，如果補救，可能導致系統無法初期入侵。  
  
分析 IT 文件、 處理程序和程序識別間距最終取得用來完全危及 Active Directory 樹系的權限的攻擊者所利用的系統管理作法所引進的弱點。 完全遭到入侵的樹系是其中一個攻擊者危害不僅個別系統、 應用程式或使用者帳戶，但是擴大其存取權，以取得在其中，它們可以修改或損毀樹系的所有層面的權限層級。 當 Active Directory 安裝已遭洩漏到，程度，攻擊者可以進行變更，讓他們能夠一直待在整個環境中，或是更糟的是，要終結之目錄的系統和其所管理的帳戶。  
  
雖然常被入侵的弱點，請依照下列說明中的數字不是 Active Directory 的攻擊，它們可讓攻擊者可以用來執行 （也稱為權限的權限提升的環境中建立據點提高權限） 攻擊和以最終目標，危害 AD DS。  
  
這份文件的這一節著重於說明攻擊者通常使用來存取基礎結構，以及最後啟動權限提高攻擊的機制。 另請參閱下列各節：  
  
-   [減少 Active Directory 的攻擊面](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md)詳細的 Active Directory 安全的設定建議。  
  
-   [監視 Active Directory 洩露跡象](../../../ad-ds/plan/security-best-practices/Monitoring-Active-Directory-for-Signs-of-Compromise.md)建議來協助偵測入侵  
  
-   [規劃危害](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Planning-for-Compromise.md)高層級的方法，可協助您準備基礎結構的攻擊 IT 與商務觀點  
  
> [!NOTE]  
> 雖然本文件著重於 AD DS 網域的一部分的 Active Directory 與 Windows 系統上，攻擊者很少會著重於 Active Directory 與 Windows。 在環境中混用作業系統、 目錄、 應用程式和資料儲存機制，它會尋找非 Windows 系統必須也遭到入侵。 特別是如果系統提供了"bridge"Windows 和非 Windows 環境之間，例如 Windows 和 UNIX 或 Linux 用戶端存取，提供多個作業系統，來驗證服務的目錄的檔案伺服器或跨不同的目錄同步處理資料的中繼目錄。  
>   
> AD DS 是因為集中存取和設定管理它所提供的功能不只以 Windows 系統，但其他用戶端為目標。 任何其他目錄或提供驗證和組態管理服務的應用程式可以並將設為目標的攻擊者。 雖然本文件著重於可以減少 Active Directory 安裝，包括非 Windows 的電腦，每個組織的危害的可能性的保護目錄、 應用程式或資料的儲存機制應該也準備對這些系統的攻擊。  
  
## <a name="initial-breach-targets"></a>初始的入侵目標  
沒有人刻意建置公開危及組織的 IT 基礎結構。 當第一次建構 Active Directory 樹系時，通常是原始和目前。 年來傳遞，並取得新的作業系統和應用程式，就會新增至樹系。 所辨識的 Active Directory 提供的管理性優點是，越來越多的內容新增至目錄、 更多人會將其電腦或應用程式整合與 AD DS 和升級網域以支援大部分所提供的新功能目前的 Windows 作業系統版本。 項目也會發生一段時間，不過，是即使在加入新的基礎結構，可能不，以及它們一開始是維護基礎結構的其他部分，系統和應用程式正常運作，因此不會接收注意及組織開始忘了，他們有不會刪除其舊版的基礎結構。 根據我們在評估遭入侵的基礎結構，請參閱較舊、 較大，且更複雜的環境，就越可能會有多個常被入侵的弱點執行個體。  
  
無論攻擊者的動機，大部分的資訊安全性缺口與一或兩個系統遭到入侵啟動一次。 這些初始事件或進入點的網路，通常會利用弱點，可能已獲得修正，但不是。 [2012年資料缺口調查報告 (DBIR)](http://www.verizonbusiness.com/resources/reports/rp_data-breach-investigations-report-2012_en_xg.pdf)，所產生的 Verizon 風險小組與幾個國家安全機構及其他公司的年度研究，說明攻擊的 96%"不是高度困難，"，而且"缺口 97%已經適當透過簡單或中間的控制項。 」 這些結果可能是常被入侵的弱點，請依照下列的直接結果。  
  
### <a name="gaps-in-antivirus-and-antimalware-deployments"></a>防毒和反惡意程式碼部署中的間距  
*法律編號八個：過期的惡意程式碼掃描器完全才稍微優於沒有掃描器。* - [十大不變法則安全性 （2.0 版）](https://technet.microsoft.com/security/hh278941.aspx)  
  
分析組織的防毒和反惡意程式碼部署通常可以發現大部分的工作站皆已啟用的防毒與反惡意程式碼軟體設定和目前的環境。 例外狀況通常是不常連接到公司環境或員工的裝置的防毒和反惡意程式碼軟體可能很難部署、 設定和更新的工作站。  
  
伺服器的母體擴展，不過，通常會是一致的保護變弱入侵您的環境中。 中所報告[2012年資料缺口調查](http://www.verizonbusiness.com/resources/reports/rp_data-breach-investigations-report-2012_en_xg.pdf)、 94 百分之所有資料會危害所涉及的伺服器，表示與前一年，增加 18%，且攻擊的 69%併入惡意程式碼。 在伺服器母體擴展，並不常見防毒和反惡意程式碼的安裝會不一致的設定、 過期、 設定不正確，或即使已停用。 在某些情況下，系統管理人員，會停用防毒和反惡意程式碼軟體，但在其他情況下，攻擊者後停用軟體危害伺服器，以透過其他弱點。 停用防毒和反惡意程式碼軟體時，攻擊者則計劃在伺服器上的惡意程式碼並著重於跨伺服器填入散佈洩露。  
  
很重要，不僅以確保您的系統受到目前已經過完整惡意程式碼保護，但也監視系統停用或移除防毒和反惡意程式碼軟體以及它時，自動重新啟動保護以手動方式停用。 雖然沒有防毒和反惡意程式碼軟體可保證防護和偵測的所有的感染，正確設定並部署防毒和反惡意程式碼實作可以降低感染的可能性。  
  
### <a name="incomplete-patching"></a>不完整修補  
*法律數字三：如果您沒有跟上的安全性修正程式，您的網路不是您用於長時間。* - [10 不變法則安全性管理](https://technet.microsoft.com/library/cc722488.aspx)  
  
Microsoft 資訊安全佈告欄上版本的每個月的第二個星期二雖然在少數情況下 （這些都是也稱為 「 超出頻外 」 更新） 的每月安全性更新之間發行安全性更新時的弱點可能會被判定為造成客戶系統產生迫切的風險。 小型企業設定其 Windows 電腦使用 Windows Update 管理系統和應用程式的修補或大型組織會使用管理軟體，例如 System Center Configuration Manager (SCCM) 來部署修補程式，根據詳細，階層式的計畫，許多客戶及時相當修補其 Windows 基礎結構。  
  
不過，一些基礎結構只包含 Windows 電腦和 Microsoft 應用程式，而且在遭入侵的環境中，通常會找出組織的修補程式管理策略包含間距。 在這些環境中的 Windows 系統不一致修補。 如果有的話，會偶修補非 Windows 作業系統。 商業現成的 (COTS) 應用程式包含的修補程式存在，但尚未套用的弱點。 網路裝置通常會設定使用原廠預設認證，並沒有韌體更新後的安裝。 通常保留應用程式和由其廠商已不受支援的作業系統執行，但其實不會再分開修補弱點。 每種未修補的系統會代表攻擊者的另一個可能的進入點。  
  
It 消費化的 IT 已導入了其他的挑戰，在該員工擁有的裝置來存取公司擁有的資料，以及組織可能會有一些無法控制的修補和員工的個人裝置的設定。 企業級硬體通常隨附於企業級組態選項和管理功能，但代價是較少的選擇個別自訂和裝置的選取範圍中。 員工為主的硬體提供廣泛的製造商、 廠商、 硬體安全性功能、 軟體的安全性功能、 管理能力和組態選項，而且許多企業級功能完全可能不存在。  
  
#### <a name="patch-and-vulnerability-management-software"></a>修補程式和弱點管理軟體  
如果有效的修補程式管理系統，可供在 Windows 作業系統和 Microsoft 應用程式已解決一部分未修補的弱點建立的受攻擊面。 不過，除非也處於最新的修補程式和其他修正非 Windows 系統、 非 Microsoft 應用程式、 網路基礎結構和員工的裝置，仍然易受攻擊的基礎結構。 在某些情況下，應用程式的廠商可能會提供自動更新功能;在其他人，可能需要特別設定的方法來定期擷取和套用修補程式和其他修正程式。
  
### <a name="outdated-applications-and-operating-systems"></a>過時的應用程式和作業系統  
*「 您不能期望六歲作業系統，以防止您六個月舊攻擊 」。* 資訊安全性專業人員有 10 年的經驗保護企業安裝  
  
雖然 「 取得目前、 最新版本 」 聽起來行銷片語、 過期的作業系統和應用程式的風險則會在許多組織中建立可能的 IT 基礎結構。 於 2003 年發行的作業系統可能仍廠商支援並提供用於解決弱點的更新，但作業系統可能不會包含在較新版本的作業系統中新增的安全性功能。 過期的系統甚至可以要求的特定 AD DS 安全性組態，以支援這些電腦的較低功能減弱。  
  
若要使用舊版驗證通訊協定通常不會再支援應用程式的廠商所撰寫的應用程式無法改裝以支援更強的驗證機制。 不過，組織的 Active Directory 網域可能仍會儲存 LAN Manager 雜湊或可反轉加密的密碼，以支援這類應用程式設定。 較新的作業系統引進之前撰寫的應用程式可能無法運作或所有目前在作業系統上，要求組織對於維護舊版與較舊的系統，以及在某些情況下，完全不支援的硬體和軟體。  
  
即使在所在的組織有 Windows Server 2012、 Windows Server 2008 R2 或 Windows Server 2008 更新其網域控制站的情況下，通常會尋找成員的重要部分是執行 Windows Server 2003，Windows server 母體擴展2000 server 或 Windows NT Server 4.0 （也就是完全不支援）。 時間越久組織會維護過時系統、 功能集之間差異的成長越多，並就越有可能會變得生產系統將會不受支援。 此外，再在維護 Active Directory 樹系、 多我們觀察到舊有系統和應用程式會在升級計畫中遺失。 這可能表示執行單一應用程式的單一電腦可能造成整個網域或樹系的弱點，因為 Active Directory 已設定為支援它的舊版通訊協定和驗證機制。  
  
若要排除傳統系統和應用程式，您應該先專注在識別和分類，然後在決定是否要升級或取代主應用程式的應用程式。 雖然它可能難以找人頂替高度特殊化的中，沒有支援或的升級路徑的應用程式，您可以利用稱為 「 creative 解構 」 的概念來取代新的應用程式的舊版應用程式提供必要的功能。 [規劃危害](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Planning-for-Compromise.md)本文稍後深入 「 規劃的折衷型 」 中所述。  
  
### <a name="misconfiguration"></a>設定不正確  
*法律編號四個：它不會執行得清楚，永遠不會開始保護的電腦上安裝安全性修正程式。* - [10 不變法則安全性管理](https://technet.microsoft.com/library/cc722488.aspx)  
  
即使在環境中，系統通常保留目前和修補，我們通常識別間距或作業系統中的錯誤設定電腦和 Active Directory 上執行的應用程式。 某些錯誤設定公開 （expose） 只在本機電腦來危害，但電腦 「 擁有之後，「 攻擊者通常著重進一步傳播遭到入侵，在其他系統中，最後到 Active Directory。 以下是一些常見的領域，我們找出造成風險的設定。  
  
#### <a name="in-active-directory"></a>在 Active Directory 中  
Active Directory 中帳戶，顯示最常目標的攻擊者就是成員的最高特殊權限的群組，例如網域系統管理員 (DA)、 Enterprise Admins (EA) 或在作用中的內建系統管理員 (BA) 群組的成員目錄。 這些群組的成員資格應該降低為帳戶可能最小數目，使這些群組的受攻擊面有限。 甚至可以排除這些特殊權限的群組; 中的 「 永久 」 成員資格也就是您可以實作可讓您暫時填入這些群組，只需要其整個網域和樹系的權限時，才設定。 當使用高特殊權限的帳戶時，它們應該只在指定的安全系統，例如網域控制站或安全的系統管理主機上使用。 中提供來協助實作所有這些設定的詳細的資訊[減少 Active Directory 的攻擊面](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md)。  
  
當我們評估 Active Directory 中的最高特殊權限群組的成員資格時，我們通常會尋找過多的成員資格中的最小權限群組的三個。 在某些情況下，組織會有數十個、 甚至數百個資料群組中的帳戶。 在其他情況下，組織放置於帳戶直接內建的 Administrators 群組，思考的群組 「 較不大於 DAs 群組的權限 」。 不存在。 我們通常會發現在樹系根網域中，儘管，EA 所需權限很少並暫時的少數幾個 EA 群組永久成員。 尋找所有的三個群組中的 IT 使用者的日常系統管理帳戶也很常見，即使這是有效的冗餘的組態。 中所述[減少 Active Directory 的攻擊面](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md)、 帳戶是否為其中一個群組或所有人，都的永久成員的帳戶可以用來入侵，並甚至摧毀 AD DS 環境和系統和由其所管理的帳戶。 中提供的安全性設定和使用 Active Directory 中的特殊權限帳戶的建議[減少 Active Directory 的攻擊面](../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/../../../ad-ds/plan/security-best-practices/Reducing-the-Active-Directory-Attack-Surface.md)。  
  
#### <a name="on-domain-controllers"></a>網域控制站上  
當我們評估網域控制站，我們發現通常找到這些設定和管理方式與成員伺服器沒有不同。 網域控制站有時會執行相同的應用程式和公用程式安裝在成員伺服器上，不是因為在網域控制站上需要的時候，但是因為應用程式的標準組建的一部分。 這些應用程式可能會在網域控制站上提供最少的功能，但藉由要求開啟連接埠、 建立高特殊權限的服務帳戶，或授與存取權的使用者系統的組態設定大幅增加攻擊者不應連接網域控制站驗證 」 和 「 群組原則應用程式外的其他目的。 在某些入侵，攻擊者已使用不只取得存取權的網域控制站，但若要修改或破壞 AD DS 資料庫的網域控制站已安裝的工具。  
  
當我們擷取網域控制站上的 Internet Explorer 組態設定時，我們發現使用者已經登入，且有高水準的 Active Directory 中的權限，而且用來存取網際網路和內部網路與網域帳戶的帳戶控制站。 在某些情況下，帳戶已設定要允許的網際網路下載內容，網域控制站上的 Internet Explorer 設定，並免費軟體公用程式已從網際網路網站下載並安裝在網域控制站。 根據預設，使用者和系統管理員啟用 Internet Explorer 增強式安全性設定，但我們常發現也就是已停用系統管理員。 當高特殊權限的帳戶能夠存取網際網路，並下載到任何電腦的內容時，該電腦將會有嚴重的風險。 如果電腦是網域控制站，會將整個 AD DS 安裝面臨風險。  
  
##### <a name="protecting-domain-controllers"></a>保護網域控制站  
網域控制站應該視為重要的基礎結構元件，更嚴格的保護和更嚴格比檔案、 列印及應用程式伺服器設定。 網域控制站不應該執行的函式將網域控制站不需要或不會保護攻擊的網域控制站的任何軟體。 網域控制站不應該允許存取網際網路，並應設定和強制執行群組原則物件 (Gpo) 的安全性設定。 提供安全的安裝、 設定及管理的網域控制站的詳細的建議[保護網域控制站針對攻擊](../../../ad-ds/plan/security-best-practices/Securing-Domain-Controllers-Against-Attack.md)。  
  
#### <a name="within-the-operating-system"></a>在作業系統內  
*法律二：倘若不肖份子能夠改變您的電腦上的作業系統，不您電腦就淪陷了。* - [十大不變法則安全性 （2.0 版）](https://technet.microsoft.com/security/hh278941.aspx)  
  
雖然某些組織會建立伺服器的不同類型的基準組態，並允許有限的自訂的作業系統，在安裝之後，分析遭洩露的環境通常能夠抓出大量的部署中的伺服器臨機操作的方式，並設定以手動方式，以及獨立。 伺服器會安全地設定，可能是完全不同，執行相同的函式的兩部伺服器之間的組態。 伺服器組態基準相反地，可能會以一致的方式強制執行，但也以一致的方式設定不正確;也就是伺服器的設定以建立相同的弱點可能會指定類型的所有伺服器的方式。 設定錯誤包括作法，例如停用的安全性功能、 授與過多的權限和權限給帳戶 （特別是服務帳戶），跨系統，以及允許安裝使用的相同本機認證未經授權的應用程式和公用程式建立其本身的弱點。  
  
##### <a name="disabling-security-features"></a>停用的安全性功能  
組織有時候停用超出一個信念 WFAS 很難設定，或需要大量的工作設定的 Windows 防火牆與進階的安全性 (WFAS)。 不過，Windows 伺服器從 2008年開始，當伺服器上已安裝任何角色或功能，會設定預設的角色或功能的運作，所需的最低權限，而 Windows 防火牆會自動設定為支援的角色或功能。 藉由停用 WFAS （和不使用另一個主機型防火牆，在其位置中），組織會增加整個 Windows 環境的受攻擊面。 周邊防火牆提供保護，以免遭受直接以來自網際網路的環境為目標的攻擊，但它們能提供任何保護來抵禦攻擊，例如利用其他攻擊誘因[偷渡式下載](https://www.microsoft.com/security/sir/glossary/drive-by-download-sites.aspx)密碼編譯攻擊或來自內部網路上其他遭入侵系統的攻擊。  
  
使用者帳戶控制 (UAC) 設定伺服器上有時候停用，因為具侵入性的系統管理人員到提示。 雖然[Microsoft 支援服務文章 2526083](https://support.microsoft.com/kb/2526083)說明的案例中可能會停用 UAC 在 Windows Server，除非您執行 server core 安裝中 （其中停用 UAC 的設計），您應該在伺服器上不停用 UAC未仔細考量及參考資料。  
  
在其他情況下，伺服器設定會設定成較不安全的值因為組織會將過時的伺服器組態設定套用到新的作業系統，例如將 Windows Server 2003 基準套用到執行 Windows Server 2012，Windows 的電腦Server 2008 R2 或 Windows Server 2008，而不需要變更以反映在作業系統中的變更的基準。 而不是部署新作業系統時，請執行新的作業系統，舊的伺服器基準，請檢閱安全性變更和組態設定，以確定實作的設定皆適用且適用於新的作業系統。  
  
##### <a name="granting-excessive-privilege"></a>授與過多的權限  
在幾乎每個環境中，我們評估，過多的權限會授與在 Windows 系統上的本機和網域帳戶。 在他們的工作站執行設有超過所需函式，權限的服務的成員伺服器上的本機系統管理員權限授與使用者和跨伺服器填入的本機系統管理員群組包含數十個或甚至數百個本機和網域帳戶。 遭到入侵的電腦上只能有一個特殊權限的帳戶可讓攻擊者入侵的每個使用者和電腦，並傳播到其他系統遭到入侵的 harvest 並利用認證登入的服務帳戶。  
  
雖然傳遞-雜湊 (PTH) 和其他認證竊取攻擊現在很常見，這是因為免費提供的工具，可簡化並輕鬆地擷取其他特殊權限的帳戶時，攻擊者的認證已獲得系統管理-或系統層級存取的電腦。 即使沒有可用的工具，可讓您收集的認證登入工作階段，特殊權限存取的電腦的攻擊者可以輕鬆地安裝擷取的按鍵動作、 螢幕擷取畫面和剪貼簿內容的按鍵輸入記錄器。 攻擊者具有特殊權限存取的電腦可以停用反惡意程式碼軟體、 安裝 rootkit、 修改受保護的檔案，或自動執行攻擊，或開啟至伺服器的電腦上安裝惡意程式碼[偷渡式下載](https://www.microsoft.com/security/sir/glossary/drive-by-download-sites.aspx)主應用程式。  
  
用來擴充超過單一電腦缺口策略不盡相同，但要傳播洩露的索引鍵取得高特殊權限存取其他系統的作業。 藉由減少具有特權存取權的帳戶數目的任何系統，您可以減少受攻擊面，不僅是該電腦，但攻擊者蒐集重要的認證，從電腦的可能性。  
  
##### <a name="standardizing-local-administrator-credentials"></a>標準化的本機系統管理員認證  
有長久以來使安全性專家的爭論是否沒有值，在 Windows 電腦上的本機系統管理員帳戶重新命名。 有關本機系統管理員帳戶是重要的是是否設定具有相同的使用者名稱和密碼在多部電腦。  
  
如果在名稱跨伺服器的本機系統管理員帳戶為相同的值指派給該帳戶的密碼也會設定為相同的值，攻擊者可以擷取的系統管理員或系統層級的存取權的一部電腦上的帳戶的認證已取得。 攻擊者不必一開始會危害的系統管理員帳戶;它們只需要危害是設定為以 localsystem 的身分或系統管理員權限執行的服務帳戶或本機 Administrators 群組的成員之使用者的帳戶。 攻擊者可以擷取系統管理員帳戶的認證，並重新執行這些認證在網路上其他電腦的網路登入。  
  
只要另一部電腦具有相同的使用者名稱和密碼 （或密碼雜湊） 為所顯示的帳戶認證的本機帳戶，登入嘗試成功，而且攻擊者取得特殊權限給目標電腦的存取。 內建的 Administrator 帳戶是在目前版本的 Windows 中，[依預設停用](https://technet.microsoft.com/library/cc753450.aspx)，但在舊版的作業系統，此帳戶預設為啟用。  
  
> [!NOTE]  
> 某些組織中已刻意設定在信念，這會提供 「 保全 」，如果所有特殊權限的帳戶遭到鎖定而無法在系統中啟用的本機系統管理員帳戶。 不過，即使已停用本機系統管理員帳戶，而且已沒有其他可用的帳戶，可讓帳戶或登入系統管理員權限系統，系統可以開機進入安全模式和內建的本機系統管理員帳戶可以重新啟用，如中所述[Microsoft 支援服務文章 814777](https://support.microsoft.com/kb/814777)。 此外，如果系統仍然會成功套用 Gpo，您可以修改的 GPO （暫時） 重新啟用系統管理員帳戶，或受限群組可以設定為網域帳戶加入本機 Administrators 群組。 可以執行修復，以及系統管理員帳戶再停用。 本機系統管理員帳戶必須設定唯一的使用者名稱和密碼來有效地防止橫向的危害，會使用內建的本機系統管理員帳戶認證。 若要部署透過 GPO 的本機系統管理員帳戶的唯一密碼，請參閱[的內建系統管理員帳戶的密碼，透過 GPO 的管理解決方案](https://technet.microsoft.com/mt227395.aspx)technet 上。  
  
##### <a name="permitting-installation-of-unauthorized-applications"></a>允許安裝未經授權的應用程式  
*法律第一：倘若不肖份子能夠說服您在電腦上執行他的程式，它不只是您的電腦就淪陷了。* - [十大不變法則安全性 （2.0 版）](https://technet.microsoft.com/security/hh278941.aspx)  
  
組織會在伺服器之間部署一致的基準設定，是否應該不允許不是伺服器的定義角色的一部分的應用程式的安裝。 允許安裝軟體，不是伺服器的指定功能的一部分，伺服器暴露在不小心或惡意軟體會增加伺服器的攻擊面、 介紹應用程式弱點或造成安裝系統不穩定。  
  
#### <a name="applications"></a>應用程式  
如先前所述，應用程式通常會安裝和設定為使用帳戶需要比應用程式所需的權限授與。 在某些情況下，應用程式的文件會指定服務帳戶必須是伺服器的本機 Administrators 群組的成員，或必須設為 LocalSystem 內容中執行。 這通常是因為應用程式需要這些權限，但應用程式的服務帳戶必須判斷哪些權限和權限，因為需要投資額外的時間和精力。 如果應用程式不會安裝應用程式和其已設定的功能運作所需的最低權限，系統會利用應用程式權限，而不需要作業系統本身的任何攻擊的攻擊。  
  
### <a name="lack-of-secure-application-development-practices"></a>缺少的安全的應用程式開發做法  
基礎結構存在以支援商務工作負載。 在這些工作負載會自訂應用程式中實作時，務必確定開發應用程式使用安全的最佳作法。 全企業事件的根本原因分析通常會顯示初始的危害會受到影響，透過自訂應用程式特別是那些是網際網路對向。 透過入侵已知的攻擊，例如 SQL 插入式攻擊 (SQLi) 來完成大部分的洩露和跨網站指令碼 (XSS) 攻擊。  
  
SQL 插入式攻擊是允許使用者定義的輸入來修改執行傳遞至資料庫的 SQL 陳述式的應用程式弱點。 透過應用程式、 參數 （例如查詢字串或 cookie） 或其他方法中的欄位，可以提供這項輸入。 此資料隱碼攻擊的結果是何種開發人員所樂與本質上不同資料庫的 SQL 陳述式。 比方說，採取使用者名稱/密碼組合評估中使用的常見查詢：  
  
`SELECT userID FROM users WHERE username = 'sUserName' AND password = 'sPassword'`  
  
收到此資料庫伺服器時，它會指示伺服器 users 資料表中查閱並傳回所提供的使用者 （可能是透過某種形式的登入表單） 其中相符的使用者名稱和密碼的使用者識別碼的任何記錄。 自然的目的開發人員在此情況下是只傳回有效的記錄，如果可以由使用者提供正確的使用者名稱和密碼。 如果是不正確，則資料庫伺服器將無法以尋找相符的記錄並傳回空的結果。  
  
當攻擊者發生未預期例如提供自己的 SQL 來取代有效的資料，就會發生此問題。 由於 SQL 是解譯在即時資料庫伺服器，如同開發人員必須將它放在自己會處理插入的程式碼。 比方說，如果攻擊者輸入**系統管理員**使用者識別碼和**xyz**或是**1 = 1**做為密碼，會處理資料庫所產生的陳述式：  
  
`SELECT userID FROM users WHERE username = 'administrator' AND password = 'xyz' OR 1=1`  
  
當資料庫伺服器所處理此查詢時，資料表中的所有資料列會傳回查詢中因為 1 = 1 會一律會評估為 True，因此如果已知或提供正確的使用者名稱和密碼並不重要。 在大部分情況下的最後結果就是使用者會登入，為第一個資料庫中之使用者的使用者;在大部分情況下，這會是系統管理使用者。  
  
除了直接登入，格式不正確的 SQL 陳述式例如這可用來新增，請刪除或變更資料，或甚至是從資料庫卸除 （刪除） 的整個資料表。 在最極端的情況下 SQLi 其中結合過度的權限時，作業系統命令可以執行以便建立新的使用者，若要下載攻擊工具，或採取攻擊者選擇的任何其他動作。  
  
跨網站指令碼中的弱點可能會引進應用程式的輸出中。 攻擊開頭為攻擊者提供格式不正確的資料，應用程式，但在此情況下的格式不正確的資料 （例如 JavaScript) 指令碼將受害者的瀏覽器所執行的程式碼的表單。 XSS 的安全性弱點的惡意探索可以讓攻擊者的使用者內容中執行的目標應用程式的任何函式啟動瀏覽器。 XSS 攻擊通常會鼓勵使用者按一下連結，連線到應用程式並執行攻擊程式碼的網路釣魚電子郵件所起始。  
  
XSS 通常會在線上銀行和攻擊者可以在其中進行購買或傳輸金錢被入侵的使用者內容中的電子商務案例中應用。 在自訂的 web 型身分識別管理應用程式的目標攻擊，它可以讓攻擊者建立自己的身分識別、 修改權限和權限，以及會造成系統的入侵。  
  
雖然跨網站指令碼和 SQL 資料隱碼的完整討論已超出本文的範圍[Open Web Application Security Project (OWASP)](https://www.owasp.org/index.php/Main_Page)發行的弱點的深入討論的前 10 個清單與因應對策。  
  
不論安全性基礎結構的投資，如果效能不佳的設計和撰寫應用程式部署在該基礎結構，環境會很容易遭受攻擊。 更完善的保護基礎結構通常無法提供有效的因應對策，這些應用程式的攻擊。 複合問題、 設計不良的應用程式可能需要服務帳戶，授與過多的權限，應用程式才能運作。  
  
Microsoft 安全性開發生命週期 (SDL) 是一組結構化的程序控制項運作以提升安全性從初期需求彙集及擴充整個應用程式的生命週期，直到已解除任務。 這項整合有效的安全性控制項的不只重大安全性的觀點而言，請務必確保應用程式安全性是成本，並排程生效。 評估應用程式的安全性問題，它實際上是程式碼完成時需要做出有關應用程式安全性或只有之前已部署應用程式時，即使組織。 組織可以選擇部署應用程式在生產環境中，不會產生成本和延遲，解決應用程式缺陷或應用程式可以使用已知的安全性缺陷，讓組織暴露於危害生產環境中部署。  
  
某些組織在上述每個問題的 10,000 美元的生產環境程式碼修正安全性問題的完整成本，並沒有有效的 SDL 開發的應用程式可以平均超過 10 個高嚴重性的問題，每 100,000 行程式碼。 在大型應用程式，成本會快速擴大。 相較之下，許多公司在最後的程式碼檢閱的階段 SDL，設定每 100,000 行程式碼的時間未滿一個問題的基準測試，並針對在生產環境中的高風險應用程式中的零個問題。  
  
包含安全性需求，需求收集在初期實作 SDL 可改善安全性和應用程式的設計可提供威脅分析模型的高風險的應用程式;需要有效的訓練和監視的開發人員;且清楚、 需要一致的程式碼的標準與作法。 SDL 的淨效應是應用程式安全性的重大改進，同時降低開發、 部署、 維護和解除委任應用程式的成本。 雖然詳細的討論設計和實作 SDL 超出本文的範圍，請參閱[Microsoft Security Development Lifecycle](https://www.microsoft.com/security/sdl/default.aspx)如需詳細的指引和資訊。  
  


