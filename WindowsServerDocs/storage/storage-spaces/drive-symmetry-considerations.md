---
title: 磁碟機儲存空間直接存取的倍數的考量
ms.author: cosdar
ms.manager: eldenc
ms.technology: storage-spaces
ms.topic: article
author: cosmosdarwin
ms.date: 10/08/2018
Keywords: Storage Spaces Direct
ms.localizationpriority: medium
ms.openlocfilehash: 629e49a0c1919286d8e4f418b3e99d69e720f4fd
ms.sourcegitcommit: f2ef58003da6de049c7c4b578f789a97e0a0f512
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 10/26/2018
ms.locfileid: "5591844"
---
# 磁碟機儲存空間直接存取的倍數的考量 

> 適用於： Windows Server 2019、 Windows Server 2016

[儲存空間直接存取](storage-spaces-direct-overview.md)最適合當每個伺服器有完全相同的磁碟機。

事實上，我們發現這並非永遠可行： 儲存空間直接存取設計來執行年和縮放比例拓展您的組織的需求。 時至今日，您可以購買寬廣 3 TB 磁碟機;下一年，它可能會變成無法尋找應用程式太小。 因此，支援的混合和比一些量。

本主題說明限制式，並提供支援和不支援的設定的範例。

## 限制式

### 類型

所有伺服器都應該都有相同[的磁碟機類型](choosing-drives.md#drive-types)。

例如，如果一個伺服器有 NVMe，它們應該*所有*有 NVMe。

### 數字

所有伺服器都應該都有相同數量的每個類型的磁碟機。

例如，如果一個伺服器有六個 SSD，它們應該*所有*有六個 SSD。

   > [!NOTE]
   > 它沒有關係的不同暫時期間失敗或新增或移除磁碟機的磁碟機數目。

### 型號

我們建議使用相同的模型和可行的韌體版本的磁碟機。 如果您不能請務必小心選取儘可能類似的磁碟機。 我們不建議混合和比驟然不同的效能或耐力特性的相同類型的磁碟機 （除非一個快取，另一個是容量） 因為儲存空間直接存取的平均分散 IO，以便不會區分根據模型.

   > [!NOTE]
   > 它沒有關係來混合和比對類似 SATA 和 SAS 磁碟機。

### 大小

我們建議使用相同的大小儘可能的磁碟機。 使用不同大小的容量磁碟機，可能會導致某些不穩定的容量，並使用不同大小的快取磁碟機可能不會改善快取的效能。 請參閱下一節，如需詳細資訊。

   > [!WARNING]
   > 在伺服器間的不同容量磁碟機大小可能會導致出現不合適的容量。

## 了解： 容量不平衡

儲存空間直接存取是健全，容量不平衡跨磁碟機和跨伺服器。 即使不平衡嚴重，所有項目將會繼續運作。 不過，取決於數個因素，每個伺服器中未提供的容量可能無法使用。

若要查看為什麼發生這種情況，請考慮以下簡化的圖例。 每個彩色的方塊代表鏡像的資料複本。 例如，方塊 \ 對標示為 A、 A'，和 ' 是三個複本的相同的資料。 若要接受伺服器容錯功能，這些複本，*必須*儲存在不同的伺服器。

### 出現不合適的容量

繪製，伺服器 1 (10 TB) 和伺服器 2 (10 TB) 是完整。 伺服器 3 有較大的磁碟機，因此其總容量較大 (15 TB)。 不過，若要更多的三向鏡像資料儲存在伺服器 3 上需要伺服器 1 和 2 伺服器上的複本太，已完整。 無法使用伺服器 3 上剩餘的 5 個 TB 容量 – *」 困 」* 的容量。

![三向鏡像，三部伺服器，困容量](media/drive-symmetry-considerations/Size-Asymmetry-3N-Stranded.png)

### 最佳的位置

相反地，使用四部伺服器 10 TB、 10 TB、 10 TB，及 15 TB 容量和三向鏡像復原類型，它** 能夠有效地複本放置在使用所有可用容量，做為繪製的方式。 這可能是，每當儲存空間直接存取的配置將會尋找，並使用最佳的位置，離開沒有出現不合適的容量。

![三向鏡像，四部伺服器，沒有出現不合適的容量](media/drive-symmetry-considerations/Size-Asymmetry-4N-No-Stranded.png)

數目伺服器、 復原功能、 容量不平衡和其他因素的嚴重性會影響是否出現不合適的容量。 **最為謹慎起見一般規則是假設每個伺服器中提供的唯一容量保證可以使用。**

## 了解： 快取不平衡

儲存空間直接存取是要快取不平衡健全跨磁碟機和跨伺服器。 即使不平衡嚴重，所有項目將會繼續運作。 此外，儲存空間直接存取一律使用又所有可用的快取。

不過，使用不同大小的快取磁碟機可能會不改善快取效能統一或如預期般再： 僅使用較大的快取磁碟機的[磁碟機繫結](understand-the-cache.md#server-side-architecture)到 IO 可能會看到改善的效能。 儲存空間直接存取 IO 平均分散繫結並不會以便區分根據快取的容量比例。

![快取不平衡](media/drive-symmetry-considerations/Cache-Asymmetry.png)

   > [!TIP]
   > 若要深入了解快取的繫結的[了解快取](understand-the-cache.md)，請參閱。

## 設定範例

以下是一些支援及不支援的組態：

### ![支援](media/drive-symmetry-considerations/supported.png) 支援： 伺服器之間的不同模型

前兩個伺服器使用 NVMe 模型 「 X 」，但第三個伺服器使用 NVMe 模型的 「 Z 」，也就是非常類似。

| 伺服器 1                    | 伺服器 2                    | 伺服器 3                    |
|-----------------------------|-----------------------------|-----------------------------|
| 2 NVMe 模型 X x （快取）    | 2 NVMe 模型 X x （快取）    | 2 NVMe 模型 Z x （快取）    |
| 10 x SSD 模型 Y （容量） | 10 x SSD 模型 Y （容量） | 10 x SSD 模型 Y （容量） |

支援此設定。

### ![支援](media/drive-symmetry-considerations/supported.png) 支援： 伺服器內的不同模型

每個伺服器使用一些不同的混合的 HDD 模型 」 Y 」 和 「 Z 」，非常類似。 每個伺服器都有 10 個總 HDD。

| 伺服器 1                   | 伺服器 2                   | 伺服器 3                   |
|----------------------------|----------------------------|----------------------------|
| 2 SSD 模型 X x （快取）    | 2 SSD 模型 X x （快取）    | 2 SSD 模型 X x （快取）    |
| 7 x HDD 模型 Y （容量） | 5 x HDD 模型 Y （容量） | 1 x HDD 模型 Y （容量） |
| 3 x HDD 模型 Z （容量） | 5 x HDD 模型 Z （容量） | 9 x HDD 模型 Z （容量） |

支援此設定。

### ![支援](media/drive-symmetry-considerations/supported.png) 支援： 在伺服器間的不同大小

前兩個伺服器使用至少 4 TB HDD，但在第三個伺服器使用非常類似 6 TB HDD。

| 伺服器 1                | 伺服器 2                | 伺服器 3                |
|-------------------------|-------------------------|-------------------------|
| 2 x 800 GB NVMe （快取） | 2 x 800 GB NVMe （快取） | 2 x 800 GB NVMe （快取） |
| 4 x 4 TB HDD （容量） | 4 x 4 TB HDD （容量） | 4 x 6 TB HDD （容量） |

支援此設定，雖然它會導致出現不合適的容量。

### ![支援](media/drive-symmetry-considerations/supported.png) 支援： 伺服器內的不同大小

每個伺服器使用 1.2 TB 與 1.6 TB 的非常類似 SSD 的一些不同混合。 每個伺服器有 4 個總 SSD。

| 伺服器 1                 | 伺服器 2                 | 伺服器 3                 |
|--------------------------|--------------------------|--------------------------|
| 3 x 1.2 TB SSD （快取）   | 2 x 1.2 TB SSD （快取）   | 4 x 1.2 TB SSD （快取）   |
| 1 x 1.6 TB SSD （快取）   | 2 x 1.6 TB SSD （快取）   | -                        |
| 20 x 4 TB HDD （容量） | 20 x 4 TB HDD （容量） | 20 x 4 TB HDD （容量） |

支援此設定。

### ![不支援](media/drive-symmetry-considerations/unsupported.png) 不支援： 不同類型的跨伺服器的磁碟機

1 的伺服器有 NVMe，但其他不。

| 伺服器 1            | 伺服器 2            | 伺服器 3            |
|---------------------|---------------------|---------------------|
| 6 x NVMe （快取）    | -                   | -                   |
| -                   | 6 x SSD （快取）     | 6 x SSD （快取）     |
| 18 x HDD （容量） | 18 x HDD （容量） | 18 x HDD （容量） |

這不受支援。 類型的磁碟機應該是每個伺服器中的相同。

### ![不支援](media/drive-symmetry-considerations/unsupported.png) 不支援： 在伺服器間的每一種類型的不同數目

伺服器 3 有比其他更多的磁碟機。

| 伺服器 1            | 伺服器 2            | 伺服器 3            |
|---------------------|---------------------|---------------------|
| 2 x NVMe （快取）    | 2 x NVMe （快取）    | 4 x NVMe （快取）    |
| 10 x HDD （容量） | 10 x HDD （容量） | 20 x HDD （容量） |

這不受支援。 每個類型的磁碟機數目應該是每個伺服器中的相同。

### ![不支援](media/drive-symmetry-considerations/unsupported.png) 不支援： 只有 HDD 磁碟機

所有伺服器都必須僅連接的 HDD 磁碟機。

|伺服器 1|伺服器 2|伺服器 3|
|-|-|-| 
|18 x HDD （容量） |18 x HDD （容量）|18 x HDD （容量）|

這不受支援。 您需要新增兩個快取磁碟機 （NvME 或 SSD） 連接到每個伺服器的最小值。

## 摘要

若要翻新，叢集中的每個伺服器應該有相同的磁碟機類型和相同數量的每個類型。 它支援來混合和比對磁碟機模型和磁碟機大小，如有需要使用上述的考量。

| 限制式                               |               |
|------------------------------------------|---------------|
| 相同類型的每個伺服器中的磁碟機     | **必要**  |
| 相同數量的每個伺服器中的每個類型 | **必要**  |
| 每個伺服器中的相同磁碟機模型        | 建議執行   |
| 在每個伺服器中的相同磁碟機大小         | 建議執行   |

## 請參閱

- [儲存空間直接存取的硬體需求](storage-spaces-direct-hardware-requirements.md)
- [儲存空間直接存取概觀](storage-spaces-direct-overview.md)
