---
title: set
description: Set 的參考文章，可顯示、設定或移除 cmd.exe 的環境變數。
ms.topic: reference
ms.assetid: 5fdd60d6-addf-4574-8c92-8aa53fa73d76
ms.author: lizross
author: eross-msft
manager: mtillman
ms.date: 10/16/2017
ms.openlocfilehash: 70ce8bf85bbafc68e4ffe09170d9e21738315560
ms.sourcegitcommit: db2d46842c68813d043738d6523f13d8454fc972
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/10/2020
ms.locfileid: "89639484"
---
# <a name="set"></a>set

顯示、設定或移除 cmd.exe 的環境變數。 如果使用時不含參數，則 **設定** 會顯示目前的環境變數設定。

## <a name="syntax"></a>語法

```
set [<Variable>=[<String>]]
set [/p] <Variable>=[<PromptString>]
set /a <Variable>=<Expression>
```

### <a name="parameters"></a>參數

|參數|描述|
|---------|-----------|
|\<Variable>|指定要設定或修改的環境變數。|
|\<String>|指定要與指定的環境變數相關聯的字串。|
|/p|將 *變數* 的值設定為使用者所輸入的輸入行。|
|\<PromptString>|選擇性。 指定提示使用者輸入的訊息。 此參數與 **/p** 命令列選項搭配使用。|
|/a|將 *字串* 設定為要評估的數值運算式。|
|\<Expression>|指定數值運算式。 如需可在 *運算式*中使用的有效運算子，請參閱備註。|
|/?|在命令提示字元顯示說明。|

## <a name="remarks"></a>備註

- 使用 **set** 搭配已啟用的命令延伸模組

  當 (預設) 啟用命令延伸模組時，它會 **顯示以該值** 開頭的所有變數。
- 使用特殊字元

  字元 **<** 、 **>** 、、 **|** **&** **^** 是特殊的命令 shell 字元，而且前面必須加上 escape 字元 (**^**) 或在 *字串* (中使用引號括住，例如， **StringContaining&符號**) 。 如果您使用引號來括住包含特殊字元的字串，則引號會被視為環境變數值的一部分。
- 使用環境變數

  您可以使用環境變數來控制某些批次檔和程式的行為，並控制 Windows 和 MS-DOS 子系統的顯示方式和運作方式。 **Set**命令通常會在 Autoexec nt 檔案中用來設定環境變數。
- 顯示目前的環境設定

  當您單獨輸入 **set** 命令時，會顯示目前的環境設定。 這些設定通常包含 COMSPEC 和 PATH 環境變數，可用來協助尋找磁片上的程式。 Windows 所使用的兩個其他環境變數是 PROMPT 和 DIRCMD。
- 使用參數

  當您指定 *變數* 和 *字串*的值時，會將指定的 *變數* 值加入至環境，並將 *字串* 與該變數相關聯。 如果變數已經存在於環境中，新的字串值就會取代舊的字串值。

  如果您只指定**set**命令的變數和不含*字串*) 的等號 (，則會清除與變數相關聯的*字串*值 (如同變數不) 。
- 使用 **/a**

  下表列出以優先順序遞減順序支援的 **/a** 運算子。

  |        運算子         | 執行的作業  |
  |-------------------------|----------------------|
  |           ( )           |       群組       |
  |          ! ~ -          |        一元 (Unary)         |
  |         \* / %          |      算術      |
  |           + -           |      算術      |
  |          << >>          |    邏輯移位     |
  |            &            |     位元 AND      |
  |            ^            | 位元排除 OR |
  |                         |                      |
  | = \*=/=% = + =-= &= ^ = |      = <<= >>=       |
  |            ,            | 運算式分隔符號 |

  如果您使用邏輯 (**&&** 或 **||**) 或模數 (**%**) 運算子，請將運算式字串括在引號中。 運算式中的任何非數值字串都會被視為環境變數名稱，而它們的值會在處理之前轉換成數位。 如果您指定的環境變數名稱未在目前的環境中定義，則會分配零值，讓您可以執行具有環境變數值的算術，而不使用% 來取得值。

  如果您從命令列以外的命令列執行 **set/a** ，它會顯示運算式的最後一個值。

  數值是十進位數，除非在十六進位數位前面加上 0 x，否則八進位數位為0。 因此，0×12等同于18，與022相同。
- 支援延遲的環境變數展開

  延遲的環境變數擴充支援預設為停用，但您可以使用 **cmd/v**來啟用或停用它。
- 使用命令延伸模組

  當 (預設) 啟用命令延伸模組時，它會**set**顯示所有目前的環境變數。 如果您執行具有值的 **設定** ，則會顯示符合該值的變數。
- 在批次檔中使用**set**

  建立批次檔時，您可以使用 **set** 來建立變數，然後以使用編號變數 **%0** 到 **%9**的相同方式來使用它們。 您也可以使用變數 **%0** 到 **%9** 作為 **set**的輸入。
- 從批次檔呼叫 **設定** 變數

  當您從批次檔呼叫變數值時，請以百分比符號 () 括住值 **%** 。 例如，如果您的 batch 程式會建立名為波特的環境變數，您可以在命令提示字元中輸入 **% 波特%** ，以使用與波特相關聯的字串做為可取代的參數。
- 在修復主控台使用**set**

  您可以從修復主控台取得具有不同參數的 **set** 命令。

## <a name="examples"></a>範例

若要設定名為 TEST ^ 1 的環境變數，請輸入：
```
set testVar=test^^1
```

> [!NOTE]
> **Set**命令會將等號 (=) 之後的所有專案，指派給變數的值。 如果您輸入：
> ```
> set testVar=test^1
> ```
> 您會收到下列結果︰
> ```
> testVar=test^1
> ```
> 若要設定名為 TEST&1 的環境變數，請輸入：
> ```
> set testVar=test^&1
> ```
> 若要設定名為 INCLUDE 的環境變數，使 (C:\Inc 的字串與磁片磁碟機 C) 上的 \Inc 目錄相關聯，請輸入：
> ```
> set include=c:\inc
> ```
> 然後，您可以在批次檔中使用字串 C:\Inc，方法是將名稱括住，並以百分比符號 (**%**) 。 例如，您可以在批次檔中包含下列命令，以便顯示與 INCLUDE 環境變數相關聯之目錄的內容：
> ```
> dir %include%
> ```
> 處理此命令時，字串 C:\Inc 會取代 **% include%**。

您也可以在將新目錄新增至 PATH 環境變數的 batch 程式中使用 **set** 。 例如：
```
@echo off
rem ADDPATH.BAT adds a new directory
rem to the path environment variable.
set path=%1;%path%
set
```
若要顯示以字母 P 開頭之所有環境變數的清單，請輸入：
```
set p
```

> [!NOTE]
> 此命令需要預設啟用的命令延伸模組。

## <a name="additional-references"></a>其他參考資料

- [命令列語法關鍵](command-line-syntax-key.md)