---
title: doskey
description: Doskey 命令和 Doskey.exe 的參考文章，會重新叫用先前輸入的命令列命令、編輯命令行，以及建立宏。
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: 4874fd43-d5ea-45f3-ae24-388ae925ed76
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 4a92c9e1d6ffe1f8d7ace5500179697b2a00df1b
ms.sourcegitcommit: 2afed2461574a3f53f84fc9ec28d86df3b335685
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 07/02/2020
ms.locfileid: "85930548"
---
# <a name="doskey"></a>doskey

呼叫 Doskey.exe，這會重新叫用先前輸入的命令列命令、編輯命令行，以及建立宏。

## <a name="syntax"></a>語法

```
doskey [/reinstall] [/listsize=<size>] [/macros:[all | <exename>] [/history] [/insert | /overstrike] [/exename=<exename>] [/macrofile=<filename>] [<macroname>=[<text>]]
```

### <a name="parameters"></a>參數

| 參數 | 說明 |
| --------- | ----------- |
| /reinstall | 安裝 Doskey.exe 的新複本，並清除命令歷程記錄緩衝區。 |
| /listsize =`<size>` | 指定歷程記錄緩衝區中的命令數目上限。 |
| /macros | 顯示所有**doskey**宏的清單。 您可以搭配/macros 使用重新 `>` 導向符號（ **/macros** ），將清單重新導向至檔案。 您可以將 **/macros**縮寫為 **/m**。 |
| /macros：全部 | 顯示所有可執行檔的**doskey**宏。 |
| 宏`<exename>` | 顯示*exename*指定之可執行檔的**doskey**宏。 |
| /history | 顯示儲存在記憶體中的所有命令。 您可以搭配/history 使用重新 `>` 導向符號（ **/history** ），將清單重新導向至檔案。 您可以將 **/history**縮寫為 **/h**。 |
| /insert | 指定您輸入的新文字會以舊文字插入。 |
| /overstrike | 指定新文字覆寫舊文字。 |
| /exename =`<exename>` | 指定在其中執行**doskey**宏的程式（也就是可執行檔）。 |
| /macrofile =`<filename>` | 指定檔案，其中包含您想要安裝的宏。 |
| `<macroname>`=[`<text>`] | 建立宏，以執行*文字*所指定的命令。 *MacroName*指定您想要指派給宏的名稱。 *文字*指定您想要記錄的命令。 如果*文字*保留空白，則會清除任何已指派命令的*MacroName* 。 |
| /? | 在命令提示字元顯示說明。 |

#### <a name="remarks"></a>備註

- 某些以字元為基礎的互動式程式（例如程式偵錯工具或檔案傳輸程式（FTP））會自動使用 Doskey.exe。 若要使用 Doskey.exe，程式必須是主控台進程，並使用緩衝的輸入。 程式金鑰指派會覆寫**doskey**金鑰指派。 例如，如果程式使用函式的 F7 鍵，您就無法在快顯視窗中取得**doskey**命令歷程記錄。

- 您可以使用 Doskey.exe 來編輯目前的命令列，但不能從程式的命令提示字元使用命令列選項。 啟動程式之前，您必須先執行**doskey**命令列選項。 如果您在程式中使用 Doskey.exe，該程式的金鑰指派會有較高的優先順序，有些 Doskey.exe 編輯金鑰可能無法使用。

- 使用 Doskey.exe，您可以針對啟動或重複的每個程式維護命令歷程記錄。 您可以在程式的提示字元中編輯先前的命令，並啟動針對程式所建立的**doskey**宏。 如果您從相同的命令提示字元視窗結束並重新啟動程式，則可以使用先前程式會話中的命令歷程記錄。

- 若要重新叫用命令，您可以在啟動 Doskey.exe 之後，使用下列任何金鑰：

  | Key | 描述 |
  | --- | ----------- |
  | 向上鍵 | 重新叫用您在顯示的之前所使用的命令。 |
  | DOWN ARROW | 重新叫用您在顯示的命令之後所使用的命令。 |
  | PAGE UP | 重新叫用您在目前會話中使用的第一個命令。 |
  | PAGE DOWN | 重新叫用您在目前會話中使用的最新命令。 |

- 下表列出**doskey**編輯金鑰及其功能：

  | 按鍵或按鍵組合 | Description |
  | ---------------------- | ----------- |
  | 向左鍵 | 將插入點向後移動一個字元。 |
  | 向右鍵 | 將插入點向後移動一個字元。 |
  | CTRL+向左鍵 | 將插入點向後移動一個單字。 |
  | CTRL+向右鍵 | 將插入點向後移動一個單字。 |
  | HOME | 將插入點移至行的開頭。 |
  | END | 將插入點移到行尾。 |
  | ESC | 從顯示中清除命令。 |
  | F1 | 將一個字元從範本中的資料行複製到命令提示字元視窗中的相同資料行。 （範本是存放您所輸入之最後一個命令的記憶體緩衝區）。 |
  | F2 | 在範本中向前搜尋，以尋找您在按下 F2 之後輸入的下一個索引鍵。 Doskey.exe 會從範本中插入文字，最多（但不包括）您指定的字元。 |
  | F3 | 將範本的其餘部分複製到命令列。 Doskey.exe 會開始從範本中的位置複製字元，這個位置會對應到命令列上的插入點所指示的位置。 |
  | F4 | 刪除目前插入點位置中的所有字元，直到您按下 F4 之後，您輸入的字元之後，才會出現。 |
  | F5 | 將範本複製到目前的命令列。 |
  | F6 | 將檔案結尾字元（CTRL + Z）放在目前的插入點位置。 |
  | F7 | 顯示此程式儲存在記憶體中的所有命令（在對話方塊中）。 使用向上鍵和向下鍵來選取您想要的命令，然後按 ENTER 執行命令。 您也可以記下命令前面的連續數位，並將此數位與 F9 鍵搭配使用。 |
  | ALT+F7 | 刪除儲存在記憶體中的所有命令，以取得目前的歷程記錄緩衝區。 |
  | F8 | 顯示歷程記錄緩衝區中以目前命令中的字元開頭的所有命令。 |
  | F9 | 提示您輸入歷程記錄緩衝區命令編號，然後顯示與您指定的數位相關聯的命令。 按 ENTER 鍵以執行命令。 若要顯示所有數位及其相關聯的命令，請按 F7。 |
  | ALT+F10 | 刪除所有巨集定義。 |

- 如果您按下 INSERT 鍵，就可以在現有文字的過程中，于**doskey**命令列上輸入文字，而不會取代文字。 不過，按下 ENTER 鍵之後，Doskey.exe 會將您的鍵盤返回**取代**模式。 您必須再次按下 INSERT 以返回**插入**模式。

- 當您使用 INSERT 鍵從某個模式變更為另一個模式時，插入點會變更圖形。

- 如果您想要自訂 Doskey.exe 如何與程式搭配使用，以及如何建立該程式的**doskey**宏，您可以建立一個 batch 程式來修改 Doskey.exe 並啟動程式。

- 您可以使用 Doskey.exe 來建立可執行一或多個命令的宏。 下表列出當您定義宏時，可以用來控制命令作業的特殊字元。

  | 字元 | 描述 |
  |---------- | ----------- |
  | `$G` 或 `$g` | 重新導向輸出。 使用其中一個特殊字元，將輸出傳送至裝置或檔案，而不是畫面。 此字元相當於 output （）的重新導向符號 `>` 。 |
  | `$G$G` 或 `$g$g` | 將輸出附加至檔案結尾。 使用上述任一雙字元將輸出附加至現有的檔案，而不是取代檔案中的資料。 這些雙字元相當於 output （）的附加重新導向符號 `>>` 。 |
  | `$L` 或 `$l` | 重新導向輸入。 使用其中一個特殊字元，從裝置或檔案（而不是從鍵盤）讀取輸入。 此字元相當於輸入（）的重新導向符號 `<` 。 |
  | `$B` 或 `$b` | 將宏輸出傳送至命令。 這些特殊字元相當於使用管線 `(` 和 `*` 。 |
  | `$T` 或 `$t` | 分隔命令。 當您在**doskey**命令列上建立宏或輸入命令時，請使用下列其中一個特殊字元來分隔命令。 這些特殊字元相當於 `&` 在命令列上使用連字號（）。 |
  | `$$` | 指定貨幣符號字元（ `$` ）。 |
  | `$1`間`$9` | 表示您想要在執行宏時指定的任何命令列資訊。 中的特殊 `$1` 字元 `$9` 是批次參數，可讓您在每次執行宏時，于命令列上使用不同的資料。 `$1` **Doskey**命令中的字元類似于 `%1` batch 程式中的字元。 |
  | `$*` | 表示當您輸入宏名稱時，您想要指定的所有命令列資訊。 特殊字元 `$*` 是一個可取代的參數，其與批次參數 `$1` 的 `$9` 使用方式類似，但有一個重要的差異：您在命令列上輸入的所有專案，都是在宏名稱取代 `$*` 宏中的之後。 |

- 若要執行宏，請在命令提示字元中輸入宏名稱，從第一個位置開始。 如果宏是使用 `$*` 或任何批次參數所定義 `$1` `$9` ，請使用空格來分隔參數。 您無法從 batch 程式執行**doskey**宏。

- 如果您一律使用特定命令搭配特定命令列選項，您可以建立與命令同名的宏。 若要指定是否要執行宏或命令，請遵循下列指導方針：

  - 若要執行宏，請在命令提示字元中輸入宏名稱。 請不要在宏名稱前面加上空格。

  - 若要執行命令，請在命令提示字元中插入一或多個空格，然後輸入命令名稱。

### <a name="examples"></a>範例

**/Macros**和 **/history**命令列選項適用于建立批次程式來儲存宏和命令。 例如，若要儲存所有目前的**doskey**宏，請輸入：

```
doskey /macros > macinit
```

若要使用儲存在 Macinit 中的宏，請輸入：

```
doskey /macrofile=macinit
```

若要建立名為 Tmp.bat 的 batch 程式，其中包含最近使用的命令，請輸入：

```
doskey /history> tmp.bat
```

若要定義包含多個命令的宏，請使用 `$t` 來分隔命令，如下所示：

```
doskey tx=cd temp$tdir/w $*
```

在上述範例中，TX 宏會將目前的目錄變更為 Temp，然後以寬顯示格式顯示目錄清單。 `$*`當您執行 tx 選項時，可以在宏的結尾使用，將其他命令列選項附加至**dir** 。

下列宏會使用批次參數作為新的目錄名稱：

```
doskey mc=md $1$tcd $1
```

宏會建立新的目錄，然後從目前目錄變更為新的目錄。

若要使用上述宏來建立和變更名為「*書籍*」的目錄，請輸入：

```
mc books
```

若要為稱為*Ftp.exe*的程式建立**doskey**宏，請包含 **/exename** ，如下所示：

```
doskey /exename=ftp.exe go=open 172.27.1.100$tmget *.TXT c:\reports$tbye
```

若要使用上述宏，請啟動 FTP。 在 FTP 提示字元中，輸入：

```
go
```

FTP 會執行**open**、 **mget**和**再見**命令。

若要建立可快速且無條件地格式化磁片的宏，請輸入：

```
doskey qf=format $1 /q /u
```

若要以快速且無條件的方式格式化磁片磁碟機 A 中的磁片，請輸入：

```
qf a:
```

若要刪除名為*vlist*的宏，請輸入：

```
doskey vlist =
```

## <a name="additional-references"></a>其他參考資料

- [命令列語法關鍵](command-line-syntax-key.md)
