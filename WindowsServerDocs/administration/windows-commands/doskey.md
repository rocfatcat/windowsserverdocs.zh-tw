---
title: doskey
description: '適用於 Windows 命令主題 * * *- '
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 4874fd43-d5ea-45f3-ae24-388ae925ed76
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 61629a6122ec83cae35a8797966ef3d712ee5808
ms.sourcegitcommit: 0d0b32c8986ba7db9536e0b8648d4ddf9b03e452
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/17/2019
ms.locfileid: "59825859"
---
# <a name="doskey"></a>doskey



呼叫的 Doskey.exe （的重新叫用先前輸入命令列命令），編輯命令列中，並建立巨集。

如需如何使用此命令的範例，請參閱[範例](#BKMK_examples)。

## <a name="syntax"></a>語法

```
doskey [/reinstall] [/listsize=<Size>] [/macros:[all | <ExeName>] [/history] [/insert | /overstrike] [/exename=<ExeName>] [/macrofile=<FileName>] [<MacroName>=[<Text>]]
```

## <a name="parameters"></a>參數

|參數|描述|
|---------|-----------|
|/reinstall|安裝 Doskey.exe 的新複本，並清除命令歷程記錄緩衝區。|
|/listsize=\<Size>|歷程記錄緩衝區中指定命令的數目上限。|
|/macros|會顯示一份所有**doskey**巨集。 您可以使用重新導向符號 (**>**) 與 **/macros**重新導向至檔案的清單。 您可以將縮寫 **/macros**要 **/m**。|
|/macros:all|顯示**doskey**巨集的所有可執行檔。|
|/macros:\<ExeName >|顯示**doskey**巨集所指定之可執行檔*ExeName*。|
|/history|會顯示儲存在記憶體中的所有命令。 您可以使用重新導向符號 (**>**) 與 **/history**重新導向至檔案的清單。 您可以將縮寫 **/history**作為 **/h**。|
|[/insert | /overstrike]|指定是否要插入或覆寫的文字，當您輸入。 如果您使用 **/插入**，新行輸入的文字會插入現有的文字進行時。 如果您使用 **/overstrike**、 新的文字取代現有的文字。 預設值是 **/overstrike**。|
|/exename=\<ExeName>|指定的程式 (也就是可執行檔) 所在**doskey**執行巨集。|
|/macrofile=\<FileName>|指定包含您想要安裝的巨集的檔案。|
|\<MacroName>=[<Text>]|建立所指定的命令會執行巨集*文字*。 *MacroName*指定您想要指派給巨集的名稱。 *文字*指定您想要記錄的命令。 如果*文字*保留空白， *MacroName*清除的任何指派的命令。|
|/?|在命令提示字元顯示說明。|

## <a name="remarks"></a>備註

-   使用 Doskey.exe

    Doskey.exe 一律適用於所有以字元為基礎的互動式程式 （例如程式偵錯工具或檔案傳輸程式），而且它會維持命令歷程記錄緩衝區和巨集啟動每一個程式。 您無法使用**doskey**從程式的命令列選項。 您必須執行**doskey**之前啟動程式的命令列選項。 覆寫程式指定的按鍵**doskey**金鑰指派。
-   重新叫用命令

    若要恢復命令，您可以使用任何下列索引鍵之後啟動 Doskey.exe。 如果您在程式內使用 Doskey.exe，該程式的金鑰指派的優先順序較高。  
    |Key|描述|
    |---|-----------|
    |向上鍵|服務重新叫用您使用之前顯示的命令。|
    |向下箭號|服務重新叫用後會顯示您使用的命令。|
    |PAGE UP|服務重新叫用您在目前的工作階段中使用的第一個命令。|
    |PAGE DOWN|服務重新叫用您在目前的工作階段中使用最新的命令。|
-   編輯命令列

    使用 Doskey.exe，您可以編輯目前的命令列。 如果您在程式內使用 Doskey.exe，該程式的金鑰指派更高的優先順序，以及一些 Doskey.exe 編輯索引鍵可能無法運作。

    下表列出**doskey**編輯索引鍵和其函式。  
    |按鍵或按鍵組合|描述|
    |----------------------|-----------|
    |向左箭號|將插入點傳回一個字元。|
    |向右箭號|將插入點正向一個字元。|
    |CTRL + 向左鍵|移動插入點下移一字。|
    |CTRL + 向右鍵|移動插入點正向一個字。|
    |首頁|將插入點移到一行的開頭。|
    |結束|將插入點移到該行結尾。|
    |ESC|清除顯示的命令。|
    |F1|複製範本中的資料行的一個字元相同的資料行，在命令提示字元 視窗中。 （範本是您輸入的最後一個命令會保留的記憶體緩衝區）。|
    |F2|向前搜尋您輸入之後的下一個索引鍵的範本在按下 f2 鍵。 Doskey.exe 範本中插入文字-，但不是包括，字元指定。|
    |F3|將範本的其餘部分複製到命令列中。 Doskey.exe 開始複製對應的範本中的位置中的字元，在命令列上的插入點所指出之位置。|
    |F4|刪除所有的字元，從目前的插入點的位置，但不是包括您輸入之後的字元的下一個按 F4。|
    |F5|將範本複製到目前的命令列中。|
    |F6|置於目前的插入點位置的檔案結尾字元 (CTRL + Z)。|
    |F7|顯示此程式會儲存在記憶體中的所有命令 （在對話方塊中）。 使用向上鍵和向下鍵來選取您想，此的命令並按 ENTER 鍵來執行命令。 您也可以記下命令前面循序數字和 F9 鍵搭配使用此數字。|
    |ALT+F7|刪除儲存在目前的歷程記錄緩衝區的記憶體中的所有命令。|
    |F8|目前的命令中的字元為開頭之歷程記錄緩衝區中，會顯示所有命令。|
    |F9|會提示您輸入歷程記錄的緩衝區命令數字，然後顯示 您指定的數字與關聯的命令。 按下 ENTER，執行命令。 若要顯示的所有數字和其相關聯的命令，請按 F7。|
    |ALT+F10|刪除所有的巨集定義。|
-   使用**doskey**程式內

    特定的字元為基礎的互動式程式，例如程式偵錯工具或檔案傳輸程式 」 (FTP) 會自動使用 Doskey.exe。 若要使用 Doskey.exe，程式必須是主控台的程序，並使用緩衝的輸入。 覆寫程式指定的按鍵**doskey**金鑰指派。 例如，如果程式使用 F7 鍵，函式，您無法取得**doskey**命令歷程記錄快顯視窗中的。

    使用 Doskey.exe，您可以維護每個程式啟動，或重複的命令歷程記錄。 您可以編輯程式的提示字元中，在先前的命令，並啟動**doskey**程式建立的巨集。 如果您結束，然後重新啟動相同的 [命令提示字元] 視窗的程式會從先前的程式工作階段的命令歷程記錄。

    您必須先執行 Doskey.exe，才能啟動程式。 您無法使用**doskey**命令列選項，從程式的命令提示字元中，程式在沒有殼層命令。

    如果您想要自訂 Doskey.exe 與程式的運作方式，並建立**doskey**詢問該方案的巨集，您可以建立批次程式，以修改 Doskey.exe 並啟動程式。
-   指定預設值插入模式

    如果您按 INSERT 鍵時，您可以在輸入文字**doskey**啓動現有的文字，而不會取代文字的命令列。 不過，如果要在按下 ENTER 之後，Doskey.exe 回到鍵盤取代模式。 您必須按 INSERT，以返回 [插入] 模式。

    使用 **/插入**轉為鍵盤插入模式下每次您按下 ENTER。 鍵盤實際上會保留在插入模式直到您使用 **/overstrike**。 您可以暫時取代模式中按下返回 INSERT 鍵，但您按下 ENTER 之後，Doskey.exe 返回鍵盤插入模式。

    插入點變更形狀當從一種模式變更為其他的情況下，您在使用 INSERT 鍵。
-   建立巨集

    您可以使用 Doskey.exe 來建立執行一或多個命令的巨集。 下表列出可用來控制命令操作，當您定義的巨集時的特殊字元。  
    |字元|描述|
    |---------|-----------|
    |$G 或 $g|將輸出重新導向。 使用這些特殊字元，將輸出傳送至裝置或檔案，而不是至畫面。 此字元就相當於輸出重新導向符號 (**>**)。|
    |$G$ G 或 $g$ g|將輸出附加至檔案結尾。 您可以使用上述任一個雙引號字元來將輸出附加至現有的檔案，而不是取代檔案中的資料。 這些雙字元相當於輸出的附加重新導向符號 (**>>**)。|
    |$L 或 $l|輸入重新導向。 使用這些特殊字元來讀取來自裝置或檔案，而不是從鍵盤輸入。 此字元就相當於輸入的重新導向符號 (**<**)。|
    |$B 或 $b|將巨集的輸出傳送至命令。 這些特殊字元會相當於使用管道 (* *|*） 在命令列上。|
    |$T 或 $t|分隔命令。 若要將命令，當您建立巨集，或輸入命令上使用這些特殊字元**doskey**命令列。 這些特殊字元會相當於使用連字號 (**&**) 命令列上。|
    |$$|指定的貨幣符號字元 (**$**)。|
    |$ 1 到 $9|代表您想要指定當您執行巨集的任何命令列資訊。 特殊字元 **$1**透過 **$9**是批次參數可讓您在命令列上執行巨集每次使用不同的資料。 **$1**符號，則**doskey**命令是類似於 **%1**批次程式中的字元。|
    |$*|代表您想要指定當您輸入巨集名稱的所有命令列資訊。 特殊字元**$ \*** 是可取代的參數，類似於批次參數 **$1**透過 **$9**，使用其中一個重要的差異： 巨集名稱用來替代之後，您輸入命令列上的所有項目**$ \*** 巨集中。|
-   執行**doskey**巨集

    若要執行巨集，請在命令提示字元中，從第一個位置開始輸入巨集名稱。 如果已定義了巨集**$ \*** 或任何批次參數 **$1**透過 **$9**，使用空格來分隔參數。 您無法執行**doskey**從批次程式巨集。
-   建立與 Windows Server 2003 系列的命令同名的巨集

    如果您總是使用特定的命令，以特定的命令列選項，您可以建立具有相同名稱做為命令的巨集。 若要指定您是否要執行的巨集或命令，請遵循這些指導方針：  
    -   若要執行巨集，請在命令提示字元中輸入巨集名稱。 請勿將巨集名稱前面加上的空格。
    -   若要執行命令時，在命令提示字元中，插入一個或多個空格，然後輸入命令名稱。
-   正在刪除巨集

    若要刪除巨集，請輸入：  
    ```
    doskey <MacroName> =
    ```

## <a name="BKMK_examples"></a>範例

**/Macros**並 **/history**命令列選項可用於建立批次程式，以儲存巨集和命令。 例如，若要儲存所有目前**doskey**巨集、 型別：
```
doskey /macros > macinit 
```
若要使用儲存在 Macinit 巨集，請輸入：
```
doskey /macrofile=macinit 
```
若要建立批次程式 tmp.bat 包含最近使用的命令，型別：
```
doskey /history> tmp.bat 
```
若要定義多個命令使用巨集，請使用 **$t**來分隔命令，如下所示：
```
doskey tx=cd temp$tdir/w $*
```
在上述範例中，TX 巨集會將目前目錄變更至 Temp，並顯示的目錄清單寬的顯示格式。 您可以使用**$ \*** 要附加至其他命令列選項巨集的結尾**dir** TX 執行時。

下列巨集使用新的目錄名稱的批次參數：
```
doskey mc=md $1$tcd $1
```
巨集建立新目錄，然後從目前的目錄變更為新的目錄。

若要使用上述的巨集建立，並將名為書籍的目錄中，輸入：
```
mc books
```
若要建立**doskey**巨集的程式稱為 Ftp.exe、 包含 **/exename** ，如下所示：
```
doskey /exename=ftp.exe go=open 172.27.1.100$tmget *.TXT c:\reports$tbye 
```
若要使用上述的巨集，啟動 FTP。 在 FTP 提示字元中，輸入：
```
go
```
FTP 回合**開啟**， **mget**，並**bye**命令。

若要建立快速且無條件地將磁碟格式化的巨集，請輸入：
```
doskey qf=format $1 /q /u
```
若要快速且無條件地格式化磁碟機 A 中的磁碟，請輸入：
```
qf a:
```
若要刪除呼叫 vlist 巨集，請輸入：
```
doskey vlist =
```

#### <a name="additional-references"></a>其他參考資料

[命令列語法關鍵](command-line-syntax-key.md)