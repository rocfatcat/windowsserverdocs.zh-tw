---
title: doskey
description: Doskey 命令的參考文章和 Doskey.exe，其會重新叫用先前輸入的命令列命令、編輯命令行，以及建立宏。
ms.topic: reference
ms.assetid: 4874fd43-d5ea-45f3-ae24-388ae925ed76
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: 8cda337419253ebdb9a390e5d8ba3bfa07fd1a91
ms.sourcegitcommit: 96d46c702e7a9c3a321bbbb5284f73911c7baa3c
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 08/27/2020
ms.locfileid: "89030786"
---
# <a name="doskey"></a>doskey

呼叫 Doskey.exe，其會重新叫用先前輸入的命令列命令、編輯命令行，以及建立宏。

## <a name="syntax"></a>語法

```
doskey [/reinstall] [/listsize=<size>] [/macros:[all | <exename>] [/history] [/insert | /overstrike] [/exename=<exename>] [/macrofile=<filename>] [<macroname>=[<text>]]
```

### <a name="parameters"></a>參數

| 參數 | 描述 |
| --------- | ----------- |
| /reinstall | 安裝 Doskey.exe 的新複本，並清除命令歷程記錄緩衝區。 |
| /listsize =`<size>` | 指定記錄緩衝區中的最大命令數目。 |
| /macros | 顯示所有 **doskey** 宏的清單。 您可以使用重新導向符號 (`>`) 與 **/macros** ，將清單重新導向至檔案。 您可以將 **/macros** 縮寫為 **/m**。 |
| /macros：全部 | 顯示所有可執行檔的 **doskey** 宏。 |
| macros`<exename>` | 顯示*exename*所指定之可執行檔的**doskey**宏。 |
| /history | 顯示儲存在記憶體中的所有命令。 您可以使用重新導向符號 (`>`) 與 **/history** ，將清單重新導向至檔案。 您可以將 **/history** 縮寫為 **/h**。 |
| /insert | 指定您輸入的新文字會以舊文字插入。 |
| /overstrike | 指定新文字覆寫舊文字。 |
| /exename =`<exename>` | 指定程式 (也就是在其中執行 **doskey** 宏的可執行檔) 。 |
| /macrofile =`<filename>` | 指定包含您要安裝之宏的檔案。 |
| `<macroname>`=[`<text>`] | 建立會執行 *文字*所指定之命令的宏。 *MacroName* 指定您要指派給宏的名稱。 *文字* ：指定您要錄製的命令。 如果 *文字* 保留空白，則會清除所有指派命令的 *MacroName* 。 |
| /? | 在命令提示字元顯示說明。 |

#### <a name="remarks"></a>備註

- 某些以字元為基礎的互動式程式，例如程式偵錯工具或檔案傳輸程式 (FTP) 會自動使用 Doskey.exe。 若要使用 Doskey.exe，程式必須是主控台進程並使用緩衝的輸入。 程式金鑰指派會覆寫 **doskey** 金鑰指派。 例如，如果程式針對函式使用 F7 鍵，您就無法在快顯視窗中取得 **doskey** 命令歷程記錄。

- 您可以使用 Doskey.exe 來編輯目前的命令列，但無法從程式的命令提示字元使用命令列選項。 啟動程式之前，您必須先執行 **doskey** 命令列選項。 如果您在程式中使用 Doskey.exe，則會優先使用該程式的金鑰指派，某些 Doskey.exe 編輯索引鍵可能無法運作。

- 使用 Doskey.exe，您可以為每個啟動或重複的程式維護命令歷程記錄。 您可以在程式的提示字元中編輯先前的命令，並啟動為程式建立的 **doskey** 宏。 如果您從相同的命令提示字元視窗結束再重新開機程式，則可以使用來自上一個程式會話的命令歷程記錄。

- 若要重新叫用命令，您可以在啟動 Doskey.exe 之後，使用下列任何金鑰：

  | Key | 描述 |
  | --- | ----------- |
  | 向上鍵 | 重新叫用您在顯示的命令之前所使用的命令。 |
  | DOWN ARROW | 重新叫用您在顯示的命令之後所使用的命令。 |
  | PAGE UP | 重新叫用您在目前會話中使用的第一個命令。 |
  | PAGE DOWN | 重新叫用您在目前會話中使用的最新命令。 |

- 下表列出 **doskey** 編輯金鑰和其功能：

  | 按鍵或按鍵組合 | 描述 |
  | ---------------------- | ----------- |
  | 向左鍵 | 將插入點向後移動一個字元。 |
  | 向右鍵 | 將插入點向前移動一個字元。 |
  | CTRL+向左鍵 | 將插入點向後移動一個字組。 |
  | CTRL+向右鍵 | 將插入點向前移動一個字。 |
  | HOME | 將插入點移至行的開頭。 |
  | END | 將插入點移至該行的結尾。 |
  | ESC | 從顯示清除命令。 |
  | F1 | 從範本中的資料行，將一個字元複製到 [命令提示字元] 視窗中的相同資料行。  (範本是保存您所輸入之最後一個命令的記憶體緩衝區 )  |
  | F2 | 在範本中向前搜尋您按下 F2 後所輸入的下一個索引鍵。 Doskey.exe 插入範本中的文字，最多（但不包括）您指定的字元。 |
  | F3 | 將範本的其餘部分複製到命令列。 Doskey.exe 開始從範本中的位置複製字元，此位置對應至命令列上插入點所表示的位置。 |
  | F4 | 從目前的插入點位置刪除所有字元，但不包括在您按下 F4 之後所輸入字元的下一個出現位置。 |
  | F5 | 將範本複製到目前的命令列。 |
  | F6 | 將檔案結尾字元 (CTRL + Z) 放置於目前的插入點位置。 |
  | F7 | 在對話方塊中顯示 (，) 儲存在記憶體中之程式的所有命令。 使用向上鍵和向下鍵來選取您想要的命令，然後按 ENTER 鍵以執行命令。 您也可以記下命令前面的序號，並搭配 F9 鍵使用此數位。 |
  | ALT+F7 | 針對目前的歷程記錄緩衝區，刪除儲存在記憶體中的所有命令。 |
  | F8 | 顯示歷程記錄緩衝區中以目前命令字元開頭的所有命令。 |
  | F9 | 提示您輸入歷程記錄緩衝區命令編號，然後顯示與您指定之數位相關聯的命令。 按 ENTER 鍵以執行命令。 若要顯示所有數位與其相關聯的命令，請按 F7。 |
  | ALT+F10 | 刪除所有巨集定義。 |

- 如果您按下 ctrl 鍵，就可以在現有文字的過程中，于 **doskey** 命令列輸入文字，而不需要取代文字。 不過，在按下 ENTER 鍵之後，Doskey.exe 會傳回您的鍵盤來 **取代** 模式。 您必須再次按下 INSERT，才能返回 **插入** 模式。

- 當您使用 INSERT 鍵從某個模式變更為另一個模式時，插入點會變更形狀。

- 如果您想要自訂 Doskey.exe 如何與程式搭配使用，以及如何為該程式建立 **doskey** 宏，您可以建立一個可修改 Doskey.exe 並啟動程式的批次程式。

- 您可以使用 Doskey.exe 來建立可執行一或多個命令的宏。 下表列出您在定義宏時可以用來控制命令作業的特殊字元。

  | 字元 | 描述 |
  |---------- | ----------- |
  | `$G` 或 `$g` | 重新導向輸出。 使用其中一種特殊字元將輸出傳送至裝置或檔案，而不是傳送至螢幕。 這個字元相當於 output () 的重新導向符號 `>` 。 |
  | `$G$G` 或 `$g$g` | 將輸出附加至檔案結尾。 使用其中一種雙字元將輸出附加至現有的檔案，而不是取代檔案中的資料。 這些雙字元相當於 output () 的附加重新導向符號 `>>` 。 |
  | `$L` 或 `$l` | 重新導向輸入。 使用其中一種特殊字元來讀取來自裝置或檔案的輸入，而不是從鍵盤讀取輸入。 這個字元相當於輸入 () 的重新導向符號 `<` 。 |
  | `$B` 或 `$b` | 將宏輸出傳送至命令。 這些特殊字元相當於使用管道 `(` 和 `*` 。 |
  | `$T` 或 `$t` | 分隔命令。 當您在 **doskey** 命令列上建立宏或輸入命令時，請使用這些特殊字元來分隔命令。 這些特殊字元相當於 `&` 在命令列上使用連字號 () 。 |
  | `$$` | 指定 () 的貨幣符號字元 `$` 。 |
  | `$1` 通過 `$9` | 代表您要在執行宏時指定的任何命令列資訊。 的特殊字元 `$1` `$9` 是批次參數，可讓您在每次執行宏時，在命令列上使用不同的資料。 `$1` **Doskey**命令中的字元類似于 `%1` 批次程式中的字元。 |
  | `$*` | 表示當您輸入宏名稱時，所要指定的所有命令列資訊。 特殊字元 `$*` 是可替換的參數，與批次參數相似 `$1` `$9` ，但有一個重要的差異：您在命令列上輸入的所有專案，都是在宏名稱取代宏的宏名稱之後 `$*` 。 |

- 若要執行宏，請在命令提示字元中輸入宏名稱，從第一個位置開始。 如果使用 `$*` 或任何批次參數來定義宏 `$1` `$9` ，請使用空格來分隔參數。 您無法從 batch 程式執行 **doskey** 宏。

- 如果您一律使用特定命令搭配特定的命令列選項，您可以建立與命令名稱相同的宏。 若要指定您是否要執行宏或命令，請遵循下列指導方針：

  - 若要執行宏，請在命令提示字元中輸入宏名稱。 請勿在宏名稱之前加上空格。

  - 若要執行命令，請在命令提示字元中插入一或多個空格，然後輸入命令名稱。

### <a name="examples"></a>範例

**/Macros**和 **/history**命令列選項適用于建立批次程式以儲存宏和命令。 例如，若要儲存所有目前的 **doskey** 宏，請輸入：

```
doskey /macros > macinit
```

若要使用儲存在 Macinit 中的宏，請輸入：

```
doskey /macrofile=macinit
```

若要建立名為 Tmp.bat 的 batch 程式，其中包含最近使用的命令，請輸入：

```
doskey /history> tmp.bat
```

若要定義具有多個命令的宏，請使用 `$t` 來分隔命令，如下所示：

```
doskey tx=cd temp$tdir/w $*
```

在上述範例中，TX 宏會將目前的目錄變更為 Temp，然後以寬顯示格式顯示目錄清單。 `$*`當您執行德克薩斯州選項時，您可以在宏的結尾使用，將其他命令列選項附加至**dir** 。

下列宏會使用批次參數作為新的目錄名稱：

```
doskey mc=md $1$tcd $1
```

宏會建立新的目錄，然後從目前目錄變更為新目錄。

若要使用上述宏來建立並變更為名為 *books.xml*的目錄，請輸入：

```
mc books
```

若要為稱為*Ftp.exe*的程式建立**doskey**宏，請包含 **/exename** ，如下所示：

```
doskey /exename=ftp.exe go=open 172.27.1.100$tmget *.TXT c:\reports$tbye
```

若要使用上述宏，請啟動 FTP。 在 FTP 提示字元中，輸入：

```
go
```

FTP 會執行 **open**、 **mget**和 **再見** 命令。

若要建立可快速且無條件地格式化磁片的宏，請輸入：

```
doskey qf=format $1 /q /u
```

若要快速且無條件地格式化磁片磁碟機 A 中的磁片，請輸入：

```
qf a:
```

若要刪除稱為 *vlist*的宏，請輸入：

```
doskey vlist =
```

## <a name="additional-references"></a>其他參考資料

- [命令列語法關鍵](command-line-syntax-key.md)
