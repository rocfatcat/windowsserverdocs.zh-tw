---
title: chkdsk
description: '適用於 Windows 命令主題 * * *- '
ms.custom: na
ms.prod: windows-server-threshold
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: 62912a3c-d2cc-4ef6-9679-43709a286035
author: coreyp-at-msft
ms.author: coreyp
manager: lizapo
ms.date: 10/16/2017
ms.openlocfilehash: 9c5272ba0a5ff7c0a30f61631bb6c8dac6552ef0
ms.sourcegitcommit: 0b5fd4dc4148b92480db04e4dc22e139dcff8582
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 05/24/2019
ms.locfileid: "66192606"
---
# <a name="chkdsk"></a>chkdsk



檢查檔案系統和檔案系統中繼資料的邏輯與實體錯誤的磁碟區。 如果未指定參數，使用**chkdsk**顯示磁碟區的狀態，並不會修正任何錯誤。 如果搭配 **/f**， **/r**， **/x**，或**b**參數，它修正錯誤的磁碟區上。

> [!IMPORTANT]
> 在本機的成員資格**系統管理員**群組中或對等項目，是執行所需的最小**chkdsk**。 若要開啟命令提示字元 視窗，以系統管理員，以滑鼠右鍵按一下**命令提示字元**中開始 功能表，然後按一下**系統管理員身分執行**。

> [!IMPORTANT]
> 中斷**chkdsk**不建議使用。 不過，取消或中斷**chkdsk**應該不保留磁碟區比之前的任何其他損毀**chkdsk**執行。 重新執行**chkdsk**會檢查並修復任何剩餘的損毀磁碟區上。

> [!IMPORTANT]
> **注意：** Chkdsk 只用於本機磁碟中。 此命令不能與已透過網路重新導向本機磁碟機代號。

如需如何使用此命令的範例，請參閱[範例](#examples)。

##<a name="syntax"></a>語法

```
chkdsk [<Volume>[[<Path>]<FileName>]] [/f] [/v] [/r] [/x] [/i] [/c] [/l[:<Size>]] [/b]  

```

##<a name="parameters"></a>參數

|參數|描述|
|---------|-----------|
|\<磁碟區 >|指定磁碟機代號 （後面接著冒號） 的情況下，掛接點或磁碟區名稱。|
|[\<Path>]<FileName>|搭配檔案配置表 (FAT) 和僅 FAT32。 指定的位置和檔案名稱或一組您想要的檔案**chkdsk**分散程度檢查。 您可以使用**嗎？** 並 **&#42;** 萬用字元來指定多個檔案。|
|/f|修正錯誤，在磁碟上。 磁碟必須先鎖定。 如果**chkdsk**無法的鎖定磁碟機中，訊息隨即出現，詢問您是否想要檢查的磁碟機下一次重新啟動電腦。|
|/v|磁碟已核取每個目錄中顯示每個檔案名稱。|
|/r|尋找損壞的磁區，並復原可讀取的資訊。 磁碟必須先鎖定。 **/r**內含的功能 **/f**，其他分析的實體磁碟錯誤。|
|/x|如有必要，請強制第一，卸載磁碟區。 所有磁碟機的開啟控制代碼會失效。 **/x**也包含的功能 **/f**。|
|/i|只與 NTFS 搭配使用。 執行較不積極檢查的索引項目，可減少執行所需的時間量**chkdsk**。|
|/c|只與 NTFS 搭配使用。 不會檢查資料夾結構，這可以減少執行所需的時間內的循環**chkdsk**。|
|/l[:\<Size>]|只與 NTFS 搭配使用。 您輸入的大小變更記錄檔的大小。 如果您省略的 size 參數中， **/l**會顯示目前的大小。|
|/b|只限 NTFS:清除的磁碟區上的錯誤叢集清單，並重新掃描有錯誤的所有已配置和可用叢集。 **/ b**內含的功能 **/r**。 映像至新的硬碟磁碟機的磁碟區之後，使用此參數。|
|/?|在命令提示字元顯示說明。|

## <a name="remarks"></a>備註

-   略過的磁碟區檢查

    **/I**或是 **/c**交換器可減少執行所需的時間量**chkdsk**藉由略過特定的大量檢查。
-   檢查鎖定的磁碟機，在重新啟動

    如果您想**chkdsk**來更正磁碟錯誤，您不能有開啟的檔案，磁碟機上。 如果檔案是開啟的會出現下列錯誤訊息：  
    ```
    Chkdsk cannot run because the volume is in use by another process. Would you like to schedule this volume to be checked the next time the system restarts? (Y/N)  
    
    ```  
    如果您選擇 下一次您重新啟動電腦，檢查磁碟機**chkdsk**會檢查磁碟機，並自動更正的錯誤，當您重新啟動電腦。 如果磁碟機的磁碟分割開機磁碟分割**chkdsk**自動重新啟動電腦之後它會檢查磁碟機。

    您也可以使用**chkntfs /c**命令可排程要在下一次檢查磁碟區重新啟動電腦。 使用**fsutil 中途組**命令來設定磁碟區的中途位元 （表示損毀），因此，Windows 會執行**chkdsk**重新啟動電腦。
-   報告的磁碟錯誤

    您應該使用**chkdsk**偶爾會在檢查是否有磁碟錯誤的 FAT 與 NTFS 檔案系統上。 **Chkdsk**會檢查磁碟空間和磁碟使用，並提供每個檔案系統專屬狀態報告。 [狀態] 報表會顯示在檔案系統中找到的錯誤。 如果您執行**chkdsk**不含 **/f**參數上作用中磁碟分割，所以可能會報告偽造錯誤因為它無法鎖定該磁碟機。
-   修正邏輯磁碟錯誤

    **Chkdsk**更正磁碟錯誤，只有當您指定 **/f**參數。 **Chkdsk**必須要能夠鎖定磁碟機來更正錯誤。

    因為在 FAT 檔案系統上的修復通常會變更磁碟的檔案配置表，而且有時會導致資料遺失**chkdsk**可能會顯示確認訊息，如下所示：  
    ```
    10 lost allocation units found in 3 chains.  
    Convert lost chains to files?  
    
    ```  
    如果您按下**Y**，Windows 將每個遺失的鏈結的根目錄中儲存檔案的名稱，格式檔案為\<nnnn >.chk。 當**chkdsk**完成時，您可以檢查這些檔案，以查看它們是否包含您所需要的任何資料。 如果您按下**N**，Windows 會修正磁碟，但不會儲存遺失的配置單位的內容。

    如果您不要使用 **/f**參數**chkdsk**顯示一則訊息必須加以修正，此檔案，但它不會修正任何錯誤。

    如果您使用**chkdsk /f**極大的磁碟或具有非常大量的檔案 （例如，數百萬檔案） 的磁碟上**chkdsk /f**可能需要很長的時間才能完成。
-   尋找實體磁碟錯誤

    使用 **/r**參數來尋找檔案系統中的實體磁碟錯誤，並嘗試復原資料，從任何受影響的磁碟磁區。
-   使用**chkdsk**與開啟的檔案

    如果您指定 **/f**參數**chkdsk**會顯示錯誤訊息，如果有開啟的檔案在磁碟上。 如果您未指定 **/f**參數和開啟的檔案存在，請**chkdsk**可能會報告遺失的配置單位的磁碟上。 這可能會發生，如果開啟的檔案不尚未記錄在檔案配置表中。 如果**chkdsk**報告遺失數量龐大的配置單位，請考慮修復磁碟。
-   使用**chkdsk**與共用資料夾的陰影複製

    因為已啟用共用資料夾的共用資料夾的來源磁碟區陰影複製無法鎖定陰影複製時，執行**chkdsk**針對來源磁碟區可能會報告錯誤，則為 false，或是造成**chkdsk**意外結束。 執行，您可以不過，檢查是否有錯誤的陰影複製**chkdsk**以唯讀模式 （不含參數） 來檢查 共用資料夾的存放磁碟區陰影複製。
-   了解結束代碼

    下表列出的結束碼**chkdsk**報告之後完成。  
    |結束代碼|描述|
    |---------|-----------|
    |0|找不到任何錯誤。|
    |1|已找到並修正錯誤。|
    |2|執行磁碟清理 （例如記憶體回收），或並未執行清除作業，因為 **/f**未指定。|
    |3|無法檢查磁碟，可能不會修正錯誤，或不修正錯誤，因為 **/f**未指定。|
-   **Chkdsk**命令，使用不同的參數，可從修復主控台。
-   不常重新啟動的伺服器，您可能想要**chkntfs**或**fsutil 中途查詢**之前執行 chkdsk 的命令，以判定磁碟區的已變更位元是否已設定。

## <a name="examples"></a>範例

如果您想要檢查磁碟機 D 中的和已修正錯誤的 Windows 中，輸入：
```
chkdsk d: /f  

```
如果發生錯誤， **chkdsk**會暫停，並顯示訊息。 **Chkdsk**完成藉由顯示報表，以列出磁碟的狀態。 您無法開啟直到指定的磁碟機上的任何檔案**chkdsk**完成。

若要檢查目前的目錄中的 FAT 磁碟上的非連續區塊的所有檔案，請輸入：
```
chkdsk *.*  

```
**Chkdsk**顯示狀態報告，並列出符合具有不連續區塊的檔案規格的檔案。
#### <a name="additional-references"></a>其他參考資料

[命令列語法關鍵](command-line-syntax-key.md)
