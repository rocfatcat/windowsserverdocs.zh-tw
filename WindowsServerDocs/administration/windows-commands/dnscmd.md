---
title: dnscmd
description: Dnscmd 的參考主題，這是用來管理 DNS 伺服器的命令列介面。
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: e7f31cb5-a426-4e25-b714-88712b8defd5
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 10/16/2017
ms.openlocfilehash: e153ab1ed1b8f02f09bf1d8fb4a7842a08c8698b
ms.sourcegitcommit: aed942d11f1a361fc1d17553a4cf190a864d1268
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 05/12/2020
ms.locfileid: "83235195"
---
# <a name="dnscmd"></a>Dnscmd

> 適用于： Windows Server （半年通道）、Windows Server 2019、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

管理 DNS 伺服器的命令列介面。 這個公用程式適用于腳本批次檔，可協助自動化例行的 DNS 管理工作，或在您的網路上執行簡單的自動安裝和設定新的 DNS 伺服器。

## <a name="syntax"></a>語法
```
dnscmd <ServerName> <command> [<command parameters>]
```

### <a name="parameters"></a>參數

|  參數   |     說明      |
|--------------|--------------------------------------------------------------|
| `<ServerName>` | 遠端或本機 DNS 伺服器的 IP 位址或主機名稱。 |


## <a name="commands"></a>命令

|   命令   |     說明      |
| ----------- | -------------------- |
| [dnscmd/ageallrecords](#BKMK_1) | 設定區域或節點中所有時間戳記的目前時間。 |
| [dnscmd/clearcache](#BKMK_2)  | 清除 DNS 伺服器快取。 |
| [dnscmd/config](#BKMK_3) | 重設 DNS 伺服器或區域設定。 |
| [dnscmd/createbuiltindirectorypartitions](#BKMK_4) | 建立內建的 DNS 應用程式目錄分割。 |
| [dnscmd/createdirectorypartition](#BKMK_5) | 建立 DNS 應用程式目錄分割。 |
| [dnscmd/deletedirectorypartition](#BKMK_6) | 刪除 DNS 應用程式目錄分割。 |
| [dnscmd/directorypartitioninfo](#BKMK_7) | 列出 DNS 應用程式目錄分割的相關資訊。 |
| [dnscmd/enlistdirectorypartition](#BKMK_8) | 將 DNS 伺服器新增至 DNS 應用程式目錄分割的複寫集。 |
| [dnscmd/enumdirectorypartitions](#BKMK_9) | 列出伺服器的 DNS 應用程式目錄分割。 |
| [dnscmd/enumrecords](#BKMK_10) | 列出區域中的資源記錄。 |
| [dnscmd/enumzones](#BKMK_11) | 列出指定伺服器主控的區域。 |
| [dnscmd/exportsettings](#BKMK_25a) | 將伺服器設定資訊寫入文字檔。 |
| [dnscmd/info](#BKMK_12) | 取得伺服器資訊。 |
| [dnscmd/ipvalidate](#BKMK_29a) | 驗證遠端 DNS 伺服器。 |
| [dnscmd/nodedelete](#BKMK_13)  | 刪除區域中某個節點的所有記錄。 |
| [dnscmd/recordadd](#BKMK_14)  | 將資源記錄新增至區域。 |
| [dnscmd/recorddelete](#BKMK_15) | 從區域移除資源記錄。 |
| [dnscmd/resetforwarders](#BKMK_16) | 設定 DNS 伺服器轉送遞迴查詢。 |
| [dnscmd/resetlistenaddresses](#BKMK_17) | 設定伺服器 IP 位址以提供 DNS 要求。 |
| [dnscmd/startscavenging](#BKMK_18) | 起始伺服器清除。 |
| [dnscmd/statistics](#BKMK_19) | 查詢或清除伺服器統計資料。 |
| [dnscmd/unenlistdirectorypartition](#BKMK_20) | 從 DNS 應用程式目錄分割的複寫集中移除 DNS 伺服器。 |
| [dnscmd/writebackfiles](#BKMK_21) | 將所有區域或根提示資料儲存至檔案。 |
| [dnscmd/zoneadd](#BKMK_22) | 在 DNS 伺服器上建立新的區域。 |
| [dnscmd/zonechangedirectorypartition](#BKMK_23) | 變更區域所在的目錄分割。 |
| [dnscmd/zonedelete](#BKMK_24) | 從 DNS 伺服器刪除區域。 |
| [dnscmd/zoneexport](#BKMK_25) | 將區域的資源記錄寫入文字檔。 |
| [dnscmd/zoneinfo z](#BKMK_26) | 顯示區域資訊。 |
| [dnscmd/zonepause](#BKMK_27) | 暫停區域。 |
| [dnscmd/zoneprint](#BKMK_28) | 顯示區域中的所有記錄。 |
| [dnscmd/zonerefresh](#BKMK_30) | 強制重新整理主要區域的次要區域。 |
| [dnscmd/zonereload](#BKMK_31) | 從其資料庫重載區域。 |
| [dnscmd/zoneresetmasters](#BKMK_32) | 變更提供區域傳輸資訊到次要區域的主伺服器。 |
| [dnscmd/zoneresetscavengeservers](#BKMK_33) | 變更可清除區域的伺服器。 |
| [dnscmd/zoneresetsecondaries](#BKMK_34) | 重設區域的次要資訊。 |
| [dnscmd/zoneresettype](#BKMK_29) | 變更區欄位型別。 |
| [dnscmd/zoneresume](#BKMK_35) | 繼續區域。 |
| [dnscmd/zoneupdatefromds](#BKMK_36) | 使用 active directory 網域服務（AD DS）中的資料來更新 active directory 整合區域。 |
| [dnscmd/zonewriteback](#BKMK_37) | 將區域資料儲存至檔案。 |

### <a name="dnscmd-ageallrecords"></a><a name=BKMK_1></a>dnscmd/ageallrecords

設定在 DNS 伺服器上指定區域或節點上的資源記錄時間戳記的目前時間。

#### <a name="syntax"></a>語法

```
dnscmd [<ServerName>] /ageallrecords <ZoneName>[<NodeName>] | [/tree]|[/f]
```

##### <a name="parameters"></a>參數

| Partameter | 說明 |
| ---------- | ----------- |
| `<ServerName>` | 指定系統管理員計畫管理的 DNS 伺服器，以 IP 位址、完整功能變數名稱（FQDN）或主機名稱表示。 如果省略此參數，則會使用本機伺服器。 |
| `<ZoneName>` | 指定區域的 FQDN。 |
| `<NodeName>` | 指定區域中的特定節點或子樹。 **NodeName**會使用下列內容指定區域中的節點或子樹：<p>-@ 代表根區域或 FQDN<p>-節點的 FQDN （結尾有句號（.）的名稱）<p>-相對於區域根目錄之名稱的單一標籤。 |
| `/tree` | 指定所有子節點也會接收時間戳記。 |
| `/f` | 執行命令而不要求確認。 |

#### <a name="remarks"></a>備註

- **Ageallrecords**命令是為了讓目前版本的 dns 與舊版的 dns （不支援過時和清除）之間的回溯相容性。 它會將目前時間的時間戳記新增至沒有時間戳記的資源記錄，並在具有時間戳記的資源記錄上設定目前的時間。

- 記錄清除不會發生，除非記錄有時間戳記。 [名稱伺服器（NS）] 資源記錄、[啟動授權（SOA）] 資源記錄和 [Windows 網際網路名稱服務（WINS）] 資源記錄不會包含在清除程式中，而且即使在**ageallrecords**命令執行時也不會加上時間戳記。

- 此命令會失敗，除非已啟用 DNS 伺服器和區域的清除。 如需如何啟用區域清除功能的相關資訊，請參閱<a href=#BKMK_3 data-raw-source=[config](#BKMK_3)>config</a>命令中區域層級語法底下的**過時**參數。<br/>-新增時間戳記至 DNS 資源記錄，使其與在 Windows 2000、Windows XP 或 Windows Server 2003 以外的作業系統上執行的 DNS 伺服器不相容。 您使用**ageallrecords**命令新增的時間戳記無法復原。<br/>-如果未指定任何選擇性參數，此命令會傳回指定節點上的所有資源記錄。 如果至少有一個選擇性參數指定了值，則**dnscmd**只會列舉對應于選擇性參數或參數中指定之值的資源記錄。<br/># # # # 範例<br/>請參閱 <href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 資料原始來源 =[範例1：將時間戳記的目前時間設定為資源記錄](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)>範例1：將時間戳記的目前時間設定為資源記錄 </a> 。<br/>### <a name=BKMK_2></a>dnscmd/clearcache<br/>清除指定之 DNS 伺服器上資源記錄的 DNS 快取記憶體。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /clearcache</code><br/># # # # # 個參數<br/><ServerName><br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/># # # # 範例使用方式<br/><code>dnscmd dnssvr1.contoso.com /clearcache</code><br/>### <a name=BKMK_3></a>dnscmd/config<br/>變更登錄中 DNS 伺服器和個別區域的值。 接受伺服器層級設定和區域層級設定。<br/>&gt; [!CAUTION]<br/>&gt;請勿直接編輯登錄，除非您沒有替代方案。 登錄編輯程式會略過標準保護，允許降低效能、損毀您的系統，甚至要求您重新安裝 Windows 的設定。 您可以使用 [控制台] 或 Microsoft Management Console （mmc）中的程式，安全地改變大部分的登錄設定。 如果您必須直接編輯登錄，請先備份。 如需詳細資訊，請參閱登錄編輯程式說明。<br/># # # # 伺服器層級語法<br/><code>dnscmd [&lt;ServerName&gt;] /config &lt;Parameter&gt;</code><br/># # # # dnscmd/config<br/>修改指定之伺服器的設定。<br/># # # # # 個參數<br/><ServerName><br/>指定您打算管理的 DNS 伺服器，以本機電腦語法、IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/><Parameter><br/>指定一個設定和一個值做為選項。 參數值使用此語法：*參數*[*值*]<br/>本節的其餘部分將說明下列參數值：<br/>-   **/addressanswerlimit**<br/>-   **/bindsecondaries**<br/>-   **/bootmethod**<br/>-   **/defaultagingstate**<br/>-   **/defaultnorefreshinterval**<br/>-   **/defaultrefreshinterval**<br/>-   **/disableautoreversezones**<br/>-   **/disablensrecordsautocreation**<br/>-   **/dspollinginterval**<br/>-   **/dstombstoneinterval**<br/>-   **/ednscachetimeout**<br/>-   **/enablednsprobes**<br/>-   **/enablednssec**<br/>-   **/enableglobalnamessupport**<br/>-   **/enableglobalqueryblocklist**<br/>-   **/eventloglevel**<br/>-   **/forwarddelegations**<br/>-   **/forwardingtimeout**<br/>-   **/globalnamesqueryorder**<br/>-   **/globalqueryblocklist**<br/>-   **/isslave**<br/>-   **/localnetpriority**<br/>-   **/logfilemaxsize**<br/>-   **/logfilepath**<br/>-   **/logipfilterlist**<br/>-   **/loglevel**<br/>-   **/maxcachesize**<br/>-   **/maxcachettl**<br/>-   **/namecheckflag**<br/>-   **/notcp**<br/>-   **/norecursion**<br/>-   **/recursionretry**<br/>-   **/recursiontimeout**<br/>-   **/roundrobin**<br/>-   **/rpcprotocol**<br/>-   **/scavenginginterval**<br/>-   **/secureresponses**<br/>-   **/sendport**<br/>-   **/strictfileparsing**<br/>-   **/updateoptions**<br/>-   **/writeauthorityns**<br/>-   **/xfrconnecttimeout**<br/>**/addressanswerlimit [0 | 5-28]**<br/>指定 DNS 伺服器可以傳送以回應查詢的最大主機記錄數目。 此值可以是零（0），也可以在5到28筆記錄的範圍內。 預設值為零 (0)。<br/>**/bindsecondaries [0 | 1]**<br/>變更區域傳輸的格式，讓它可以達到最大的壓縮和效率。 不過，此格式與舊版的 Berkeley 網際網路名稱網域（BIND）不相容。<br/>**0**<br/>使用最大壓縮。 此格式與僅限系結版本4.9.4 和更新版本相容。<br/>**1**<br/>只會將每個訊息的一筆資源記錄傳送到非 Microsoft DNS 伺服器。 此格式與4.9.4 之前的 BIND 版本相容。 這是預設值。<br/>**/bootmethod [0 | 1 | 2 | 3]**<br/>決定 DNS 伺服器取得其設定資訊的來源。<br/>**0**<br/>清除設定資訊的來源。<br/>**1**<br/>從位於 DNS 目錄（預設為%systemroot%\System32\DNS）的 BIND 檔案載入。<br/>**2**<br/>從登錄載入。<br/>**3**<br/>從 AD DS 和登錄載入。 這是預設值。<br/>**/defaultagingstate [0 | 1]**<br/>判斷新建立的區域上是否預設啟用 DNS 清除功能。<br/>**0**<br/>停用清除。 這是預設值。<br/>**1**<br/>啟用清除。<br/>**/defaultnorefreshinterval [0x1-0xFFFFFFFF | 0xA8]**<br/>設定動態更新記錄不接受重新整理的一段時間。 伺服器上的區域會自動繼承此值。 若要變更預設值，請輸入**0x1-0xffffffff**範圍中的值。 伺服器的預設值為**0xA8**。<br/>**/defaultrefreshinterval [0x1-0xFFFFFFFF | 0xA8]**<br/>設定允許動態更新 DNS 記錄的一段時間。 伺服器上的區域會自動繼承此值。 若要變更預設值，請輸入**0x1-0xffffffff**範圍中的值。 伺服器的預設值為**0xA8**。<br/>**/disableautoreversezones [0 | 1]**<br/>啟用或停用自動建立反向對應區域。 反向對應區域可為 DNS 功能變數名稱提供網際網路通訊協定（IP）位址的解析。<br/>**0**<br/>啟用反向對應區域的自動建立。 這是預設值。<br/>**1**<br/>停用自動建立反向對應區域。<br/>**/disablensrecordsautocreation {0 | 1}**<br/>指定 DNS 伺服器是否自動為其主控的區域建立名稱伺服器（NS）資源記錄。<br/>**0**<br/>會自動為 DNS 伺服器所裝載的區域建立名稱伺服器（NS）資源記錄。<br/>**1**<br/>不會自動為 DNS 伺服器所裝載的區域建立名稱伺服器（NS）資源記錄。<br/>**/dspollinginterval 0-30**<br/>指定 DNS 伺服器輪詢 AD DS active directory 整合區域中變更的頻率。<br/>**/dstombstoneinterval [1-30]**<br/>AD DS 中保留已刪除記錄的時間量（以秒為單位）。<br/>**/ednscachetimeout [ <seconds> ]**<br/>指定快取擴充 DNS （EDNS）資訊的秒數。 最小值為3600，而最大值為15724800。 預設值為604800秒（一周）。<br/>**/enableednsprobes {0 | 1}**<br/>啟用或停用伺服器來探查其他伺服器，以判斷是否支援 EDNS。<br/>**0**<br/>停用對 EDNS 探查的主動支援。<br/>**1**<br/>啟用對 EDNS 探查的主動支援。<br/>**/enablednssec {0 | 1}**<br/>啟用或停用 DNS 安全性延伸模組（DNSSEC）的支援。<br/>**0**<br/>停用 DNSSEC。<br/>**1**<br/>啟用 DNSSEC。<br/>**/enableglobalnamessupport {0 | 1}**<br/>啟用或停用 GlobalNames 區域的支援。 GlobalNames 區域支援跨樹系解析單一標籤 DNS 名稱。<br/>**0**<br/>停用 GlobalNames 區域的支援。 當您將此命令的值設定為**0**時，DNS 伺服器服務不會解析 GlobalNames 區域中的單一標籤名稱。<br/>**1**<br/>啟用 GlobalNames 區域的支援。 當您將此命令的值設定為**1**時，DNS 伺服器服務會解析 GlobalNames 區域中的單一標籤名稱。<br/>**/enableglobalqueryblocklist {0 | 1}**<br/>啟用或停用全域查詢封鎖清單的支援，這會封鎖清單中名稱的名稱解析。 當服務第一次啟動時，DNS 伺服器服務預設會建立並啟用全域查詢封鎖清單。 若要查看目前的全域查詢封鎖清單，請使用**dnscmd/info/globalqueryblocklist**命令。<br/>**0**<br/>停用全域查詢封鎖清單的支援。 當您將此命令的值設定為**0**時，DNS 伺服器服務會回應封鎖清單中的名稱查詢。<br/>**1**<br/>啟用全域查詢封鎖清單的支援。 當您將此命令的值設定為**1**時，DNS 伺服器服務不會回應封鎖清單中的名稱查詢。<br/>**/eventloglevel [0 | 1 | 2 | 4]**<br/>判斷哪些事件會記錄在事件檢視器的 DNS 伺服器記錄中。<br/>**0**<br/>不記錄任何事件。<br/>**1**<br/>只記錄錯誤。<br/>**2**<br/>只記錄錯誤和警告。<br/>**4**<br/>記錄錯誤、警告和參考事件。 這是預設值。<br/>**/forwarddelegations [0 | 1]**<br/>決定 DNS 伺服器如何處理委派子領域的查詢。 這些查詢可以傳送到查詢中所參考的子領域或 DNS 伺服器名稱為的轉寄站清單。 只有在啟用轉送時，才會使用設定中的專案。<br/>**0**<br/>會自動將參考委派 subzones 的查詢傳送至適當的子領域。 這是預設值。<br/>**1**<br/>將參考委派子領域的查詢轉送至現有的轉寄站。<br/>**/forwardingtimeout [ <seconds> ]**<br/>決定 DNS 伺服器在嘗試另一個轉寄站之前，等待轉寄站回應的秒數（0x1-0xFFFFFFFF）。 預設值為**0x5**，這是5秒。<br/>**/globalneamesqueryorder** {**0 | 1**}<br/>指定 DNS 伺服器服務解析名稱時，是否要先在 GlobalNames 區域或本機區域中查看。<br/>**0**<br/>DNS 伺服器服務會嘗試藉由查詢 GlobalNames 區域來解析名稱，然後再查詢其為其授權的區域。<br/>**1**<br/>DNS 伺服器服務會在查詢 GlobalNames 區域之前，藉由查詢其授權區域來解析名稱。<br/>**/globalqueryblocklist [[ <name> [ <name> ] ...]**<br/>以您指定的名稱清單取代目前的全域查詢封鎖清單。 如果您未指定任何名稱，此命令會清除封鎖清單。 根據預設，全域查詢封鎖清單會包含下列專案：<br/>-isatap<br/>-wpad<br/>第一次啟動時，DNS 伺服器服務可以移除其中一或兩個名稱，如果它在現有的區域中找到這些名稱。<br/>**/isslave [0 | 1]**<br/>決定 DNS 伺服器轉送的查詢不會收到任何回應時的回應方式。<br/>**0**<br/>指定 DNS 伺服器不是次級（也稱為*從屬*）。 如果轉寄站沒有回應，DNS 伺服器會嘗試解析查詢本身。 這是預設值。<br/>**1**<br/>指定 DNS 伺服器為從屬。 如果轉寄站沒有回應，DNS 伺服器會終止搜尋，並將失敗訊息傳送給解決器。<br/>**/localnetpriority [0 | 1]**<br/>決定當 DNS 伺服器有多個相同名稱的主機記錄時，傳回主機記錄的順序。<br/>**0**<br/>傳回記錄，依其在 DNS 資料庫中列出的順序排列。<br/>**1**<br/>會先傳回具有類似 IP 網路位址的記錄。 這是預設值。<br/>**/logfilemaxsize [ <size> ]**<br/>指定 Dns .log 檔案的大小上限（以位元組為單位）（0x10000-0xFFFFFFFF）。 當檔案達到其大小上限時，DNS 會覆寫最舊的事件。 預設大小是0x400000，也就是 4 mb。<br/>**/logfilepath [ &lt; path + LogFileName &gt; ]**<br/>指定 Dns .log 檔案的路徑。 預設路徑為%systemroot%\System32\Dns\Dns.log。 您可以使用格式*path + LogFileName*指定不同的路徑。<br/>**/logipfilterlist <IPaddress> [， <IPaddress> ...]**<br/>指定要記錄在 debug 記錄檔中的封包。 這些專案是 IP 位址的清單。 只會記錄傳入和傳出清單中 IP 位址的封包。<br/>**/loglevel [ <Eventtype> ]**<br/>判斷哪些類型的事件會記錄在 Dns .log 檔案中。 每個事件種類都是以十六進位數位來表示。 如果您想要在記錄檔中有多個事件，請使用十六進位新增來加入值，然後輸入總和。<br/>**0x0**<br/>DNS 伺服器不會建立記錄檔。 這是預設專案。<br/>**0x10**<br/>記錄查詢。<br/>**0x10**<br/>記錄通知。<br/>**0x20**<br/>記錄更新。<br/>**0xFE**<br/>記錄 nonquery 的交易。<br/>**0x100**<br/>記錄問題交易。<br/>**0x200**<br/>記錄解答。<br/>**0x1000**<br/>記錄傳送封包。<br/>**0x2000**<br/>記錄接收封包。<br/>**0x4000**<br/>記錄使用者資料包協定（UDP）封包。<br/>**0x8000**<br/>記錄傳輸控制通訊協定（TCP）封包。<br/>**0xFFFF**<br/>記錄所有封包。<br/>**0x10000**<br/>記錄 active directory 寫入交易。<br/>**0x20000**<br/>記錄 active directory 更新交易。<br/>**0x1000000**<br/>記錄完整封包。<br/>**0x80000000**<br/>記錄寫入交易。<br/>**/maxcachesize**<br/>指定 DNS 伺服器的記憶體快取大小上限（以 kb 為單位）。<br/>**/maxcachettl [ <seconds> ]**<br/>決定記錄儲存在快取中的秒數（0x0-0xFFFFFFFF）。 如果使用**0x0**設定，DNS 伺服器就不會快取記錄。 預設設定為**0x15180** （86400秒或1天）。<br/>**/maxnegativecachettl [ <seconds> ]**<br/>指定在查詢中記錄負面回應的秒數（0x1-0xFFFFFFFF）會保留儲存在 DNS 快取中。 預設設定為 [ **0x384** （900秒）]。<br/>**/namecheckflag [0 | 1 | 2 | 3]**<br/>指定檢查 DNS 名稱時使用的字元標準。<br/>**0**<br/>使用符合網際網路工程任務推動小組（IETF）要求建議（Rfc）的 ANSI 字元。<br/>**1**<br/>會使用不一定符合 IETF Rfc 的 ANSI 字元。<br/>**2**<br/>使用多位元組的 UCS 轉換格式8（UTF-8）字元。 這是預設值。<br/>**3**<br/>會使用所有字元。<br/>**/norecursion [0 | 1]**<br/>判斷 DNS 伺服器是否執行遞迴名稱解析。<br/>**0**<br/>如果要求在查詢中，DNS 伺服器會執行遞迴名稱解析。 這是預設值。<br/>**1**<br/>DNS 伺服器不會執行遞迴名稱解析。<br/>**/notcp**<br/>這個參數已過時，在目前的 Windows Server 版本中並沒有任何作用。<br/>**/recursionretry [ <seconds> ]**<br/>決定 DNS 伺服器在再次嘗試連線到遠端伺服器之前等待的秒數（0x1-0xFFFFFFFF）。 預設設定為0x3 （三秒）。 當遞迴發生在緩慢的廣域網路（WAN）連結上時，應該增加此值。<br/>**/recursiontimeout [ <seconds> ]**<br/>決定 DNS 伺服器在停嘗試連接遠端伺服器之前等待的秒數（0x1-0xFFFFFFFF）。 設定的範圍是從**0x1**到**0xffffffff**。 預設設定為**0xF** （15秒）。 當透過慢速 WAN 連結進行遞迴時，應該增加此值。<br/>**/roundrobin [0 | 1]**<br/>決定當伺服器具有相同名稱的多個主機記錄時，傳回主機記錄的順序。<br/>0<br/>DNS 伺服器不會使用迴圈配置資源。 相反地，它會傳回第一筆記錄給每個查詢。<br/>**1**<br/>DNS 伺服器會在其從頂端傳回的記錄中，旋轉到相符記錄清單的底部。 這是預設值。<br/>**/rpcprotocol [0x0 | 0x1 | 0x2 | 0x4 | 0xFFFFFFFF]**<br/>指定遠端程序呼叫（RPC）從 DNS 伺服器建立連線時所使用的通訊協定。<br/>**0x0**<br/>停用 DNS 的 RPC。<br/>**0x1**<br/>使用 TCP/IP。<br/>**0x2**<br/>使用具名管道。<br/>**0x4**<br/>使用本機程序呼叫（LPC）。<br/>**0xFFFFFFFF**<br/>所有通訊協定。 這是預設值。<br/>**/scavenginginterval [ <hours> ]**<br/>判斷 DNS 伺服器的清除功能是否已啟用，並設定清除迴圈之間的時數（0x0-0xFFFFFFFF）。 預設設定為 [ **0x0**]，這會停用 DNS 伺服器的清除。 大於**0x0**的設定會啟用伺服器的清除，並設定清除週期之間的時數。<br/>**/secureresponses [0 | 1]**<br/>判斷 DNS 是否篩選儲存在快取中的記錄。<br/>**0**<br/>將所有對名稱查詢的回應儲存至快取。 這是預設值。<br/>**1**<br/>只將屬於相同 DNS 子樹的記錄儲存至快取。<br/>**/sendport [ <port> ]**<br/>指定 DNS 用來將遞迴查詢傳送至其他 DNS 伺服器的埠號碼（0x0-0xFFFFFFFF）。 預設設定為 [ **0x0**]，表示會隨機選取埠號碼。<br/>**/serverlevelplugindll [ <Dllpath> ]**<br/>指定自訂外掛程式的路徑。 當*Dllpath*指定有效 DNS 伺服器外掛程式的完整路徑名稱時，dns 伺服器會呼叫外掛程式中的函式，以解析不在所有本機裝載區域範圍內的名稱查詢。 如果查詢的名稱超出外掛程式的範圍，DNS 伺服器會依照設定的方式，使用轉送或遞迴來執行名稱解析。 如果未指定*Dllpath* ，則 DNS 伺服器會在先前已設定自訂外掛程式時，停止使用自訂外掛程式。<br/>**/strictfileparsing [0 | 1]**<br/>判斷 DNS 伺服器在載入區域時遇到錯誤記錄時，&#39;s 行為。<br/>**0**<br/>即使伺服器遇到錯誤記錄，DNS 伺服器仍會繼續載入區域。 此錯誤會記錄在 DNS 記錄檔中。 這是預設值。<br/>**1**<br/>DNS 伺服器會停止載入區域，並在 DNS 記錄檔中記錄錯誤。<br/>**/updateoptions<RecordValue>**<br/>禁止動態更新指定類型的記錄。 如果您想要在記錄中禁止一個以上的記錄類型，請使用十六進位新增來加入值，然後輸入總和。<br/>**0x0**<br/>不會限制任何記錄類型。<br/>**0x1**<br/>排除啟動授權（SOA）資源記錄。<br/>**0x2**<br/>排除名稱伺服器（NS）資源記錄。<br/>**0x4**<br/>排除名稱伺服器（NS）資源記錄的委派。<br/>**0x8**<br/>排除伺服器主機記錄。<br/>**0x100**<br/>在安全動態更新期間，會排除啟動授權（SOA）資源記錄。<br/>**0x200**<br/>在安全動態更新期間，會排除根名稱伺服器（NS）資源記錄。<br/>**0x30F**<br/>在標準動態更新期間，會排除名稱伺服器（NS）資源記錄、啟動授權（SOA）資源記錄，以及伺服器主機記錄。 在安全動態更新期間，會排除根名稱伺服器（NS）資源記錄和啟動授權（SOA）資源記錄。 允許委派和伺服器主機更新。<br/>**0x400**<br/>在安全動態更新期間，會排除委派名稱伺服器（NS）資源記錄。<br/>**0x800**<br/>在安全動態更新期間，會排除伺服器主機記錄。<br/>**0x1000000**<br/>排除委派簽署者（DS）記錄。<br/>**0x80000000**<br/>停用 DNS 動態更新。<br/>**/writeauthorityns [0 | 1]**<br/>決定 DNS 伺服器何時將名稱伺服器（NS）資源記錄寫入回應的授權區段中。<br/>**0**<br/>僅在參考的 [授權] 區段中寫入名稱伺服器（NS）資源記錄。 這種設定符合 Rfc 1034、功能變數名稱概念和設備，以及 Rfc 2181，會向 DNS 規格說明。 這是預設值。<br/>**1**<br/>在所有成功的授權回應的 [授權] 區段中寫入名稱伺服器（NS）資源記錄。<br/>**/xfrconnecttimeout [ <seconds> ]**<br/>決定主要 DNS 伺服器等候其次要伺服器傳送回應的秒數（0x0-0xFFFFFFFF）。 預設值為**0x1E** （30秒）。 超時值過期之後，連接就會終止。<br/># # # # 區域層級語法<br/><code>dnscmd /config &lt;Parameters&gt;</code><br/># # # # dnscmd/config<br/>修改指定區域的設定。<br/># # # # # 個參數<br/>**<Parameters>**<br/>指定設定、區功能變數名稱稱，以及做為選項（值）。 參數值使用此語法： *ZoneName 參數*[*值*]<br/>本節的其餘部分會記載下列參數值：<br/>-   **/aging**<br/>-   **/allownsrecordsautocreation**<br/>-   **/allowupdate**<br/>-   **/forwarderslave**<br/>-   **/forwardertimeout**<br/>-   **/norefreshinterval**<br/>-   **/refreshinterval**<br/>-   **/securesecondaries**<br/>**/aging<ZoneName>**<br/>啟用或停用特定區域中的清除。<br/>**/allownsrecordsautocreation <ZoneName> [ <Value> ]**<br/>覆寫 DNS 伺服器&#39;s 名稱伺服器（NS）資源記錄 autocreation 設定。 先前為此區域註冊的名稱伺服器（NS）資源記錄不會受到影響。 因此，如果您不想要的話，必須手動將它們移除。<br/>**/allowupdate<ZoneName>**<br/>判斷指定的區域是否接受動態更新。<br/>**/forwarderslave<ZoneName>**<br/>覆寫 DNS 伺服器 **/isslave**設定。<br/>**/forwardertimeout<ZoneName>**<br/>決定 DNS 區域在嘗試另一個轉寄站之前，等待轉寄站回應的秒數。 這個值會覆寫在伺服器層級設定的值。<br/>**/norefreshinterval<ZoneName>**<br/>設定區域的時間間隔，在這段期間內，不會有任何重新整理可以動態更新指定區域中的 DNS 記錄。<br/>**/refreshinterval<ZoneName>**<br/>設定區域的時間間隔，在這段期間內，重新整理可以動態更新指定區域中的 DNS 記錄。<br/>**/securesecondaries<ZoneName>**<br/>決定哪些次要伺服器可以從這個區域的主伺服器接收區域更新。<br/># # # # 備註<br/>-區功能變數名稱稱必須僅針對區域層級參數來指定。<br/>### <a name=BKMK_4></a>dnscmd/createbuiltindirectorypartitions<br/>建立 DNS 應用程式目錄分割。 安裝 DNS 時，會在樹系和網域層級建立服務的應用程式目錄分割。 使用此命令來建立已刪除或從未建立的 DNS 應用程式目錄分割。 如果沒有參數，此命令會為網域建立內建的 DNS 目錄分割。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /createbuiltindirectorypartitions [/forest] [/alldomains]</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**/forest**<br/>建立樹系的 DNS 目錄分割。<br/>**/alldomains**<br/>為樹系中的所有網域建立 DNS 磁碟分割。<br/>### <a name=BKMK_5></a>dnscmd/createdirectorypartition<br/>建立 DNS 應用程式目錄分割。 安裝 DNS 時，會在樹系和網域層級建立服務的應用程式目錄分割。 此操作會建立其他 DNS 應用程式目錄分割。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /createdirectorypartition &lt;PartitionFQDN&gt;</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<PartitionFQDN>**<br/>將建立的 DNS 應用程式目錄分割的 FQDN。<br/>### <a name=BKMK_6></a>dnscmd/deletedirectorypartition<br/>移除現有的 DNS 應用程式目錄分割。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /deletedirectorypartition &lt;PartitionFQDN&gt;</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<PartitionFQDN>**<br/>將移除之 DNS 應用程式目錄分割的 FQDN。<br/>### <a name=BKMK_7></a>dnscmd/directorypartitioninfo<br/>列出指定之 DNS 應用程式目錄分割的相關資訊。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /directorypartitioninfo &lt;PartitionFQDN&gt; [/detail]</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<PartitionFQDN>**<br/>DNS 應用程式目錄分割的 FQDN。<br/>**/detail**<br/>列出應用程式目錄分割的所有相關資訊。<br/>### <a name=BKMK_8></a>dnscmd/enlistdirectorypartition<br/>將 DNS 伺服器新增至指定的目錄分割&#39;s 複本集。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /enlistdirectorypartition &lt;PartitionFQDN&gt;</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<PartitionFQDN>**<br/>DNS 應用程式目錄分割的 FQDN。<br/>### <a name=BKMK_9></a>dnscmd/enumdirectorypartitions<br/>列出指定之伺服器的 DNS 應用程式目錄分割。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /enumdirectorypartitions [/custom]</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**/custom**<br/>只列出使用者建立的目錄分割。<br/>### <a name=BKMK_10></a>dnscmd/enumrecords<br/>列出 DNS 區域中指定節點的資源記錄。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /enumrecords &lt;ZoneName&gt; &lt;NodeName&gt; [/type &lt;RRtype&gt; &lt;Rrdata&gt;] [/authority] [/glue] [/additional] [/node | /child | /startchild&lt;ChildName&gt;] [/continue | /detail]</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定您計畫管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**/enumrecords**<br/>列出指定區域中的資源記錄。<br/>**<ZoneName>**<br/>指定資源記錄所屬的區功能變數名稱稱。<br/>**<NodeName>**<br/>指定資源記錄的節點名稱。<br/>**/type <RRtype><Rrdata>**<br/>指定要列出的資源記錄類型和預期的資料類型：<br/>**<RRtype>**<br/>指定要列出的資源記錄類型。<br/>**<Rrdata>**<br/>指定預期記錄的資料類型。<br/>**/authority**<br/>包含授權的資料。<br/>**/glue**<br/>包含粘連資料。<br/>**/additional**<br/>包含列出之資源記錄的所有其他資訊。<br/>**{/node |/child |/startchild <ChildName> }**<br/>篩選或新增資訊至資源記錄顯示：<br/>**/node**<br/>只列出指定節點的資源記錄。<br/>**/child**<br/>只列出指定之子域的資源記錄。<br/>**/startchild<ChildName>**<br/>在指定的子域開始清單。<br/>**/continue |/detail**<br/>指定傳回資料的顯示方式。<br/>**/continue**<br/>僅列出具有其類型和資料的資源記錄。<br/>**/detail**<br/>列出資源記錄的所有相關資訊。<br/># # # # 範例使用方式<br/><code>dnscmd /enumrecords test.contoso.com test /additional</code><br/>### <a name=BKMK_11></a>dnscmd/enumzones<br/>列出存在於指定 DNS 伺服器上的區域。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /enumzones [/primary | /secondary | /forwarder | /stub | /cache | /auto-created] [/forward | /reverse | /ds | /file] [/domaindirectorypartition | /forestdirectorypartition | /customdirectorypartition | /legacydirectorypartition | /directorypartition &lt;PartitionFQDN&gt;]</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**/primary |/secondary |/forwarder |/stub |/cache |/auto-created**<br/>篩選要顯示的區欄位型別：<br/>**/primary**<br/>列出所有的區域，也就是標準主要區域或 active directory 整合區域。<br/>**/secondary**<br/>列出所有標準次要區域。<br/>**/forwarder**<br/>列出將無法解析的查詢轉寄到另一部 DNS 伺服器的區域。<br/>**/stub**<br/>列出所有存根區域。<br/>**/cache**<br/>僅列出已載入快取中的區域。<br/>**/auto-created**<br/>列出在 DNS 伺服器安裝期間自動建立的區域。<br/>**/forward |/reverse |/ds |/file**<br/>指定要顯示之區欄位型別的其他篩選準則：<br/>**/forward**<br/>列出正向對應區域。<br/>**/reverse**<br/>列出反向對應區域。<br/>**/ds**<br/>列出 active directory 整合區域。<br/>**/file**<br/>列出受檔案支援的區域。<br/>**/domaindirectorypartition**<br/>列出儲存在網域目錄分割中的區域。<br/>**/forestdirectorypartition**<br/>列出儲存在樹系 DNS 應用程式目錄分割中的區域。<br/>**/customdirectorypartition**<br/>列出儲存在使用者定義的應用程式目錄分割中的所有區域。<br/>**/legacydirectorypartition**<br/>列出儲存在網域目錄分割中的所有區域。<br/>**/directorypartition q<PartitionFQDN>**<br/>列出儲存在指定目錄分割中的所有區域。<br/># # # # 備註<br/>- **Enumzones**參數會作為區域清單的篩選準則。 如果未指定任何篩選準則，則會傳回完整的區域清單。 當指定篩選器時，只有符合該&#39;篩選準則的區域才會包含在傳回的區域清單中。<br/># # # # 範例<br/>請參閱 <href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 資料原始來源 =[範例2：在 dns 伺服器上顯示完整的區域清單](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)>範例2：在 Dns 伺服器上顯示完整的區域清單， </a> 或 <href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 資料原始來源 =[範例3：顯示](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)dns 伺服器上的由區域清單>範例3：在 dns 伺服器上顯示由的區域清單 </a> 。<br/>### <a name=BKMK_25a></a>dnscmd/exportsettings<br/>建立文字檔，其中列出 DNS 伺服器的設定詳細資料。 文字檔的名稱是 DnsSettings .txt。 它位於伺服器的%systemroot%\system32\dns 目錄中。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /exportsettings</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以本機電腦語法、IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/># # # # 備註<br/>-您可以使用**dnscmd/exportsettings**所建立之檔案中的資訊來疑難排解設定問題，或確保您已將多部伺服器設為相同。<br/>### <a name=BKMK_12></a>dnscmd/info<br/>顯示指定伺服器之登錄的 DNS 區段中的設定： **HKEY_LOCAL_MACHINE \system\currentcontrolset\services\dns\parameters**<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /info [&lt;Setting&gt;]</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<Setting>**<br/>您可以個別指定**info**命令所傳回的任何設定。 如果未指定設定，則會傳回一般設定的報告。<br/># # # # 備註<br/>-此命令會顯示位於 DNS 伺服器層級的登錄設定。 若要顯示區域層級的登錄設定，請使用<a href=#BKMK_26 data-raw-source=[zoneinfo](#BKMK_26)>zoneinfo</a>命令。 若要查看可使用此命令顯示的設定清單，請參閱<a href=#BKMK_3 data-raw-source=[config](#BKMK_3)>config</a>描述。<br/># # # # 範例<br/>請參閱 <href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 資料原始來源 =[範例4：顯示來自 dns 伺服器的 IsSlave 設定](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)>範例4：從 Dns 伺服器顯示 IsSlave 設定 </a> 或 <href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 資料原始來源 =[範例5：顯示來自 Dns 伺服器的 Recursiontimeout 設定](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)>範例5：顯示來自 dns 伺服器的 Recursiontimeout 設定 </a> 。<br/>### <a name=BKMK_29a></a>dnscmd/ipvalidate<br/>測試 IP 位址是否可識別正常運作的 DNS 伺服器，或 DNS 伺服器是否可以做為轉寄站、根提示伺服器，或特定區域的主伺服器。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /ipvalidate &lt;Context&gt; [&lt;ZoneName&gt;] [[&lt;IPaddress&gt;]]</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以本機電腦語法、IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<Context>**<br/>指定要執行的測試類型。 您可以指定下列任何一項測試：<br/>-   **/dnsservers**會測試具有您所指定位址的電腦是否為正常運作的 DNS 伺服器。<br/>-   **/forwarders**會測試您指定的位址是否可識別可作為轉寄站的 DNS 伺服器。<br/>-   **/roothints**會測試您指定的位址是否識別出可作為根提示名稱伺服器的 DNS 伺服器。<br/>-   **/zonemasters**測試您指定的位址會識別屬於*ZoneName*之主伺服器的 DNS 伺服器。<br/>**<ZoneName>**<br/>識別區域。 請使用此參數搭配 **/zonemasters**參數。<br/>**<IPaddress>**<br/>指定命令要測試的 IP 位址。<br/># # # # 範例使用方式<br/><pre>dnscmd dnssvr1.contoso.com /ipvalidate /dnsservers 10.0.0.1 10.0.0.2
dnscmd dnssvr1.contoso.com /ipvalidate /zonemasters corp.contoso.com 10.0.0.2</pre><br/>### <a name=BKMK_13></a>dnscmd/nodedelete<br/>刪除指定主控制項的所有記錄。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /nodedelete &lt;ZoneName&gt; &lt;NodeName&gt; [/tree] [/f]</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<ZoneName>**<br/>指定區域的名稱。<br/>**<NodeName>**<br/>指定要刪除之節點的主機名稱。<br/>**/tree**<br/>刪除所有子記錄。<br/>**/f**<br/>在不要求確認的情況下執行命令。<br/># # # # 範例<br/>請參閱 <href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 資料原始來源 =[範例6：刪除節點中的記錄](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)>範例6：刪除節點中的記錄 </a> 。<br/>### <a name=BKMK_14></a>dnscmd/recordadd<br/>將記錄新增至 DNS 伺服器中的指定區域。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /recordadd &lt;ZoneName&gt; &lt;NodeName&gt; &lt;RRtype&gt; &lt;Rrdata&gt;</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以本機電腦語法、IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<ZoneName>**<br/>指定記錄所在的區域。<br/>**<NodeName>**<br/>指定區域中的特定節點。<br/>**<RRtype>**<br/>指定要加入之記錄的類型。<br/>**<Rrdata>**<br/>指定預期的資料類型。<br/>&gt; [!NOTE]<br/>&gt;當您新增記錄時，請確定您使用正確的資料類型和資料格式。 如需資源記錄類型和適當資料類型的清單，請參閱 <href = https://technet.microsoft.com/library/cc758321(v=ws.10).aspx 資料原始來源 =[資源記錄參考](https://technet.microsoft.com/library/cc758321(v=ws.10).aspx)>資源記錄參考 </a> 。<br/># # # # 範例使用方式<br/><pre>dnscmd dnssvr1.contoso.com /recordadd test A 10.0.0.5
dnscmd /recordadd test.contoso.com test MX 10 mailserver.test.contoso.com</pre><br/>### <a name=BKMK_15></a>dnscmd/recorddelete<br/>從指定的區域刪除資源記錄。<br/># # # # 語法<br/><code>dnscmd &lt;ServerName&gt; /recorddelete &lt;ZoneName&gt; &lt;NodeName&gt; &lt;RRtype&gt; &lt;Rrdata&gt;[/f]</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<ZoneName>**<br/>指定資源記錄所在的區域。<br/>**<NodeName>**<br/>指定主控件的名稱。<br/>**<RRtype>**<br/>指定要刪除的資源記錄類型。<br/>**<Rrdata>**<br/>指定預期的資料類型。<br/>**/f**<br/>在不要求確認的情況下執行命令：<br/>-因為節點可以有一個以上的資源記錄，所以此命令會要求您非常明確地瞭解您想要刪除的資源記錄類型。<br/>-如果您指定資料類型，但未指定資源記錄資料類型，則會刪除具有指定節點之特定資料類型的所有記錄。<br/># # # # 範例使用方式<br/><code>dnscmd /recorddelete test.contoso.com test MX 10 mailserver.test.contoso.com</code><br/>### <a name=BKMK_16></a>dnscmd/resetforwarders<br/>選取或重設 DNS 伺服器無法在本機解析 DNS 查詢時，將其轉送的 IP 位址。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /resetforwarders [&lt;IPaddress&gt; [,&lt;IPaddress&gt;]...][/timeout &lt;timeOut&gt;] [/slave|/noslave]</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<IPaddress>**<br/>列出 DNS 伺服器轉送未解析查詢的 IP 位址。<br/>**/timeout<timeOut>**<br/>設定 DNS 伺服器等候轉寄站回應的秒數。 根據預設，此值為5秒。<br/>**/slave |/noslave**<br/>判斷如果轉寄站無法解析查詢，DNS 伺服器是否執行自己的反復查詢：<br/>**/slave**<br/>如果轉寄站無法解析查詢，則會防止 DNS 伺服器執行自己的反復查詢。<br/>**/noslave**<br/>如果轉寄站無法解析查詢，允許 DNS 伺服器執行自己的反復查詢。 這是預設值。<br/># # # # 備註<br/>-根據預設，DNS 伺服器無法解析查詢時，會執行反復查詢。<br/>-藉由使用**resetforwarders**命令來設定 IP 位址，會使 dns 伺服器對指定 IP 位址的 dns 伺服器執行遞迴查詢。 如果轉寄站無法解析查詢，則 DNS 伺服器可以執行自己的反復查詢。<br/>-如果使用 **/slave**參數，DNS 伺服器不會執行自己的反復查詢。 這表示 DNS 伺服器只會將未解析的查詢轉送到清單中的 DNS 伺服器，如果轉寄站無法解決它們，則不會嘗試反復查詢。 將一個 IP 位址設定為 DNS 伺服器的轉寄站，會更有效率。 您可以對網路中的內部伺服器使用**resetforwarders**命令，將其無法解析的查詢轉寄到具有外部連線的一部 DNS 伺服器。<br/>-列出轉寄站的 IP 位址兩次，會導致 DNS 伺服器嘗試轉送到該伺服器兩次。<br/># # # # 範例使用方式<br/><pre>dnscmd dnssvr1.contoso.com /resetforwarders 10.0.0.1 /timeout 7 /slave
dnscmd dnssvr1.contoso.com /resetforwarders /noslave</pre><br/>### <a name=BKMK_17></a>dnscmd/resetlistenaddresses<br/>指定伺服器上接聽 DNS 用戶端要求的 IP 位址。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /resetlistenaddresses [&lt;listenaddress&gt;]</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<listenaddress>**<br/>指定 DNS 伺服器上接聽 DNS 用戶端要求的 IP 位址。 如果未指定接聽位址，伺服器上的所有 IP 位址都會接聽用戶端要求。<br/># # # # 備註<br/>-根據預設，DNS 伺服器上的所有 IP 位址都會接聽用戶端 DNS 要求。<br/># # # # 範例使用方式<br/><code>dnscmd dnssvr1.contoso.com /resetlistenaddresses 10.0.0.1</code><br/>### <a name=BKMK_18></a>dnscmd/startscavenging<br/>告訴 DNS 伺服器在指定的 DNS 伺服器中嘗試立即搜尋過時的資源記錄。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /startscavenging</code><br/># # # # 參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/># # # # 備註<br/>-成功完成此命令會立即開始清除。<br/>-雖然開始清除的命令似乎已順利完成，但除非符合下列前置條件，否則清除不會啟動：<br/>    -會同時啟用伺服器和區域的清除。<br/>    -區域已啟動。<br/>    -資源記錄具有時間戳記。<br/>-如需如何為伺服器啟用清除的詳細資訊，請參閱<a href=#BKMK_3 data-raw-source=[config](#BKMK_3)>config</a>區段中伺服器層級語法底下的**scavenginginterval**參數。<br/>-如需如何啟用區域清除功能的相關資訊，請參閱<a href=#BKMK_3 data-raw-source=[config](#BKMK_3)>config</a>區段中區域層級語法底下的**過時**參數。<br/>-如需如何啟動已暫停區域的詳細資訊，請參閱<a href=#BKMK_35 data-raw-source=[zoneresume](#BKMK_35)>zoneresume</a>一節。<br/>-如需如何檢查時間戳記之資源記錄的相關資訊，請參閱<a href=#BKMK_1 data-raw-source=[ageallrecords](#BKMK_1)>ageallrecords</a>一節。<br/>-如果清除失敗，則不會出現警告訊息。<br/># # # # 範例使用方式<br/><code>dnscmd dnssvr1.contoso.com /startscavenging</code><br/>### <a name=BKMK_19></a>dnscmd/statistics<br/>顯示或清除指定之 DNS 伺服器的資料。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /statistics [&lt;StatID&gt;] [/clear]</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<StatID>**<br/>指定要顯示的統計資料或統計資料的組合。 識別編號是用來識別統計資料。 如果未指定統計資料識別碼編號，則會顯示所有統計資料。<br/>以下是可指定的數位清單，以及顯示的對應統計資料：<br/>**00000001**<br/>time<br/>**00000002**<br/>查詢<br/>**00000004**<br/>查詢2<br/>**00000008**<br/>Recurse<br/>**00000010**<br/>Master<br/>**00000020**<br/>次要<br/>**00000040**<br/>WINS<br/>**00000100**<br/>更新<br/>**00000200**<br/>SkwanSec<br/>**00000400**<br/>Ds<br/>**00010000**<br/>記憶體<br/>**00100000**<br/>PacketMem<br/>**00040000**<br/>Dbase<br/>**00080000**<br/>記錄<br/>**00200000**<br/>NbstatMem<br/>**/clear**<br/>將指定的統計資料計數器重設為零。<br/># # # # 備註<br/>- **Statistics**命令會顯示啟動或繼續時，在 DNS 伺服器上開始的計數器。<br/># # # # 範例<br/>請參閱 <href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 資料原始來源 =[範例7：顯示 dns 伺服器的時間統計](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)資料>範例7：顯示 dns 伺服器的時間統計資料， </a> 或 <href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 資料原始來源 =[範例8：顯示 dns 伺服器的 NbstatMem 統計](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)資料>範例8：顯示 dns 伺服器的 NbstatMem 統計資料 </a> 。<br/>### <a name=BKMK_20></a>dnscmd/unenlistdirectorypartition<br/>從指定的目錄分割&#39;s 複本集移除 DNS 伺服器。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /unenlistdirectorypartition &lt;PartitionFQDN&gt;</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<PartitionFQDN>**<br/>將移除之 DNS 應用程式目錄分割的 FQDN。<br/>### <a name=BKMK_21></a>dnscmd/writebackfiles<br/>檢查 DNS 伺服器記憶體的變更，並將它們寫入持續性儲存體。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /writebackfiles [&lt;ZoneName&gt;]</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<ZoneName>**<br/>指定要更新之區域的名稱。<br/># # # # 備註<br/>- **Writebackfiles**命令會更新所有的中途區域或指定的區域。 當記憶體中的變更尚未寫入至持續性儲存體時，區域就會變髒。 這是可檢查所有區域的伺服器層級作業。 您可以在這項作業中指定一個區域，也可以使用<a href=#BKMK_37 data-raw-source=[zonewriteback](#BKMK_37)>zonewriteback</a>作業。<br/># # # # 範例使用方式<br/><code>dnscmd dnssvr1.contoso.com /writebackfiles</code><br/>### <a name=BKMK_22></a>dnscmd/zoneadd<br/>將區域新增至 DNS 伺服器。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /zoneadd &lt;ZoneName&gt; &lt;Zonetype&gt; [/dp &lt;FQDN&gt;| {/domain|/enterprise|/legacy}]</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<ZoneName>**<br/>指定區域的名稱。<br/>**<Zonetype>**<br/>指定要建立的區欄位型別。 每個區欄位型別都有不同的必要參數：<br/>**/dsprimary**<br/>建立 active directory 整合區域。<br/>**/primary/file<FileName>**<br/>建立標準主要區域，並指定要儲存區域資訊的檔案名。<br/>**/secondary <MasterIPaddress> [ <MasterIPaddress> ...]**<br/>建立標準次要區域。<br/>**/stub <MasterIPaddress> [ <MasterIPaddress> ...]/file<FileName>**<br/>建立檔案支援的存根區域。<br/>**/dsstub <MasterIPaddress> [ <MasterIPaddress> ...]**<br/>建立 active directory 整合存根區域。<br/>**/forwarder <MasterIPaddress> [ <MasterIPaddress> ] .../file<FileName>**<br/>指定建立的區域將無法解析的查詢轉送到另一部 DNS 伺服器。<br/>**/dsforwarder**<br/>指定建立的 active directory 整合區域將無法解析的查詢轉寄到另一部 DNS 伺服器。<br/>**/dp <FQDN> {/domain |/enterprise |/legacy}**<br/>指定要儲存區域的目錄分割。<br/>**<FQDN>**<br/>指定目錄分割的 FQDN。<br/>**/domain**<br/>將區域儲存在網域目錄分割上。<br/>**/enterprise**<br/>將區域儲存在企業目錄磁碟分割上。<br/>**/legacy**<br/>將區域儲存在舊版目錄磁碟分割上。<br/># # # # 備註<br/>-指定 **/forwarder**或 **/dsforwarder**的區欄位型別時，會建立執行條件式轉送的區域。<br/># # # # 範例使用方式<br/><pre>dnscmd dnssvr1.contoso.com /zoneadd test.contoso.com /dsprimary
dnscmd dnssvr1.contoso.com /zoneadd secondtest.contoso.com /secondary 10.0.0.2</pre><br/>### <a name=BKMK_23></a>dnscmd/zonechangedirectorypartition<br/>變更指定區域所在的目錄分割。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /zonechangedirectorypartition &lt;ZoneName&gt;] {[&lt;NewPartitionName&gt;] | [&lt;Zonetype&gt;] }</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<ZoneName>**<br/>區域所在的目前目錄分割的 FQDN。<br/>**<NewPartitionName>**<br/>要將區域移至其中之目錄分割的 FQDN。<br/>**<Zonetype>**<br/>指定要將區域移至其中的目錄分割類型。<br/>**/domain**<br/>將區域移至內建網域目錄分割。<br/>**/forest**<br/>將區域移至內建樹系目錄分割。<br/>**/legacy**<br/>將區域移至 active directory 網域控制站所建立的目錄分割。 原生模式不需要這些目錄分割。<br/>### <a name=BKMK_24></a>dnscmd/zonedelete<br/>刪除指定的區域。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /zonedelete &lt;ZoneName&gt; [/dsdel] [/f]</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<ZoneName>**<br/>指定要刪除之區域的名稱。<br/>**/dsdel**<br/>從 AD DS 刪除區域。<br/>**/f**<br/>執行命令而不要求確認。<br/># # # # 範例<br/>請參閱 <href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 資料原始來源 =[範例9：從 dns 伺服器刪除區域](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)>範例9：從 dns 伺服器刪除區域 </a> 。<br/>### <a name=BKMK_25></a>dnscmd/zoneexport<br/>建立文字檔，其中列出指定區域的資源記錄。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /zoneexport &lt;ZoneName&gt; &lt;ZoneExportFile&gt;</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以本機電腦語法、IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<ZoneName>**<br/>指定區域的名稱。<br/>**<ZoneExportFile>**<br/>指定要建立的檔案名。<br/># # # # 備註<br/>- **Zoneexport**作業會為 active directory 整合區域建立資源記錄的檔案，以供疑難排解之用。 根據預設，此命令所建立的檔案會放在 DNS 目錄中，預設為% systemroot%/System32/Dns 目錄。<br/># # # # 範例<br/>請參閱 <href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 資料原始來源 =[範例10：將區域資源記錄清單匯出至](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)檔案>範例10：將區域資源記錄清單匯出至檔案 </a> 。<br/>### <a name=BKMK_26></a>dnscmd/zoneinfo z<br/>顯示指定區域登錄區段中的設定： **HKEY_LOCAL_MACHINE \System\currentcontrolset\services\dns\parameters\zones \< ZoneName>**<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /zoneinfo &lt;ZoneName&gt;  [&lt;Setting&gt;]</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<ZoneName>**<br/>指定區域的名稱。<br/>**<Setting>**<br/>您可以個別指定**zoneinfo**命令所傳回的任何設定。 如果您未指定設定，則會傳回所有設定。<br/># # # # 備註<br/>- **Zoneinfo**命令會顯示位於 DNS 區域層級的登錄設定，位於**HKEY_LOCAL_MACHINE \system\currentcontrolset\services\dns\parameters\zones \< ZoneName>**。<br/>-若要顯示伺服器層級的登錄設定，請使用<a href=#BKMK_12 data-raw-source=[info](#BKMK_12)>info</a>命令。<br/>-若要查看您可以使用此命令顯示的設定清單，請參閱<a href=#BKMK_3 data-raw-source=[config](#BKMK_3)>config</a>命令。<br/># # # # 範例<br/>請參閱 <href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 資料原始來源 =[範例11：顯示登錄中的 RefreshInterval 設定](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)>範例11：顯示登錄中的 RefreshInterval 設定， </a> 或 <href = https://technet.microsoft.com/library/cc784399(v=ws.10).aspx 資料原始來源 =[範例12：](https://technet.microsoft.com/library/cc784399(v=ws.10).aspx)顯示登錄中的過時設定>範例12：顯示登錄中的過時設定 </a> 。<br/>### <a name=BKMK_27></a>dnscmd/zonepause<br/>暫停指定的區域，然後忽略查詢要求。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /zonepause &lt;ZoneName&gt;</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<ZoneName>**<br/>指定要暫停之區域的名稱。<br/># # # # 備註<br/>-若要繼續區域並使其在暫停後可供使用，請使用<a href=#BKMK_35 data-raw-source=[zoneresume](#BKMK_35)>zoneresume</a>命令。<br/># # # # 範例使用方式<br/><code>dnscmd dnssvr1.contoso.com /zonepause test.contoso.com</code><br/>### <a name=BKMK_28></a>dnscmd/zoneprint<br/>列出區域中的記錄。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /zoneprint &lt;ZoneName&gt;</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以本機電腦語法、IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<ZoneName>**<br/>識別要列出的區域。<br/>### <a name=BKMK_30></a>dnscmd/zonerefresh<br/>強制從主要區域更新次要 DNS 區域。<br/># # # # 語法<br/><code>dnscmd &lt;ServerName&gt; /zonerefresh &lt;ZoneName&gt;</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<ZoneName>**<br/>指定要重新整理的區功能變數名稱稱。<br/># # # # 備註<br/>- **Zonerefresh**命令會強制檢查主伺服器 s 啟動授權（SOA）資源記錄中的版本號碼。 如果主伺服器上的版本號碼高於次要伺服器&#39;s 版本號碼，就會起始更新次要伺服器的區域轉送。 如果版本號碼相同，則不會進列區域轉送。<br/>-預設會每隔15分鐘執行一次強制檢查。 若要變更預設值，請使用**dnscmd config refreshinterval**命令。<br/># # # # 範例使用方式<br/><code>dnscmd dnssvr1.contoso.com /zonerefresh test.contoso.com</code><br/>### <a name=BKMK_31></a>dnscmd/zonereload<br/>從來源複製區域資訊。<br/># # # # 語法<br/><code>dnscmd &lt;ServerName&gt; /zonereload &lt;ZoneName&gt;</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<ZoneName>**<br/>指定要重載之區域的名稱。<br/># # # # 備註<br/>-如果區域已整合 active directory，它會從 AD DS 重載。<br/>-如果區域是標準的檔案支援區域，則會從檔案重載。<br/># # # # 範例使用方式<br/><code>dnscmd dnssvr1.contoso.com /zonereload test.contoso.com</code><br/>### <a name=BKMK_32></a>dnscmd/zoneresetmasters<br/>將提供區域轉送資訊的主伺服器 IP 位址重設為次要區域。<br/># # # # 語法<br/><code>dnscmd &lt;ServerName&gt; /zoneresetmasters &lt;ZoneName&gt; [/local] [&lt;IPaddress&gt; [&lt;IPaddress&gt;]...]</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<ZoneName>**<br/>指定要重載之區域的名稱。<br/>**/local**<br/>設定本機主要清單。 此參數用於 active directory 整合區域。<br/>**<IPaddress>**<br/>次要區域之主伺服器的 IP 位址。<br/># # # # 備註<br/>-此值原本是在次要區域建立時設定。 在次要伺服器上使用**zoneresetmasters**命令。 如果在主要 DNS 伺服器上設定此值，則不會有任何作用。<br/># # # # 範例使用方式<br/><pre>dnscmd dnssvr1.contoso.com /zoneresetmasters test.contoso.com 10.0.0.1
dnscmd dnssvr1.contoso.com /zoneresetmasters test.contoso.com /local</pre><br/>### <a name=BKMK_33></a>dnscmd/zoneresetscavengeservers<br/>變更可清除指定區域之伺服器的 IP 位址。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /zoneresetscavengeservers &lt;ZoneName&gt; [&lt;IPaddress&gt; [&lt;IPaddress&gt;]...]</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以本機電腦語法、IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<ZoneName>**<br/>識別要清除的區域。<br/>**<IPaddress>**<br/>列出可執行清除之伺服器的 IP 位址。 如果省略此參數，裝載此區域的所有伺服器都可以加以清除。<br/># # # # 備註<br/>-根據預設，裝載區域的所有伺服器都可以清除該區域。<br/>-如果區域裝載于多部 DNS 伺服器上，您可以使用此命令來減少清除區域的次數。<br/>-必須在受此命令影響的 DNS 伺服器和區域上啟用清除。<br/># # # # 範例使用方式<br/><code>dnscmd dnssvr1.contoso.com /zoneresetscavengeservers test.contoso.com 10.0.0.1 10.0.0.2</code><br/>### <a name=BKMK_34></a>dnscmd/zoneresetsecondaries<br/>指定主伺服器要求進列區域轉送時，所回應之次要伺服器的 IP 位址清單。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /zoneresetsecondaries &lt;ZoneName&gt; {/noxfr | /nonsecure | /securens | /securelist &lt;SecurityIPaddresses&gt;} {/nonotify | /notify | /notifylist &lt;NotifyIPaddresses&gt;}</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略 is 參數，則會使用本機伺服器。<br/>**<ZoneName>**<br/>指定將會重設其次要伺服器的區功能變數名稱稱。<br/>**/noxfr |/nonsecure |/securens |/securelist<SecurityIPaddresses>**<br/>指定要求更新的所有或只是部分次要伺服器取得更新。<br/>**/noxfr**<br/>指定不允許區域轉送。<br/>**/nonsecure**<br/>指定授與所有區域轉送要求。<br/>**/securens**<br/>指定只會授與區域的名稱伺服器（NS）資源記錄中所列伺服器的傳輸。<br/>**/securelist**<br/>指定僅將區域轉送授與伺服器清單。 此參數後面必須加上主伺服器所使用的 IP 位址或位址。<br/>**<SecurityIPaddresses>**<br/>列出接收來自主伺服器之區域傳輸的 IP 位址。 這個參數只能搭配 **/securelist**參數使用。<br/>**/nonotify |/notify |/notifylist<NotifyIPaddresses>**<br/>指定只將變更通知傳送到特定次要伺服器：<br/>**/nonotify**<br/>指定不將任何變更通知傳送到次要伺服器。<br/>**/notify**<br/>指定將變更通知傳送到所有次要伺服器。<br/>**/notifylist**<br/>指定變更通知只會傳送至伺服器清單。 此命令後面必須加上主伺服器所使用的 IP 位址或位址。<br/>**<NotifyIPaddresses>**<br/>指定要將變更通知傳送到其中的次要伺服器或伺服器的 IP 位址。 此清單只會搭配 **/notifylist**參數使用。<br/># # # # 備註<br/>-在主伺服器上使用**zoneresetsecondaries**命令，以指定它如何回應來自次要伺服器的區域轉送要求。<br/># # # # 範例使用方式<br/><pre>dnscmd dnssvr1.contoso.com /zoneresetsecondaries test.contoso.com /noxfr /nonotify
dnscmd dnssvr1.contoso.com /zoneresetsecondaries test.contoso.com /securelist 11.0.0.2</pre><br/>### <a name=BKMK_29></a>dnscmd/zoneresettype<br/>變更區域的類型。<br/># # # # 語法<br/><code>dnscmd [&lt;ServerName&gt;] /zoneresettype &lt;ZoneName&gt; &lt;Zonetype&gt; [/overwrite_mem | /overwrite_ds]</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以本機電腦語法、IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<ZoneName>**<br/>識別將變更類型的區域。<br/>**<Zonetype>**<br/>指定要建立的區欄位型別。 每個類型都有不同的必要參數：<br/>**/dsprimary**<br/>建立 active directory 整合區域。<br/>**/primary/file<FileName>**<br/>建立標準主要區域。<br/>**/secondary <MasterIPaddress> [， <MasterIPaddress> ...]**<br/>建立標準次要區域。<br/>**/stub <MasterIPaddress> [， <MasterIPaddress> ...]/file<FileName>**<br/>建立檔案支援的存根區域。<br/>**/dsstub <MasterIPaddress> [， <MasterIPaddress> ...]**<br/>建立 active directory 整合存根區域。<br/>**/forwarder &lt; MasterIPaddress [， <MasterIPaddress> ] .../file<FileName>**<br/>指定建立的區域將無法解析的查詢轉送到另一部 DNS 伺服器。<br/>**/dsforwarder**<br/>指定建立的 active directory 整合區域將無法解析的查詢轉寄到另一部 DNS 伺服器。<br/>**/overwrite_mem |/overwrite_ds**<br/>指定如何覆寫現有的資料：<br/>**/overwrite_mem**<br/>從 AD DS 中的資料覆寫 DNS 資料。<br/>**/overwrite_ds**<br/>覆寫 AD DS 中的現有資料。<br/># # # # 備註<br/>-將區欄位型別設定為 **/dsforwarder**會建立執行條件式轉送的區域。<br/># # # # 範例使用方式<br/><pre>dnscmd dnssvr1.contoso.com /zoneresettype test.contoso.com /primary /file test.contoso.com.dns
dnscmd dnssvr1.contoso.com /zoneresettype second.contoso.com /secondary 10.0.0.2</pre><br/>### <a name=BKMK_35></a>dnscmd/zoneresume<br/>啟動先前已暫停的指定區域。<br/># # # # 語法<br/><code>dnscmd &lt;ServerName&gt; /zoneresume &lt;ZoneName&gt;</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<ZoneName>**<br/>指定要繼續的區功能變數名稱稱。<br/># # # # 備註<br/>-您可以使用此作業來反轉<a href=#BKMK_27 data-raw-source=[zonepause](#BKMK_27)>zonepause</a>作業。<br/># # # # 範例使用方式<br/><code>dnscmd dnssvr1.contoso.com /zoneresume test.contoso.com</code><br/>### <a name=BKMK_36></a>dnscmd/zoneupdatefromds<br/>從 AD DS 更新指定的 active directory 整合區域。<br/># # # # 語法<br/><code>dnscmd &lt;ServerName&gt; /zoneupdatefromds &lt;ZoneName&gt;</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<ZoneName>**<br/>指定要更新之區域的名稱。<br/># # # # 備註<br/>-active directory 整合區域預設會每隔五分鐘執行此更新。 若要變更此參數，請使用**dnscmd config dspollinginterval**命令。<br/># # # # 範例使用方式<br/><code>dnscmd dnssvr1.contoso.com /zoneupdatefromds</code><br/>### <a name=BKMK_37></a>dnscmd/zonewriteback<br/>檢查 DNS 伺服器記憶體是否有與指定區域相關的變更，並將它們寫入至持續性儲存體。<br/># # # # 語法<br/><code>dnscmd &lt;ServerName&gt; /zonewriteback &lt;ZoneName&gt;</code><br/># # # # # 個參數<br/>**<ServerName>**<br/>指定要管理的 DNS 伺服器，以 IP 位址、FQDN 或主機名稱表示。 如果省略此參數，則會使用本機伺服器。<br/>**<ZoneName>**<br/>指定要更新之區域的名稱。<br/># # # # 備註<br/>-這是區域層級的作業。 您可以使用<a href=#BKMK_21 data-raw-source=[writebackfiles](#BKMK_21)>writebackfiles</a>操作來更新 DNS 伺服器上的所有區域。<br/># # # # 範例使用方式<br/><code>dnscmd dnssvr1.contoso.com /zonewriteback test.contoso.com</code>
