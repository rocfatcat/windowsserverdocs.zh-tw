---
title: Servermanagercmd
description: '* * * * 的參考文章'
ms.topic: reference
ms.assetid: 507c4b87-8e13-4872-8b34-0c7508eecbc1
ms.author: lizross
author: eross-msft
manager: mtillman
ms.date: 07/11/2018
ms.openlocfilehash: d033959075f8ff5dd6e70035a68ea6dc2bd0ef3b
ms.sourcegitcommit: db2d46842c68813d043738d6523f13d8454fc972
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/10/2020
ms.locfileid: "89637795"
---
# <a name="servermanagercmd"></a>Servermanagercmd

> 適用于： Windows Server (半年通道) 、Windows Server 2019、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

> [!IMPORTANT]
> 此命令僅適用于執行 Windows Server 2008 或 Windows Server 2008 R2 的伺服器。 **Servermanagercmd.exe** 已被取代，而且無法在 Windows Server 2012 中使用。 如需有關如何在 Windows Server 2012 中安裝或移除角色、角色服務和功能的詳細資訊，請參閱 Microsoft TechNet 上的 [安裝或卸載角色、角色服務和功能](https://go.microsoft.com/fwlink/?LinkID=239563) 。

安裝和移除角色、角色服務和功能。 也會顯示可用的所有角色、角色服務和功能的清單，並顯示安裝在這部電腦上的角色。 如需您可以使用此工具指定的角色、角色服務和功能的詳細資訊，請參閱 [伺服器管理員](https://go.microsoft.com/fwlink/?LinkID=137387)說明。

## <a name="syntax"></a>語法
```
servermanagercmd -query [[[<Drive>:]<path>]<query.xml>] [-logpath   [[<Drive>:]<path>]<log.txt>]
servermanagercmd -inputpath  [[<Drive>:]<path>]<answer.xml> [-resultpath <result.xml> [-restart] | -whatif] [-logpath [[<Drive>:]<path>]<log.txt>]
servermanagercmd -install <Id> [-allSubFeatures] [-resultpath   [[<Drive>:]<path>]<result.xml> [-restart] | -whatif] [-logpath   [[<Drive>:]<path>]<log.txt>]
servermanagercmd -remove <Id> [-resultpath    <result.xml> [-restart] | -whatif] [-logpath  [[<Drive>:]<path>]<log.txt>]
servermanagercmd [-help | -?]
servermanagercmd -version
```

### <a name="parameters"></a>參數

|                   參數                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                描述                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|  -query [[[ \<Drive> ：] \<path> ] \<*query.xml*> ]   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                顯示已安裝且可在伺服器上安裝之所有角色、角色服務和功能的清單。 您也可以使用此參數的簡短形式 **-q**。 如果您想要將查詢結果儲存至 XML 檔案，請指定 XML 檔案來取代 *query.xml*。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| -inputpath < [[ \<Drive> ：] \<path> ]*answer.xml*> |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             安裝或移除 *answer.xml*所代表之 XML 回應檔案中指定的角色、角色服務和功能。 您也可以使用此參數的簡短形式 **-p。**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                -安裝 \<*Id*>                | 安裝 *Id*所指定的角色、角色服務或功能。識別碼不區分大小寫。 多個角色、角色服務和功能必須以空格分隔。 下列選用參數可與 **-install** 參數搭配使用。<p>-   **-** \<*SettingName*> = 設定 \<*SettingValue*>  指定安裝的必要設定。<br />-   **-allSubFeatures** 指定所有次級服務和功能的安裝，以及在 *識別碼* 值中命名的父角色、角色服務或功能。 **注意：**     某些角色容器沒有可允許安裝所有角色服務的命令列識別碼。 如果角色服務不能安裝在與伺服器管理員命令的同一個例項中，就是這種情況。 例如，無法使用相同的伺服器管理員命令實例來安裝 active directory Federation Services 和同盟服務 Proxy 角色服務的同盟服務角色服務。<br />-   **-resultpath** \<*result.xml>  將安裝結果儲存至result.xml所代表的 XML 檔案 \* *。您也可以使用此參數的簡短形式 **-r**。**注意：**    您無法使用指定的 **-resultpath**參數和 **-whatif**參數來執行**servermanagercmd** 。 <br /> -   **-重新開機**當安裝完成時，自動重新開機電腦 (如果) 安裝的角色或功能需要重新開機。 <br /> -   **-whatif**顯示為 **-install**參數指定的任何作業。您也可以使用 **-whatif**參數的簡短形式 **-w**。您無法使用指定的 **-resultpath**參數和 **-whatif**參數來執行**servermanagercmd** 。 <br /> -   **-logpath** \<[[\<Drive> ：] \<path> ]* log.txt * > 指定記錄檔的名稱和位置，而不是預設的 **%windir%\temp\servermanager.log**。 |
|                -移除 \<*Id*>                 |                                                                                                                                                                                                                                                                                                                                                                     移除 *Id*所指定的角色、角色服務或功能。識別碼不區分大小寫。 多個角色、角色服務和功能必須以空格分隔。 下列選擇性參數會搭配 **-remove** 參數使用。<p>-   **-resultpath** \<[[\<Drive> ：] \<path> ]*result.xml*> 將移除結果儲存至 *result.xml*所代表的 XML 檔案。 您也可以使用此參數的簡短形式 **-r**。 **注意：**    您無法使用指定的 **-resultpath**參數和 **-whatif**參數來執行**servermanagercmd** 。<br />-   **-重新開機** 移除完成時，自動重新開機電腦 (如果剩餘角色或功能) 需要重新開機。<br />-   **-whatif** 顯示為 **-remove** 參數指定的任何作業。 您也可以使用 **-whatif** 參數的簡短形式 **-w**。 您無法使用指定的 **-resultpath**參數和 **-whatif**參數來執行**servermanagercmd** 。<br />-   **-logpath** \<[[\<Drive> ：] \<path> ]*log.txt*> 指定記錄檔的名稱和位置，而不是預設的 **%windir%\temp\servermanager.log**。                                                                                                                                                                                                                                                                                                                                                                      |
|                     -help                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            在 [命令提示字元] 視窗中顯示說明。 您也可以使用簡短形式 **-？**。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                    -version                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            顯示伺服器管理員的版本號碼。 您也可以使用簡短形式 **-v**。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |

## <a name="remarks"></a>備註
**Servermanagercmd** 已被取代，而且在未來的 Windows 版本中不保證會受到支援。 如果您在執行 Windows Server 2008 R2 的電腦上執行伺服器管理員，我們建議您使用適用于伺服器管理員的 Windows PowerShell Cmdlet。 如需詳細資訊，請參閱 [伺服器管理員 Cmdlet](https://go.microsoft.com/fwlink/?LinkID=137653)。
Servermanagercmd 可以從伺服器本機磁片磁碟機上的任何目錄中執行。 您必須是要安裝或移除軟體之伺服器的 Administrators 群組成員。

> [!IMPORTANT]
> 由於 Windows Server 2008 R2 中的使用者帳戶控制所加諸的安全性限制，您必須在以較高許可權開啟的命令提示字元視窗中執行 **Servermanagercmd** 。 若要這樣做，請在命令提示字元可執行檔或 [**開始**] 功能表上的 [**命令提示**字元] 物件上按一下滑鼠右鍵，然後按一下 [以**系統管理員身分執行**]。

## <a name="examples"></a>範例
顯示如何使用 **servermanagercmd** 來顯示所有角色、角色服務和功能的清單，以及電腦上安裝的角色、角色服務和功能。
```
servermanagercmd -query
```
若要示範如何使用 **servermanagercmd** 來安裝 Web 服務器 (IIS) 角色，然後將安裝結果儲存至 *installResult.xml*所代表的 XML 檔案。
```
servermanagercmd -install Web-Server -resultpath installResult.xml
```
若要示範如何搭配使用 **whatif** 參數與 **servermanagercmd** ，以根據 *install.xml*所代表的 XML 回應檔案中指定的指示，顯示有關要安裝或移除的角色、角色服務和功能的詳細資訊。
```
servermanagercmd -inputpath install.xml -whatif
```

## <a name="additional-references"></a>其他參考資料
-   如需您可以為 *Id* 參數指定的角色、角色服務或功能識別碼的完整清單，或有關搭配 **Servermanagercmd**使用 XML 回應檔案的詳細資訊，請參閱 [伺服器管理員](https://go.microsoft.com/fwlink/?LinkID=137387)說明。 (https://go.microsoft.com/fwlink/?LinkID=137387).
-   如需適用于伺服器管理員的 Windows PowerShell Cmdlet 清單，請參閱 [伺服器管理員 Cmdlet](https://go.microsoft.com/fwlink/?LinkID=137653) 。
- [命令列語法關鍵](command-line-syntax-key.md)
