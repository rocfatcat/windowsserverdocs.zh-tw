---
title: Servermanagercmd
description: '\* * * * 的 Windows 命令主題'
ms.prod: windows-server
ms.technology: manage-windows-commands
ms.topic: article
ms.assetid: 507c4b87-8e13-4872-8b34-0c7508eecbc1
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 07/11/2018
ms.openlocfilehash: fbc55445c30fe5f29fb416aff5223f35f32a642e
ms.sourcegitcommit: b00d7c8968c4adc8f699dbee694afe6ed36bc9de
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 04/08/2020
ms.locfileid: "80834641"
---
# <a name="servermanagercmd"></a>Servermanagercmd

>適用於：Windows Server (半年通道)、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

> [!IMPORTANT]
> 此命令僅適用于執行 Windows Server 2008 或 Windows Server 2008 R2 的伺服器。 **Servermanagercmd**已被取代，且在 Windows Server 2012 中無法使用。 如需有關如何在 Windows Server 2012 中安裝或移除角色、角色服務和功能的詳細資訊，請參閱 Microsoft TechNet 上的[安裝或卸載角色、角色服務和功能](https://go.microsoft.com/fwlink/?LinkID=239563)。

安裝和移除角色、角色服務和功能。 也會顯示所有可用的角色、角色服務和功能的清單，並顯示安裝在這部電腦上的。 如需您可以使用此工具來指定的角色、角色服務和功能的詳細資訊，請參閱[伺服器管理員](https://go.microsoft.com/fwlink/?LinkID=137387)說明。 如需如何使用此命令的範例，請參閱[範例](#BKMK_examples)。

## <a name="syntax"></a>語法
```
servermanagercmd -query [[[<Drive>:]<path>]<query.xml>] [-logpath   [[<Drive>:]<path>]<log.txt>]
servermanagercmd -inputpath  [[<Drive>:]<path>]<answer.xml> [-resultpath <result.xml> [-restart] | -whatif] [-logpath [[<Drive>:]<path>]<log.txt>]
servermanagercmd -install <Id> [-allSubFeatures] [-resultpath   [[<Drive>:]<path>]<result.xml> [-restart] | -whatif] [-logpath   [[<Drive>:]<path>]<log.txt>]
servermanagercmd -remove <Id> [-resultpath    <result.xml> [-restart] | -whatif] [-logpath  [[<Drive>:]<path>]<log.txt>]
servermanagercmd [-help | -?]
servermanagercmd -version
```

### <a name="parameters"></a>參數

|                   參數                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                描述                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |
|------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|  -query [[[\<磁片磁碟機 >：]\<路徑 >]\<*query .xml*>]   |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                顯示伺服器上安裝並可供安裝的所有角色、角色服務和功能清單。 您也可以使用此參數的簡短形式 **-q**。 如果您想要將查詢結果儲存到 XML 檔案，請指定 XML 檔案來取代*query .xml*。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
| -inputpath < [[\<磁片磁碟機 >：]\<路徑 >]*解答 .xml*> |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             安裝或移除由*解答*所表示的 XML 回應檔案中所指定的角色、角色服務和功能。 您也可以使用此參數的簡短形式 **-p。**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
|                -安裝 \<*識別碼*>                | 安裝*識別碼*所指定的角色、角色服務或功能。識別碼不區分大小寫。 多個角色、角色服務和功能必須以空格分隔。 下列選用參數會與 **-install**參數搭配使用。<p>-   **設定**\<*SettingName*>=\<*SettingValue*> 指定安裝所需的設定。<br />-   **allSubFeatures**會指定所有從屬服務和功能的安裝，以及*識別碼*值中名為的父系角色、角色服務或功能。 **注意：**    某些角色容器沒有可允許安裝所有角色服務的命令列識別碼。 如果角色服務不能安裝在與伺服器管理員命令的同一個例項中，就是這種情況。 例如，active directory Federation Services 和同盟服務 Proxy 角色服務的同盟服務角色服務，無法使用相同的伺服器管理員命令實例來安裝。<br />-   **resultpath** \<*結果。 xml > 會將安裝結果儲存到 \*result 所代表的 xml*檔案。 您也可以使用此參數的簡短形式 **-r**。 **注意：**    您不能同時指定 **-resultpath**參數和 **-whatif**參數來執行**servermanagercmd** 。<br />-    **-重新開機**會在安裝完成時自動重新開機電腦（如果已安裝角色或功能需要重新開機）。<br />-    **-whatif**會顯示為 **-install**參數指定的任何作業。 您也可以使用 **-whatif**參數的簡短形式 **-w**。 您不能同時指定 **-resultpath**參數和 **-whatif**參數來執行**servermanagercmd** 。<br />-   **logpath** \<[[\<磁片磁碟機 >：]\<路徑 >]*log .Txt*> 會指定記錄檔的名稱和位置，而不是預設的 **%windir%\temp\servermanager.log**。 |
|                -移除 \<*識別碼*>                 |                                                                                                                                                                                                                                                                                                                                                                     移除*識別碼*所指定的角色、角色服務或功能。識別碼不區分大小寫。 多個角色、角色服務和功能必須以空格分隔。 下列選擇性參數會與 **-remove**參數搭配使用。<p>-   **resultpath** \<[[\<磁片磁碟機 >：]\<路徑 >]*結果。 xml*> 會將移除結果儲存到*RESULT*.xml 所代表的 xml 檔案。 您也可以使用此參數的簡短形式 **-r**。 **注意：**    您不能同時指定 **-resultpath**參數和 **-whatif**參數來執行**servermanagercmd** 。<br />-    **-重新開機**會在移除完成時自動重新開機電腦（如果剩餘的角色或功能需要重新開機）。<br />-    **-whatif**會顯示為 **-remove**參數指定的任何作業。 您也可以使用 **-whatif**參數的簡短形式 **-w**。 您不能同時指定 **-resultpath**參數和 **-whatif**參數來執行**servermanagercmd** 。<br />-   **logpath**\<[[\<磁片磁碟機 >：]\<路徑 >]*log .Txt*> 會指定記錄檔的名稱和位置，而不是預設的 **%windir%\temp\servermanager.log**。                                                                                                                                                                                                                                                                                                                                                                      |
|                     -help                      |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            在 [命令提示字元] 視窗中顯示 [說明]。 您也可以使用簡短形式 **-？** 。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
|                    -version                    |                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            顯示伺服器管理員的版本號碼。 您也可以使用簡短形式 **-v**。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |

## <a name="remarks"></a>備註
**Servermanagercmd**已被取代，在未來的 Windows 版本中不保證會受到支援。 如果您在執行 Windows Server 2008 R2 的電腦上執行伺服器管理員，建議使用可用於伺服器管理員的 Windows PowerShell Cmdlet。 如需詳細資訊，請參閱[伺服器管理員 Cmdlet](https://go.microsoft.com/fwlink/?LinkID=137653)。
Servermanagercmd 可以從伺服器本機磁片磁碟機上的任何目錄執行。 您必須是要安裝或移除軟體之伺服器的 Administrators 群組成員。

> [!IMPORTANT]
> 由於 Windows Server 2008 R2 中的使用者帳戶控制所強加的安全性限制，您必須在以較高許可權開啟的 [命令提示字元] 視窗中執行**Servermanagercmd** 。 若要這麼做，請以滑鼠右鍵按一下命令提示字元可執行檔，或 [**開始**] 功能表上的 [**命令提示**字元] 物件，然後按一下 [以**系統管理員身分執行**]。

## <a name="examples"></a><a name=BKMK_examples></a>典型
下列範例示範如何使用**servermanagercmd**來顯示所有可用角色、角色服務和功能的清單，以及電腦上安裝的角色、角色服務和功能。
```
servermanagercmd -query
```
下列範例示範如何使用**servermanagercmd**來安裝網頁伺服器（IIS）角色，並將安裝結果儲存到*installResult*所代表的 XML 檔案。
```
servermanagercmd -install Web-Server -resultpath installResult.xml
```
下列範例示範如何搭配**servermanagercmd**使用**whatif**參數，以顯示有關角色、角色服務和功能的詳細資訊，這些內容會根據*install. xml*所代表的 XML 回應檔案中指定的指示來進行安裝或移除。
```
servermanagercmd -inputpath install.xml -whatif
```

## <a name="additional-references"></a>其他參考資料
-   如需您可以為*Id*參數指定的角色、角色服務或功能識別碼的完整清單，或有關搭配**Servermanagercmd**使用 XML 回應檔案的詳細資訊，請參閱[伺服器管理員](https://go.microsoft.com/fwlink/?LinkID=137387)說明。 （ https://go.microsoft.com/fwlink/?LinkID=137387)。
-   如需可供伺服器管理員使用之 Windows PowerShell Cmdlet 的清單，請參閱[伺服器管理員 Cmdlet](https://go.microsoft.com/fwlink/?LinkID=137653) 。
-   - [命令列語法關鍵](command-line-syntax-key.md)
