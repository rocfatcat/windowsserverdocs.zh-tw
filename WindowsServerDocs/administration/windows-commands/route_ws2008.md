---
title: route_ws2008
description: 瞭解如何修改和顯示本機 IP 路由表中的專案。
ms.custom: na
ms.prod: windows-server
ms.reviewer: na
ms.suite: na
ms.technology: manage-windows-commands
ms.tgt_pltfrm: na
ms.topic: article
ms.assetid: afcd666c-0cef-47c2-9bcc-02d202b983b3
author: coreyp-at-msft
ms.author: coreyp
manager: dongill
ms.date: 07/11/2018
ms.openlocfilehash: cc68dd5634ae4832376924c1678dc10a0427f2b2
ms.sourcegitcommit: 6aff3d88ff22ea141a6ea6572a5ad8dd6321f199
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/27/2019
ms.locfileid: "71371418"
---
# <a name="route_ws2008"></a>route_ws2008

>適用於：Windows Server (半年通道)、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

顯示和修改本機 IP 路由表中的專案。 使用時不含參數， **route**會顯示說明。   

## <a name="syntax"></a>語法  
```  
route [/f] [/p] [<Command> [<Destination>] [mask <Netmask>] [<Gateway>] [metric <Metric>]] [if <Interface>]]  
```  

### <a name="parameters"></a>Parameters  

|參數|描述|  
|-------|--------|  
|/f|清除所有不是主機路由之專案的路由表（網路遮罩為255.255.255.255 的路由）、回送網路路由（目的地為127.0.0.0 且網路遮罩為255.0.0.0 的路由）或多播路由（目的地為224.0.0.0 的路由）和240.0.0.0 的網路遮罩）。 如果搭配其中一個命令（例如 [新增]、[變更] 或 [刪除]）使用此選項，則在執行此命令之前，會先清除該資料表。|  
|/p|與 add 命令搭配使用時，會將指定的路由新增至登錄，並在每次啟動 TCP/IP 通訊協定時，用來初始化 IP 路由表。 根據預設，當 TCP/IP 通訊協定啟動時，不會保留新增的路由。 與 print 命令搭配使用時，會顯示持續性路由清單。 所有其他命令都會忽略這個參數。 持續性路由會儲存在登錄位置， **HKEY_LOCAL_MACHINE \system\currentcontrolset\services\tcpip\parameters\persistentroutes**。|  
|\<命令 >|指定您想要執行的命令。 下表列出有效的命令：<br /><br />-   **新增：** 新增路由。<br />-   **變更：** 修改現有的路由。<br />-   **刪除：** 刪除路由或路由。<br />-   **列印：** 列印路線或路線。|  
|\<目的地 >|指定路由的網路目的地。 目的地可以是 IP 網路位址（其中網路位址的主機位設定為0）、主機路由的 IP 位址，或預設路由的0.0.0.0。|  
|mask \<網路遮罩 >|指定路由的網路目的地。 目的地可以是 IP 網路位址（其中網路位址的主機位設定為0）、主機路由的 IP 位址，或預設路由的0.0.0.0。|  
|\<閘道 >|指定轉送或下一個躍點 IP 位址，以供連線到網路目的地和子網路遮罩所定義的位址集合。 若為本機附加的子網路由，閘道位址就是指派給附加至子網之介面的 IP 位址。 對於在一或多個路由器上提供的遠端路由，閘道位址是可直接連線的 IP 位址，指派給連續的路由器。|  
|計量 \<度量 >|指定路由的整數成本標準（範圍介於1到9999），這是在路由表中選擇多個路由時所使用，最符合轉送封包的目的地位址。 已選擇最低度量的路由。 計量可以反映躍點的數目、路徑的速度、路徑可靠性、路徑輸送量，或系統管理屬性。|  
|如果 \<介面 >|指定可連接目的地之介面的介面索引。 如需介面和其對應介面索引的清單，請使用 route print 命令的顯示。 您可以針對介面索引使用十進位或十六進位值。 若為十六進位值，請在十六進位數位前面加上0x。 省略 if 參數時，會從閘道位址判斷介面。|  
|/?|在命令提示字元顯示說明。|  

## <a name="remarks"></a>備註  
- 路由表之 [計量]**資料行中的大**數值，是根據每個 LAN 介面的 IP 位址、子網路遮罩和預設閘道的設定，讓 tcp/ip 能夠自動判斷路由表中的路由度量結果。 自動判斷介面計量（預設為啟用）會決定每個介面的速度，並調整每個介面的路由計量，讓最快速的介面建立具有最低計量的路由。 若要移除大型計量，請從每個 LAN 連線的 TCP/IP 通訊協定的 advanced 屬性，停用自動判斷介面度量。  
- 如果儲存在<strong>systemroot\System32\Drivers\\</strong>Etc 資料夾中的區域網路檔案中有適當的專案，就可以將名稱用於*目的地*。 只要可以透過標準主機名稱解析技術（例如網域名稱系統（DNS）查詢）將名稱解析成 IP 位址，並使用儲存在<strong>systemroot\system32\drivers\\</strong>etc 資料夾中的本機主機檔案，以及 NetBIOS 名稱解析 *，就可以*使用名稱。  
- 如果命令是**print**或**delete**，則可以省略*Gateway*參數，並可將萬用字元用於目的地和閘道。 *目的地*值可以是星號（*）所指定的萬用字元值。 如果指定的目的地包含星號（\*）或問號（？），則會將它視為萬用字元，而且只會列印或刪除相符的目的地路由。 星號會比對任何字串，且問號會符合任何單一字元。 例如，10。\*1，192.168。\*，127。\*和 \*224\* 都是星號萬用字元的有效用法。  
- 使用不正確目的地和子網路遮罩（網路遮罩）值組合時，會顯示「路由：錯誤的閘道位址網遮罩」錯誤訊息。 當目的地包含位位置中的一個或多個位設定為1，且對應的子網路遮罩位設定為0時，就會出現此錯誤訊息。 若要測試此條件，請使用二進位標記法來表示目的地和子網路遮罩。 二進位標記法中的子網路遮罩由一系列的1位組成，代表目的地的網路位址部分，以及一系列0位，代表目的地的主機位址部分。 檢查以判斷目的地中是否有針對主機位址的部分（由子網路遮罩所定義）設定為1的位。  
- 只有適用于 Windows NT 4.0、Windows 2000、Windows Millennium edition、Windows XP 和 Windows Server 2003 的 route 命令才支援 **/p**參數。 Windows 95 或 Windows 98 的**route**命令不支援這個參數。  
- 只有當網際網路通訊協定（TCP/IP）通訊協定是在網路連線的網路介面卡內容中安裝為元件時，才可以使用此命令。  

## <a name="BKMK_Examples"></a>典型  
若要顯示 IP 路由表的完整內容，請輸入：  
```  
route print  
```  
若要在 IP 路由表中顯示以10開頭的路由，請輸入：  
```  
route print 10.*  
```  
若要新增預設閘道位址為192.168.12.1 的預設路由，請輸入：  
```  
route add 0.0.0.0 mask 0.0.0.0 192.168.12.1  
```  
若要將路由新增至目的地10.41.0.0，其子網路遮罩為255.255.0.0，而下一個躍點位址為10.27.0.1，請輸入：  
```  
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1  
```  
若要將持續性路由新增至目的地10.41.0.0，其子網路遮罩為255.255.0.0，而下一個躍點位址為10.27.0.1，請輸入：  
```  
route /p add 10.41.0.0 mask 255.255.0.0 10.27.0.1  
```  
若要將路由新增至目的地10.41.0.0，子網路遮罩為255.255.0.0，下一個躍點位址為10.27.0.1，而成本計量為7，請輸入：  
```  
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 metric 7  
```  
若要將路由新增至目的地10.41.0.0，其子網路遮罩為255.255.0.0，下一個躍點位址為10.27.0.1，並使用介面索引0x3，請輸入：  
```  
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 if 0x3  
```  
若要刪除目的地為10.41.0.0，子網路遮罩為255.255.0.0 的路由，請輸入：  
```  
route delete 10.41.0.0 mask 255.255.0.0  
```  
若要刪除 IP 路由表中開頭為10的所有路由，請輸入：  
```  
route delete 10.*  
```  
若要將目的地為10.41.0.0 且子網路遮罩為255.255.0.0 從10.27.0.1 到10.27.0.25 的路由的下一個躍點位址，請輸入：  
```  
route change 10.41.0.0 mask 255.255.0.0 10.27.0.25  
```  

## <a name="additional-references"></a>其他參考  
-   [命令列語法關鍵](command-line-syntax-key.md)  
