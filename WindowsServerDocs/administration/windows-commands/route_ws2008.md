---
title: route
description: 路由命令的參考文章，可修改和顯示本機 IP 路由表中的專案。
ms.topic: reference
ms.assetid: afcd666c-0cef-47c2-9bcc-02d202b983b3
ms.author: lizross
author: eross-msft
manager: mtillman
ms.date: 07/11/2018
ms.openlocfilehash: 3c38c1946c49318fc9aae901758eef412a8a586a
ms.sourcegitcommit: db2d46842c68813d043738d6523f13d8454fc972
ms.translationtype: MT
ms.contentlocale: zh-TW
ms.lasthandoff: 09/10/2020
ms.locfileid: "89639832"
---
# <a name="route"></a>route

> 適用于： Windows Server (半年通道) 、Windows Server 2019、Windows Server 2016、Windows Server 2012 R2、Windows Server 2012

顯示和修改本機 IP 路由表中的專案。 如果使用時不含參數，則 **路由** 會在命令提示字元中顯示說明。

> [!IMPORTANT]
> 只有在 [網路連線] 的網路介面卡內容中，將 [ (TCP/IP) 通訊協定安裝為元件時，才能使用此命令。

## <a name="syntax"></a>語法

```
route [/f] [/p] [<command> [<destination>] [mask <netmask>] [<gateway>] [metric <metric>]] [if <interface>]]
```

### <a name="parameters"></a>參數

| 參數 | 描述 |
|--|--|
| /f | 清除所有不是主機路由的路由表， (路由遮罩為 255.255.255.255) 的路由、回送網路路由 (路由的目的地為127.0.0.0、網路遮罩為 255.0.0.0) ，或是多播路由 (目的地為224.0.0.0 和240.0.0.0 的網路遮罩) 路由。 如果與其中一個命令搭配使用 (例如 [新增]、[變更] 或 [刪除]) ，則會在執行命令之前清除資料表。 |
| /p | 與 add 命令搭配使用時，會將指定的路由新增至登錄，並且在每次啟用 TCP/IP 通訊協定時，用來初始化 IP 路由表。 依預設，啟動 TCP/IP 通訊協定時，不會保留加入的路由。 搭配 print 命令使用時，會顯示持續性路由清單。 所有其他命令都會忽略這個參數。 持續性路由會儲存在登錄位置 **HKEY_LOCAL_MACHINE \system\currentcontrolset\services\tcpip\parameters\persistentroutes**。 |
| `<command>` | 指定您想要執行的命令。 有效的命令包括：<ul><li>**新增** -新增路由。</li><li>**變更** -修改現有的路由。</li><li>**delete：** -刪除路由或路由。</li><li>**列印** -列印路由或路由。</li></ul> |
| `<destination>` | 指定路由的網路目的地。 目的地可以是 IP 網路位址 (其中網路位址的主機位設定為 0) 、主機路由的 IP 位址，或預設路由的0.0.0.0。 |
| 面具 `<netmask>` | 指定路由的網路目的地。 目的地可以是 IP 網路位址 (其中網路位址的主機位設定為 0) 、主機路由的 IP 位址，或預設路由的0.0.0.0。 |
| `<gateway>` | 指定轉送或下一個躍點 IP 位址，由網路目的地和子網路遮罩所定義的位址集合可連線。 針對本機連接的子網路由，閘道位址是指派給連結至子網之介面的 IP 位址。 針對可跨一或多個路由器使用的遠端路由，閘道位址是指派給鄰近路由器的可直接連線 IP 位址。 |
| 度量 `<metric>` | 指定路由的整數成本公制 (範圍從 1 到 9999)，用於在路由表的多個路由中選擇時，是最接近轉遞之封包的目的地位址。 將會選擇具有最低公制的路由。 此公制可反映出躍點的數量、路徑速度、路徑可靠性、路徑輸送量或系統管理內容。 |
| 如果 `<interface>` | 指定介面的介面索引，透過此介面可連接目的地。 對於介面清單及其對應的介面索引，請使用 Route Print 命令的顯示。 介面索引可以使用十進位或十六進位的值。 若是十六進位的值，請在十六進位的數字前加 0x。 如果省略 if 參數，則會從閘道位址判別介面。 |
| /? | 在命令提示字元顯示說明。 |

#### <a name="remarks"></a>備註

- 路由表的 [計量] **資料行中的大型** 值是允許 tcp/ip 根據每個區域網路介面的 IP 位址、子網路遮罩和預設閘道的設定，自動決定路由的度量的結果。 自動判斷介面計量（預設為啟用）會決定每個介面的速度，並調整每個介面的路由度量，讓最快速的介面能以最低的度量建立路由。 若要移除大型計量，請從每個區域網路連線的 TCP/IP 通訊協定的 advanced 屬性停用自動判斷介面度量。

- 如果儲存在資料夾中的局域*網路*檔案中有適當的專案，就可以將名稱用於*目的地* `systemroot\System32\Drivers\\` 。 您可以將名稱用於 *閘道* ，只要透過標準主機名稱解析技術（例如網域名稱系統 (DNS) 查詢、使用儲存在資料夾中的本機主機檔案 `systemroot\system32\drivers\\` ，以及 NetBIOS 名稱解析等），就可以將名稱解析成 IP 位址。

- 如果命令為 **print** 或 **delete**，則可以省略 *閘道* 參數，並可將萬用字元用於目的地和閘道。 *目的地*值可以是星號所指定的萬用字元值 `(*)` 。 如果指定的目的地包含星號 `(*)` 或問號 (？ ) ，則會將它視為萬用字元，而且只會列印或刪除相符的目的地路由。 星號會比對任何字串，而問號會符合任何單一字元。 例如，、 `10.\*.1, 192.168.\*` `127.\*` 和 `\*224\*` 都是星號萬用字元的有效用法。

- 使用不支援的目的地和子網路遮罩組合 (網路遮罩) 值會顯示「路由：不正確的閘道位址網路遮罩」錯誤訊息。 當目的地包含在位位置中將對應的子網路遮罩位設定為0的一或多個位設定為1時，就會出現此錯誤訊息。 若要測試這種情況，請使用二進位標記法來表示目的地和子網路遮罩。 二元標記法中的子網路遮罩包含一系列的1位，代表目的地的網路位址部分，而一系列的0位則代表目的地的主機位址部分。 檢查以判斷目的地中是否有針對主機位址 (的目的地部分設定為1的位（如同子網路遮罩) 所定義）。

## <a name="examples"></a>範例

若要顯示 IP 路由表的完整內容，請輸入：

```
route print
```

若要在 IP 路由表中顯示以10開頭的路由，請輸入：

```
route print 10.*
```

若要新增預設閘道位址為192.168.12.1 的預設路由，請輸入：

```
route add 0.0.0.0 mask 0.0.0.0 192.168.12.1
```

若要將路由新增至目的地10.41.0.0，子網路遮罩為255.255.0.0，而下一個躍點位址為10.27.0.1，請輸入：

```
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1
```

若要將持續性路由新增至目的地10.41.0.0，子網路遮罩為255.255.0.0，而下一個躍點位址為10.27.0.1，請輸入：

```
route /p add 10.41.0.0 mask 255.255.0.0 10.27.0.1
```

若要將路由新增至目的地10.41.0.0，子網路遮罩為255.255.0.0、下一個躍點位址為10.27.0.1、成本計量為7，請輸入：

```
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 metric 7
```

若要將路由新增至目的地10.41.0.0，子網路遮罩為255.255.0.0、下一個躍點位址為10.27.0.1，以及使用 interface index 0x3，請輸入：

```
route add 10.41.0.0 mask 255.255.0.0 10.27.0.1 if 0x3
```

若要刪除目的地為10.41.0.0 的子網路遮罩為255.255.0.0 的路由，請輸入：

```
route delete 10.41.0.0 mask 255.255.0.0
```

若要刪除 IP 路由表中以10開頭的所有路由，請輸入：

```
route delete 10.*
```

若要將目的地為10.41.0.0 的路由和子網路遮罩255.255.0.0 從10.27.0.1 變更為10.27.0.25 的下一個躍點位址，請輸入：

```
route change 10.41.0.0 mask 255.255.0.0 10.27.0.25
```

## <a name="additional-references"></a>其他參考資料

- [命令列語法關鍵](command-line-syntax-key.md)
